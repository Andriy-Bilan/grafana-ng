{"version":3,"sources":["../../../../app/plugins/widgets/chart/src/edit/general/general.ts","../../../../app/plugins/widgets/chart/src/edit/general/general.html","../../../../app/plugins/widgets/chart/src/chart.m.ts","../../../../app/plugins/widgets/chart/src/edit/metrics/metrics.ts","../../../../app/plugins/widgets/chart/src/edit/metrics/metrics.html","../../../../app/plugins/widgets/chart/src/edit/axes/axes.ts","../../../../app/plugins/widgets/chart/src/edit/axes/axes.html","../../../../app/plugins/widgets/chart/src/edit/legend/legend.ts","../../../../app/plugins/widgets/chart/src/edit/editor.html","../../../../app/plugins/widgets/chart/src/edit/legend/legend.html","../../../../app/plugins/widgets/chart/src/edit/editor.ts","../../../../app/plugins/widgets/chart/src/view/extensions/pixel-helper.ts","../../../../app/plugins/widgets/chart/src/view/extensions/trackball-drawer.ts","../../../../../node_modules/tslib/tslib.es6.js","../../../../app/plugins/widgets/chart/src/view/render/color-helper.ts","../../../../app/plugins/widgets/chart/src/view/render/display-manager.ts","../../../../app/plugins/widgets/chart/src/view/data/data-converter.ts","../../../../app/plugins/widgets/chart/src/view/data/data-provider.ts","../../../../app/plugins/widgets/chart/src/view/options-provider.ts","../../../../app/plugins/widgets/chart/src/chart.c.ts","../../../../app/plugins/widgets/chart/src/chart.mod.ts"],"names":["GeneralEditorComponent","prototype","ngOnInit","console","log","ngOnDestroy","selectors","decls","vars","template","rf","ctx","i0.ɵɵtext","PANEL_TOKEN","MetricsEditorComponent","panel","this","i0","ɵɵdirectiveInject","AxesEditorComponent","LegendEditorComponent","show","Object","defineProperty","_b","_a","widget","legend","onSelected","i0.ɵɵelement","consts","i0.ɵɵelementStart","i0.ɵɵelementEnd","i0.ɵɵlistener","i0.ɵɵadvance","i0.ɵɵproperty","ChartEditorComponent","router","activatedRoute","location","_this","index","queryParamMap","subscribe","params","p","get","Number","isInteger","onTabSelected","url","createUrlTree","relativeTo","queryParams","tab","queryParamsHandling","toString","go","i1","Router","ActivatedRoute","i2$1","Location","$event","i0.ɵɵtemplate","PixelHelper","alignPixel","chart","pixel","width","devicePixelRatio","currentDevicePixelRatio","halfWidth","Math","round","TrackballDrawerPlugin","ID","afterDatasetsDraw","easing","getMousePos","canvas","evt","rect","getBoundingClientRect","x","clientX","left","y","clientY","top","__read","o","n","m","Symbol","iterator","r","e","i","call","ar","next","done","push","value","error","__spread","arguments","length","concat","ColorHelper","getColor","ds","color","palette","hexToRgb","getColorAsArgbFunc","opacity","g","b","hex","result","exec","parseInt","parse","input","arr","substr","collen","fact","split","map","rgbToHex","c","padStart","DisplayManager","display","setup","setupLines","setupPoints","setupNullValue","showLines","getShowLines","lineWidth","getLineWidth","fill","getFill","backgroundColor","getLineColor","borderColor","borderWidth","steppedLine","getStaircase","getDashes","len","getDashLength","space","getDashSpace","borderDash","undefined","order","getZIndex","getLegend","showPoints","getShowPoints","pointBorderColor","pointBackgroundColor","pointRadius","getPointRadius","nullValue","setupOverrides","getOverride","lines","overrideColor","defaultColor","useOverride","lineFill","staircase","dashes","dashLength","dashSpace","points","zIndex","getYAxis","yAxis","overrides","find","alias","RegExp","test","label","ɵɵinject","factory","ɵfac","DataConverter","dispay","toDataSets","data","dataSets","totalIndex","forEach","serie","columns","slice","el","toDataSet","filter","values","isNull","Moment","valueOf","filteredValues","parseFloat","avg","reduce","a","allNulls","every","allZeros","generateDataSetName","lineTension","min","apply","max","current","root","name","tags","keyIndex","keys","key","DataProvider","pluginActivator","dsService","converter","time","data$","EventEmitter","timeSubs","range$","pipe","tap","_","request","mergeMap","createDataSourceMetricsBuilder","mb","build","metrics","range","pull","destroy","unsubscribe","loading","proxy","finalize","onData","onError","emit","datasets","err","i1$1","PluginActivator","DataSourceService","TimeRangeStore","OptionsProvider","getOptions","Chart","defaults","global","defaultFontColor","defaultFontFamily","defaultFontSize","axisYa","id","gridLines","zeroLineWidth","maintainAspectRatio","animation","spanGaps","scales","xAxes","type","ticks","autoSkip","autoSkipPadding","maxRotation","minRotation","displayFormats","second","minute","hour","day","week","month","year","yAxes","ChartComponent","dataProvider","plugins","d","options","features","ɵɵProvidersFeature","ChartWidgetModule","imports","CommonModule","FormsModule","ReactiveFormsModule","ChartModule","EdCommonModule","EdUilibModule","declarations","exports"],"mappings":"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","sourcesContent":["import { Component } from '@angular/core';\n\n@Component({\n  selector: 'editor-general',\n  templateUrl: './general.html'\n})\nexport class GeneralEditorComponent {\n \n  ngOnInit(){\n    console.log( 'create GeneralEditorComponent' )\n  }\n\n  ngOnDestroy(){\n    console.log( 'detroy GeneralEditorComponent' )\n  }\n}\n","general will be here","export const PANEL_TOKEN = \"panel\";\r\n\r\nexport interface ChartData{\r\n\tdatasets: DataSet[];\r\n}\r\n\r\nexport interface DataSet{\r\n\tlabel: string;\r\n\tdata: DataPoint[];\r\n\r\n\tmin?: number;\r\n\tmax?: number\r\n\tavg?: number;\r\n\tcurrent?: number;\r\n\r\n\tallNulls?: boolean;\r\n\tallZeros?: boolean;\r\n\r\n\tindex: number;\r\n\r\n\t//display\r\n\tfill?: boolean;\r\n\tbackgroundColor?:string; \r\n\tborderColor?: string;\r\n\tborderWidth?: number;\r\n\r\n\tpointBorderColor?: string; \r\n\tpointBackgroundColor?: string; \r\n\tpointRadius?: number; \r\n\r\n\tsteppedLine?: boolean;\r\n\r\n\tborderDash?: number[]\r\n\r\n\torder?: number;\r\n\r\n\tlegend?: boolean;\r\n}\r\n\r\nexport interface DataPoint{\r\n\tx?: number;\r\n\ty?: number;\r\n\tisNull: boolean;\r\n}\r\n\r\nexport interface RGB{\r\n\tr: number;\r\n\tg: number;\r\n\tb: number;\r\n}","import { Component, Inject } from '@angular/core';\nimport { Panel } from 'common';\nimport { PANEL_TOKEN } from '../../chart.m';\n\n\n@Component({\n  selector: 'editor-metrics',\n  templateUrl: './metrics.html'\n})\nexport class MetricsEditorComponent {\n \n  constructor(@Inject( PANEL_TOKEN ) private panel: Panel){\n    \n  }\n  ngOnInit(){\n    console.log( 'create MetricsComponent' )\n    console.log( this.panel );\n  }\n\n  ngOnDestroy(){\n    console.log( 'detroy MetricsComponent' )\n  }\n}\n","metrics will be here","import { Component } from '@angular/core';\n\n\n@Component({\n  selector: 'editor-axes',\n  templateUrl: './axes.html'\n})\nexport class AxesEditorComponent {\n \n  ngOnInit(){\n    console.log( 'create AxesEditorComponent' )\n  }\n\n  ngOnDestroy(){\n    console.log( 'detroy AxesEditorComponent' )\n  }\n}\n","axes will be here","import { Component, Inject } from '@angular/core';\nimport { Panel } from 'common';\nimport { PANEL_TOKEN } from '../../chart.m';\n\n@Component({\n  selector: 'editor-legend',\n  templateUrl: './legend.html'\n})\nexport class LegendEditorComponent {\n \n  get legend(){\n    return this.panel?.widget?.legend;\n  }\n\n  show: boolean = true;\n  \n  constructor(@Inject( PANEL_TOKEN ) private panel: Panel){\n    console.log(  )  ;\n  }\n\n  ngOnInit(){\n    console.log( 'create LegendEditorComponent' )\n  }\n\n  ngOnDestroy(){\n    console.log( 'detroy LegendEditorComponent' )\n  }\n\n  onSelected(){\n    console.log(this.legend );\n  }\n}\n","<ed-tabstrip header=\"Graph\"\r\n\t[(ngModel)]=\"index\"\r\n\t(selected)=\"onTabSelected($event)\">\r\n\r\n\t<ed-tab header=\"General\">\r\n\t\t<ng-template edTabContent>\r\n\t\t\t<editor-general></editor-general>\r\n\t\t</ng-template>\r\n\t</ed-tab>\r\n\r\n\t<ed-tab header=\"Metrics\">\r\n\t\t<ng-template edTabContent>\r\n\t\t\t<editor-metrics></editor-metrics>\r\n\t\t</ng-template>\r\n\t</ed-tab>\r\n\r\n\t<ed-tab header=\"Axes\">\r\n\t\t<ng-template edTabContent>\r\n\t\t\t<editor-axes></editor-axes>\r\n\t\t</ng-template>\r\n\t</ed-tab>\r\n\r\n\t<ed-tab header=\"Legend\">\r\n\t\t<ng-template edTabContent>\r\n\t\t\t<editor-legend></editor-legend>\r\n\t\t</ng-template>\r\n\t</ed-tab>\r\n\r\n\t<ed-tab header=\"Display\">\r\n\t\t<ng-template edTabContent>\r\n\t\t\tdisplay will be here\r\n\t\t</ng-template>\r\n\t</ed-tab>\r\n\r\n\t<ed-tab header=\"Alert\">\r\n\t\t<ng-template edTabContent>\r\n\t\t\talert will be here\r\n\t\t</ng-template>\r\n\t</ed-tab>\r\n\r\n\t<ed-tab header=\"Time range\">\r\n\t\t<ng-template edTabContent>\r\n\t\t\ttime range will be here\r\n\t\t</ng-template>\r\n\t</ed-tab>\r\n\r\n</ed-tabstrip>\r\n","<div class=\"section gf-form-group\">\r\n\t<h5 class=\"section-heading\">Options</h5>\r\n\r\n\t<ed-checkbox \r\n\t\tlabelWidth=\"7\"\r\n\t\tlabel=\"Show\"\r\n\t\t[(ngModel)]=\"legend.show\">\r\n\t</ed-checkbox>\r\n\r\n\t<ed-checkbox \r\n\t\tlabelWidth=\"7\"\r\n\t\tlabel=\"As Table\"\r\n\t\t[(ngModel)]=\"legend.table\">\r\n\t</ed-checkbox>\r\n\r\n\t<ed-checkbox \r\n\t\tlabelWidth=\"7\"\r\n\t\tlabel=\"To the right\"\r\n\t\t[(ngModel)]=\"legend.right\">\r\n\t</ed-checkbox>\r\n</div>\r\n\r\n<div class=\"section gf-form-group\">\r\n\t<h5 class=\"section-heading\">Values</h5>\r\n\r\n\t<div class=\"gf-form-inline\">\r\n\t\t<ed-checkbox \r\n\t\t\tlabelWidth=\"4\"\r\n\t\t\tlabel=\"Min\"\r\n\t\t\t[(ngModel)]=\"legend.min\">\r\n\t\t</ed-checkbox>\r\n\r\n\t\t<ed-checkbox \r\n\t\t\tlabelWidth=\"6\"\r\n\t\t\tlabel=\"Min\"\r\n\t\t\t[(ngModel)]=\"legend.max\">\r\n\t\t</ed-checkbox>\r\n\t</div>\r\n\r\n\t<div class=\"gf-form-inline\">\r\n\t\t<ed-checkbox \r\n\t\t\tlabelWidth=\"4\"\r\n\t\t\tlabel=\"Avg\"\r\n\t\t\t[(ngModel)]=\"legend.avg\">\r\n\t\t</ed-checkbox>\r\n\r\n\t\t<ed-checkbox \r\n\t\t\tlabelWidth=\"6\"\r\n\t\t\tlabel=\"Current\"\r\n\t\t\t[(ngModel)]=\"legend.current\">\r\n\t\t</ed-checkbox>\r\n\t</div>\r\n\r\n\t<div class=\"gf-form-inline\">\r\n\t\t<ed-checkbox \r\n\t\t\tlabelWidth=\"4\"\r\n\t\t\tlabel=\"Total\"\r\n\t\t\t[(ngModel)]=\"legend.total\">\r\n\t\t</ed-checkbox>\r\n\r\n\t\t<!-- <ed-checkbox \r\n\t\t\tlabelWidth=\"6\"\r\n\t\t\tlabel=\"Current\"\r\n\t\t\t[(ngModel)]=\"legend.current\">\r\n\t\t</ed-checkbox> -->\r\n\t</div>\r\n\r\n</div>\r\n\r\n<div class=\"section gf-form-group\">\r\n\t<h5 class=\"section-heading\">Hide series</h5>\r\n\r\n\t<ed-checkbox \r\n\t\tlabelWidth=\"10\"\r\n\t\tlabel=\"With only nulls\"\r\n\t\t[(ngModel)]=\"legend.hideOnlyNulls\">\r\n\t</ed-checkbox>\r\n\r\n\t<ed-checkbox \r\n\t\tlabelWidth=\"10\"\r\n\t\tlabel=\"With only zeros\"\r\n\t\t[(ngModel)]=\"legend.hideOnlyZeroes\">\r\n\t</ed-checkbox>\r\n\r\n</div>","import { Location } from '@angular/common';\nimport { Component } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\n\n@Component({\n  selector: 'widget-editor',\n  templateUrl: './editor.html'\n})\nexport class ChartEditorComponent {\n  index: number = 0;\n\n  constructor(\n    private router: Router,\n    private activatedRoute: ActivatedRoute,\n    private location: Location){\n      this\n        .activatedRoute\n        .queryParamMap\n        .subscribe((params) => {\n          const p = params.get( 'tab' );\n\n          if( Number.isInteger( +p )){\n            this.index = +p;\n          } \n        });\n  }\n\n  onTabSelected( index: number ){\n    const url = this\n      .router\n      .createUrlTree([], {\n        relativeTo: this.activatedRoute,\n        queryParams: {tab: index},\n        queryParamsHandling: 'merge',\n      })\n      .toString()\n\n    this.location.go(url);\n  }\n}\n","\r\nexport class PixelHelper {\r\n\tpublic static alignPixel( chart, pixel, width) {\r\n\t\tvar devicePixelRatio = chart.currentDevicePixelRatio;\r\n\t\tvar halfWidth = width / 2;\r\n\t\treturn Math.round((pixel - halfWidth) * devicePixelRatio) / devicePixelRatio + halfWidth;\r\n\t};\r\n}\r\n","import { PixelHelper } from \"./pixel-helper\";\r\n\r\nexport class TrackballDrawerPlugin {\r\n\tstatic readonly ID = \"trackball\";\r\n\r\n\tget id(){\r\n\t\treturn TrackballDrawerPlugin.ID;\r\n\t}\r\n\r\n\tafterDatasetsDraw(chart, easing) {\r\n\t\t//console.log( \"trackball plugin\" )\r\n\t\treturn;\r\n\t\t\r\n\t\tconst context = chart.chart.ctx;\r\n\r\n\t\tconst scaleX = chart.scales['x-axis-0'];\r\n\t\t\r\n\t\t//const scaleYA = chart.scales[ \"A\" ];\r\n\t\tconst scaleYA = chart.scales[ \"y-axis-0\" ];\r\n\r\n\t\tvar pos = this.getMousePos( chart.canvas, chart.trackball );\r\n\r\n\t\tconsole.log( pos );\r\n\r\n\t\tconst shouldIgnore = \r\n\t\t\t( !chart.trackball ) ||\r\n\t\t\t( 0 == chart.data.datasets.length ) ||\r\n\t\t\t( pos.x < scaleX.left || pos.x > scaleX.right );\r\n\r\n\t\tif( shouldIgnore ){\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst lw = 0.8;\r\n\t\tconst x = PixelHelper.alignPixel( chart, pos.x, lw )\r\n\t\tconst y1 = PixelHelper.alignPixel( chart, scaleYA.top, lw )\r\n\t\tconst y2 = PixelHelper.alignPixel( chart, scaleYA.bottom, lw )\r\n\r\n\t\tcontext.beginPath();\r\n\t\tcontext.strokeStyle = \"#880015\";\r\n\t\tcontext.lineWidth = lw;\r\n\t\tcontext.moveTo( x, y1 );\r\n\t\tcontext.lineTo( x, y2);\r\n\t\tcontext.stroke();\r\n\t}\r\n\r\n\tgetMousePos(canvas, evt) {\r\n\t\tif( !evt ){\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n    var rect = canvas.getBoundingClientRect();\r\n    return {\r\n      x: evt.clientX - rect.left,\r\n      y: evt.clientY - rect.top\r\n    };\r\n\t}\r\n\r\n}","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __createBinding(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","import { DataSet, RGB } from '../../chart.m';\r\n\r\nexport class ColorHelper {\r\n\r\n\tprivate static palette = [\r\n\t\t\t\r\n\t\t\"7eb26d\",\r\n\t\t\"cca300\",\r\n\t\t\"6ed0e0\",\r\n\t\t\"EF843C\",\r\n\t\t\"E24D42\",\r\n\t\t\"1F78C1\",\r\n\t\t\"BA43A9\",\r\n\t\t\"705DA0\",\r\n\t\t\"508642\",\r\n\t\t\"CCA300\",\r\n\t\t\"447EBC\",\r\n\t\t\"C15C17\",\r\n\t\t\"890F02\",\r\n\t\t\"0A437C\",\r\n\t\t\"6D1F62\",\r\n\t\t\"584477\",\r\n\t\t\"B7DBAB\",\r\n\t\t\"F4D598\",\r\n\t\t\"70DBED\",\r\n\t\t\"F9BA8F\",\r\n\t\t\"F29191\",\r\n\t\t\"82B5D8\",\r\n\t\t\"E5A8E2\",\r\n\t\t\"AEA2E0\",\r\n\t\t\"629E51\",\r\n\t\t\"E5AC0E\",\r\n\t\t\"64B0C8\",\r\n\t\t\"E0752D\",\r\n\t\t\"BF1B00\",\r\n\t\t\"0A50A1\",\r\n\t\t\"962D82\",\r\n\t\t\"614D93\",\r\n\t\t\"9AC48A\",\r\n\t\t\"F2C96D\",\r\n\t\t\"65C5DB\",\r\n\t\t\"F9934E\",\r\n\t\t\"5195CE\",\r\n\t\t\"D683CE\",\r\n\t\t\"806EB7\",\r\n\t\t\"3F6833\",\r\n\t\t\"967302\",\r\n\t\t\"2F575E\",\r\n\t\t\"99440A\",\r\n\t\t\"58140C\",\r\n\t\t\"052B51\",\r\n\t\t\"511749\",\r\n\t\t\"3F2B5B\",\r\n\t\t\"E0F9D7\",\r\n\t\t\"FCEACA\",\r\n\t\t\"CFFAFF\",\r\n\t\t\"F9E2D2\",\r\n\t\t\"FCE2DE\",\r\n\t\t\"BADFF4\",\r\n\t\t\"F9D9F9\",\r\n\t\t\"DEDAF7\",\r\n\t\t\"EA6460\"\r\n\t]\r\n\r\n\tstatic getColor(ds: DataSet) {\r\n\t\tconst color = this.palette[ds.index % this.palette.length];\r\n\r\n\t\treturn this.hexToRgb(color);\r\n\t}\r\n\r\n\tstatic getColorAsArgbFunc(ds: DataSet, opacity: number = 1) {\r\n\t\tconst color = this.getColor(ds);\r\n\r\n\t\treturn `rgba(${color.r},${color.g},${color.b}, ${opacity})`\r\n\t}\r\n\r\n\tprivate static hexToRgb(hex: string) {\r\n\t\tvar result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\r\n\t\treturn result ? {\r\n\t\t\tr: parseInt(result[1], 16),\r\n\t\t\tg: parseInt(result[2], 16),\r\n\t\t\tb: parseInt(result[3], 16)\r\n\t\t} : null;\r\n\t}\r\n\r\n\tstatic parse(input: any): RGB {\r\n\t\tvar arr = [];\r\n\r\n\t\tif (input.substr(0,1)==\"#\") {\r\n\t\t\tvar collen=(input.length-1)/3;\r\n\t\t\tvar fact=[17,1,0.062272][collen-1];\r\n\t\t\tarr = [\r\n\t\t\t\t\tMath.round(parseInt(input.substr(1,collen),16)*fact),\r\n\t\t\t\t\tMath.round(parseInt(input.substr(1+collen,collen),16)*fact),\r\n\t\t\t\t\tMath.round(parseInt(input.substr(1+2*collen,collen),16)*fact)\r\n\t\t\t];\r\n\t\t}\r\n\t\telse {\r\n\t\t\tarr =  input.split(\"(\")[1].split(\")\")[0].split(\",\").map(Math.round);\r\n\t\t} \r\n\r\n\t\treturn {\r\n\t\t\tr: arr[ 0 ],\r\n\t\t\tg: arr[ 1 ],\r\n\t\t\tb: arr[ 2 ]\r\n\t\t}\r\n\t\t\t\r\n\t}\r\n\r\n\tstatic rgbToHex( e:string ) : string{\r\n\t\tconst c = ColorHelper.parse( e )\r\n\t\tconst r = c.r.toString(16).padStart(2, \"0\");\r\n\t\tconst g = c.g.toString(16).padStart(2, \"0\");\r\n\t\tconst b = c.b.toString(16).padStart(2, \"0\");\r\n\r\n\t\treturn `#${r}${g}${b}`;\r\n\t}\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","import { Inject, Injectable } from '@angular/core';\r\nimport { Panel } from 'common';\r\nimport { DataSet, PANEL_TOKEN } from '../../chart.m';\r\nimport { ColorHelper } from './color-helper';\r\n\r\n@Injectable()\r\nexport class DisplayManager {\r\n\r\n\tprivate get display() {\r\n\t\treturn this.panel.widget.display;\r\n\t}\r\n\r\n\tconstructor ( @Inject( PANEL_TOKEN ) private panel: Panel ) {\r\n\r\n\t}\r\n\r\n\tsetup(ds: DataSet) {\r\n\t\t//this.setupSecondaryYAxis();\t\t\t\t\t\r\n\r\n\t\tthis.setupLines( ds );\r\n\t\tthis.setupPoints( ds );\r\n\t\tthis.setupNullValue( ds );\r\n\r\n\t\t//this.chart.options.scales.yAxes[ 0 ].stacked = this.chart.widget.display.stack;\r\n\t}\r\n\r\n\tprivate setupLines( ds: DataSet ) {\r\n\t\tconst showLines = this.getShowLines( ds );\r\n\t\tconst lineWidth = this.getLineWidth( ds );\r\n\t\tconst fill = this.getFill( ds );\r\n\r\n\t\tlet opacity = ( fill / 10);\r\n\t\tds.fill = (/*showLines &&*/ fill > 0);\r\n\t\tds.backgroundColor = this.getLineColor( ds, opacity );\r\n\r\n\t\topacity = (showLines && lineWidth) ? 1 : 0;\r\n\t\tds.borderColor = this.getLineColor( ds, opacity );\r\n\t\tds.borderWidth = lineWidth;\r\n\r\n\t\t ds.steppedLine = this.getStaircase( ds );\r\n\r\n\t\tif( this.getDashes( ds ) ){\r\n\t\t\tconst len = this.getDashLength( ds );\r\n\t\t\tconst space = this.getDashSpace( ds );\r\n\t\t\tds.borderDash = [ len, space ]\r\n\t\t}\r\n\t\telse{\r\n\t\t\tds.borderDash = undefined;\r\n\t\t}\r\n\r\n\t\tds.order = this.getZIndex( ds );\r\n\t\tds.legend = this.getLegend( ds );\r\n\r\n\t\t// ds.yAxisID = ( 1 == this.getYAxis( ds ) ) ? 'A': 'B';\r\n\t}\r\n\r\n\tprivate setupPoints( ds: DataSet ) {\r\n\t\tconst showPoints = this.getShowPoints( ds );\r\n\r\n\t\tconst opacity = showPoints ? 1 : 0\r\n\t\tconst color = this.getLineColor( ds, opacity );\r\n\r\n\t\tds.pointBorderColor = `${color}`;\r\n\t\tds.pointBackgroundColor = `${color}`;\r\n\r\n\t\tds.pointRadius = showPoints ? this.getPointRadius( ds ) : 0;\r\n\t}\r\n\r\n\tprivate setupNullValue( ds: DataSet ) {\r\n\t\tswitch (parseInt( this.display.nullValue )) {\r\n\t\t\t// case CartesianChart.NullValue.Connected:\r\n\t\t\t// \tthis.chart.options.spanGaps = true;\r\n\t\t\t// \tds.data.forEach( p => p.y = p.isNull ? null : p.y );\r\n\t\t\t// \tbreak;\r\n\r\n\t\t\t// case CartesianChart.NullValue.Null:\r\n\t\t\t// \tthis.chart.options.spanGaps = false;\r\n\t\t\t// \tds.data.forEach( p => p.y = p.isNull ? null : p.y );\r\n\t\t\t// \tbreak;\r\n\r\n\t\t\t// case CartesianChart.NullValue.NullAsZero:\r\n\t\t\t// \tthis.chart.options.spanGaps = false;\r\n\t\t\t// \tds.data.forEach( p => p.y = p.isNull ? 0 : p.y );\r\n\t\t\t// \tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\tprivate setupOverrides(){\r\n\t\t// const needSecondaryYAxis = AxesManager.needSecondaryYAxis( this.chart.widget );\r\n\r\n\t\t// const actualSecondaryYAxisUsers = this\r\n\t\t// \t.datasets\r\n\t\t// \t.filter( x => x.yAxisID == 'B' )\r\n\t\t// \t.length\r\n \r\n\t\t// const yAxesCount = this.chart.options.scales.yAxes.length;\r\n\t\t\r\n\t\t// if( 2 == yAxesCount && !needSecondaryYAxis ){\r\n\t\t// \tthis.chart.options.scales.yAxes.splice( 1, 1 );\r\n\t\t// } else if( /*1 == yAxesCount && needSecondaryYAxis*/ actualSecondaryYAxisUsers != needSecondaryYAxis ){\r\n\t\t// \tthis.chart.destroy();\r\n\t\t// \tthis.chart.needRebuild.emit();\r\n\t\t// \tthis.chart = undefined;\r\n\t\t// \treturn;\r\n\t\t// }\r\n\r\n\t\t// this.datasets.forEach(x => this.setup(x));\r\n\t}\r\n\r\n\tgetShowLines(ds: DataSet): boolean{\r\n\t\tconst o = this.getOverride( ds );\r\n\r\n\t\treturn ( o && undefined != o.lines ) ? o.lines : this.display.showLines;\r\n\t}\r\n\t\r\n\tgetLineWidth(ds: DataSet): number{\r\n\t\tconst o = this.getOverride( ds );\r\n\r\n\t\treturn ( o && undefined != o.lineWidth ) ? o.lineWidth : this.display.lineWidth;\r\n\t}\r\n\r\n\tgetLineColor(ds: DataSet, opacity: number) : string{\r\n\t\tconst o = this.getOverride( ds );\r\n\r\n\t\tconst defaultColor = ColorHelper.getColorAsArgbFunc(ds, opacity)\r\n\r\n\t\tconst useOverride = ( o && undefined != o.color )\r\n\t\tlet overrideColor: string;\r\n\r\n\t\tif( useOverride ){\r\n\t\t\tvar color = ColorHelper.parse( o.color );\r\n\t\t\toverrideColor = `rgba(${color.r},${color.g},${color.b},${opacity})`\r\n\t\t}\r\n\r\n\t\treturn ( useOverride ) ? overrideColor : defaultColor;\r\n\t}\r\n\r\n\tgetFill( ds: DataSet ): number{\r\n\t\tconst o = this.getOverride( ds );\r\n\r\n\t\treturn ( o && undefined != o.lineFill ) ? o.lineFill : this.display.fill;\r\n\t}\r\n\r\n\tgetStaircase( ds: DataSet ): boolean{\r\n\t\tconst o = this.getOverride( ds );\r\n\r\n\t\treturn ( o && undefined != o.staircase ) ? o.staircase : this.display.staircase;\r\n\t}\r\n\r\n\tgetDashes( ds: DataSet ){\r\n\t\tconst o = this.getOverride( ds );\r\n\r\n\t\treturn ( o && undefined != o.dashes ) ? o.dashes : false;\r\n\t}\r\n\r\n\tgetDashLength( ds: DataSet ): number{\r\n\t\tconst o = this.getOverride( ds );\r\n\r\n\t\treturn ( o && undefined != o.dashLength ) ? o.dashLength : 1;\r\n\t}\r\n\r\n\tgetDashSpace( ds: DataSet ): number{\r\n\t\tconst o = this.getOverride( ds );\r\n\r\n\t\treturn ( o && undefined != o.dashSpace ) ? o.dashSpace : 1;\r\n\t}\r\n\r\n\tgetShowPoints( ds: DataSet ) : boolean {\r\n\t\tconst o = this.getOverride( ds );\r\n\r\n\t\treturn ( o && undefined != o.points ) ? o.points : this.display.showPoints;\r\n\t}\r\n\r\n\tgetPointRadius( ds: DataSet ) : number{\r\n\t\tconst o = this.getOverride( ds );\r\n\r\n\t\treturn ( o && undefined != o.pointRadius ) ? o.pointRadius : this.display.pointRadius;\r\n\t}\r\n\r\n\tgetLegend( ds: DataSet ) : boolean{\r\n\t\tconst o = this.getOverride( ds );\r\n\r\n\t\treturn ( o && undefined != o.legend ) ? o.legend : true;\r\n\t}\r\n\r\n\tgetZIndex( ds: DataSet ): number{\r\n\t\tconst o = this.getOverride( ds );\r\n\r\n\t\treturn ( o && undefined != o.zIndex ) ? o.zIndex : 0;\r\n\t}\r\n\r\n\tgetYAxis( ds: DataSet ){\r\n\t\tconst o = this.getOverride( ds );\r\n\r\n\t\treturn ( o && undefined != o.yAxis ) ? o.yAxis : 1;\r\n\t}\r\n\r\n\tgetOverride( ds: DataSet ){\r\n\t\treturn this\r\n\t\t\t.display\r\n\t\t\t.overrides\r\n\t\t\t.find( x => x.alias && new RegExp( x.alias ).test( ds.label )  )\r\n\t}\r\n\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","import { Injectable } from '@angular/core';\r\nimport { Moment, Series } from 'common';\r\nimport { DataSet } from '../../chart.m';\r\nimport { DisplayManager } from '../render/display-manager';\r\n\r\n@Injectable()\r\nexport class DataConverter {\r\n\r\n\tconstructor( private dispay: DisplayManager ){\r\n\t\t\r\n\t}\r\n\t\r\n\ttoDataSets(data: Series[]) : DataSet[] {\r\n\t\tif (!data || 0 === data.length) {\r\n\t\t\treturn [];\r\n\t\t}\r\n\r\n\t\tlet dataSets = [];\r\n\t\tlet totalIndex = 0;\r\n\r\n\t\tdata.forEach(serie => {\r\n\t\t\tconst columns = serie.columns.slice(1);\r\n\r\n\t\t\tconst arr = [...columns.map((el, index) =>\r\n\t\t\t\tthis.toDataSet(serie, index + 1, totalIndex++))]\r\n\t\t\t\t.filter(x => x);\r\n\r\n\t\t\tdataSets = [...dataSets, ...arr];\r\n\r\n\t\t\tdataSets.forEach( x => this.dispay.setup( x ) )\r\n\t\t});\r\n\r\n\t\t\r\n\t\t//this.chart.widget.error = undefined;\r\n\t\treturn dataSets;\r\n\t}\r\n\r\n\tprivate toDataSet(serie: Series, index: number, totalIndex:number) : DataSet {\r\n\t\tconst values = serie\r\n\t\t\t.values\r\n\t\t\t.map(x => {\r\n\t\t\t\tconst isNull = (null == x[index]);\r\n\r\n\t\t\t\treturn {\r\n\t\t\t\t\tx: Moment.valueOf( x[0] ),\r\n\t\t\t\t\ty: (isNull) ? x[index] : x[index],\r\n\t\t\t\t\tisNull: isNull\r\n\t\t\t\t}\r\n\t\t\t})\r\n\r\n\t\tconst filteredValues = values\r\n\t\t\t.map(p => p.y)\r\n\t\t\t.filter(p => null != p)\r\n\t\t\t.map(p => parseFloat(p));\r\n\r\n\t\tif (0 == filteredValues.length) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst avg = (filteredValues.reduce((a, b) => a + b) / filteredValues.length)\r\n\r\n\t\tconst allNulls = filteredValues.every(x => x == null);\r\n\t\tconst allZeros = filteredValues.every(x => x == 0);\r\n\r\n\t\tconst ds = {\r\n\t\t\tlabel: this.generateDataSetName(serie, index),\r\n\t\t\tdata: values,\r\n\t\t\tlineTension: 0,\r\n\t\t\tmin: Math.min(...filteredValues),\r\n\t\t\tmax: Math.max(...filteredValues),\r\n\t\t\tavg: avg,\r\n\t\t\tcurrent: filteredValues.slice(-1)[0],\r\n\t\t\tallNulls: allNulls,\r\n\t\t\tallZeros: allZeros,\r\n\t\t\tindex: totalIndex,\r\n\t\t\tpointRadius:0,\r\n\t\t\tborderColor: \"#ff0000\"\r\n\t\t\t//widget: this.chart.widget,\r\n\t\t}\r\n\r\n\t\t//ds.borderColor = new ColorHelper().getColorAsArgbFunc( ds, 1 );\r\n\t\t//console.log( ds.borderColor );\r\n\r\n\t\t//this.display.setup(ds);\r\n\r\n\t\treturn ds;\r\n\t}\r\n\r\n\tprivate generateDataSetName( serie: Series, index: number ): string{\r\n\t\tlet root = `${serie.name}.${serie.columns[ index ]}`;\r\n\r\n\t\tlet tags = '';\r\n\t\tvar keys = Object.keys(serie.tags);\r\n\t\tvar keyIndex = 0;\r\n\r\n\t\tfor(var key in serie.tags){\r\n\t\t\ttags += `${keyIndex > 0 ? ', ': ''}${key}: ${serie.tags[ key ]}` ;\r\n\t\t\tkeyIndex++\r\n\t\t}\r\n\r\n\t\t// serie.tags.forEach( ( t, index ) => tags = `${tags}${index > 0 ? ',': ''} tag` )\r\n\r\n\t\tif( tags ){\r\n\t\t\troot = `${root} {${tags}}`;\r\n\t\t}\r\n\r\n\t\treturn root;\r\n\t}\r\n}","import { EventEmitter, Inject, Injectable, Injector } from \"@angular/core\";\r\nimport { Subscription } from \"rxjs\";\r\nimport { finalize, mergeMap, tap } from 'rxjs/operators';\r\nimport { Panel, TimeRangeStore, PluginLoader, PluginStore,\r\n\tDataSourceService, Plugin, PluginActivator, MetricsBuilder } from 'common';\r\nimport { DataConverter } from './data-converter';\r\nimport { ChartData, PANEL_TOKEN } from '../../chart.m';\r\n\r\n@Injectable()\r\nexport class DataProvider {\r\n\trequest: string;\r\n\ttimeSubs: Subscription;\r\n\r\n\tdata$ = new EventEmitter<ChartData>();\r\n\r\n\tget metrics(){\r\n\t\treturn this.panel?.widget?.metrics;\r\n\t}\r\n\r\n\tconstructor (\r\n\t\tprivate pluginActivator: PluginActivator,\r\n\t\tprivate dsService: DataSourceService,\r\n\t\tprivate converter: DataConverter,\r\n\t\tprivate time: TimeRangeStore,\r\n\t\t@Inject( PANEL_TOKEN ) private panel: Panel ) {\r\n\r\n\t\t\tthis.timeSubs = this\r\n\t\t\t\t.time\r\n\t\t\t\t.range$\r\n\t\t\t\t.pipe(\r\n\t\t\t\t\ttap( _ => this.request = '' ),\r\n\t\t\t\t\tmergeMap( _ => this.pluginActivator.createDataSourceMetricsBuilder( panel ) ),\r\n\t\t\t\t\tmergeMap( mb=> mb.build( this.metrics, time.range )))\r\n\t\t\t\t.subscribe( x => this.pull( <string>x ));\r\n\t}\r\n\r\n\tdestroy(){\r\n\t\tthis.timeSubs?.unsubscribe();\r\n\t}\r\n\r\n\tprivate pull( request: string){\r\n\t\tif (this.request === request) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis.request = request;\r\n\r\n\t\tconsole.log( `pull: ${request}` );\r\n\t\t\r\n\t\tif (!request) {\r\n\t\t\tthis.onData([])\r\n\t\t} else {\r\n\t\t\tthis.panel.loading = true;\r\n\r\n\t\t\tthis\r\n\t\t\t\t.dsService\r\n\t\t\t\t.proxy( 6, request)\r\n\t\t\t\t.pipe(\r\n\t\t\t\t\tfinalize(() => this.panel.loading = false ))\r\n\t\t\t\t.subscribe(\r\n\t\t\t\t\tx => this.onData( x ),\r\n\t\t\t\t\te => this.onError( e.error ));\r\n\t\t}\r\n\t}\r\n\r\n\tprivate onData( x ){\r\n\t\tthis.data$.emit( {\r\n\t\t\tdatasets: this.converter.toDataSets( x )\r\n\t\t} );\r\n\t}\r\n\r\n\tprivate onError(err) {\r\n\t\t// \tthis.chart.data.datasets = []\r\n\t\t//  this.chart.update();\r\n\t\t//  this.chart.widget.error = err.details;\r\n\t}\r\n}","declare var Chart: any;\r\n\r\nexport class OptionsProvider{\r\n\t\r\n\r\n\tstatic getOptions(){\r\n\t\tChart.defaults.global.defaultFontColor = '#e3e3e3';\r\n\t\tChart.defaults.global.defaultFontFamily = 'Roboto';\r\n\t\tChart.defaults.global.defaultFontSize = 11;\r\n\r\n\t\tconst axisYa = {\r\n\t\t\tid: 'A',\r\n\t\t\tgridLines: {\r\n\t\t\t\tcolor: 'rgba( 255,255,255, 0.1)',\r\n\t\t\t\tzeroLineWidth: 3,\r\n\t\t\t},\r\n\t\t}\r\n\r\n\t\tconst axisYb = {\r\n\t\t\tid: 'B',\r\n\t\t\tposition: 'right'\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tmaintainAspectRatio: false,\r\n\t\t\tanimation: false,\r\n\r\n\t\t\tlegend: {\r\n\t\t\t\tdisplay: false\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\tspanGaps: true,\r\n\r\n\t\t\tscales: {\r\n\t\t\t\txAxes: [{\r\n\t\t\t\t\ttype: 'time',\r\n\t\t\t\t\tgridLines: {\r\n\t\t\t\t\t\tcolor: 'rgba( 255,255,255, 0.1)',\r\n\t\t\t\t\t},\r\n\t\t\t\t\tticks: {\r\n\t\t\t\t\t\tautoSkip: true,\r\n\t\t\t\t\t\tautoSkipPadding: 50,\r\n\t\t\t\t\t\tmaxRotation: 0,\r\n\t\t\t\t\t\tminRotation: 0,\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttime: {\r\n\t\t\t\t\t\tdisplayFormats: {\r\n\t\t\t\t\t\t\tsecond: 'HH:mm:ss',\r\n\t\t\t\t\t\t\tminute: 'HH:mm',\r\n\t\t\t\t\t\t\thour: 'HH:mm',\r\n\t\t\t\t\t\t\tday: 'M/D HH:mm',\r\n\t\t\t\t\t\t\tweek: 'M/D',\r\n\t\t\t\t\t\t\tmonth: 'M/D',\r\n\t\t\t\t\t\t\tyear: 'YYYY-M',\r\n\t\t\t\t\t\t },\r\n\r\n\t\t\t\t\t\t //stepSize: 30\r\n\t\t\t\t\t},\r\n\t\t\t\t\r\n\r\n\t\t\t\t\r\n\t\t\t\t}],\r\n\t\t\t\tyAxes: /*!AxesManager.needSecondaryYAxis(widget)*/true ? [axisYa] : [axisYa, axisYb]\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t};\r\n\t}\r\n}","import { Component } from '@angular/core';\nimport { TrackballDrawerPlugin } from './view/extensions/trackball-drawer';\nimport { DataProvider } from './view/data/data-provider';\nimport { OptionsProvider } from './view/options-provider';\nimport { DataConverter } from './view/data/data-converter';\nimport { ChartData } from './chart.m';\nimport { DisplayManager } from './view/render/display-manager';\n\n@Component({\n  selector: 'widget',\n  providers:[ \n    DataProvider,\n    DataConverter,\n\n    DisplayManager,\n  ],\n  template: `\n    <p-chart \n      type=\"line\"\n      [data]=\"data\"\n      [options]=\"options\"\n      [plugins]=\"plugins\"\n      height=\"100%\">\n    </p-chart>\n  `\n})\nexport class ChartComponent {\n  data: ChartData;\n  options: any;\n\n  plugins = [ new TrackballDrawerPlugin() ]\n\n  constructor( private dataProvider: DataProvider ) {\n\n    this\n      .dataProvider\n      .data$\n      .subscribe( d => this.data = d  )\n\n    this.options = OptionsProvider.getOptions();\n  }\n\n  ngOnDestroy(){\n    this.dataProvider.destroy();\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { EdCommonModule } from 'common';\nimport { ChartModule } from 'primeng';\nimport { EdUilibModule } from 'uilib';\nimport { ChartComponent } from './chart.c';\nimport { AxesEditorComponent } from './edit/axes/axes';\nimport { ChartEditorComponent } from './edit/editor';\nimport { GeneralEditorComponent } from './edit/general/general';\nimport { LegendEditorComponent } from './edit/legend/legend';\nimport { MetricsEditorComponent } from './edit/metrics/metrics';\n\n@NgModule({\n  declarations: [\n    ChartComponent,\n    ChartEditorComponent,\n\n    GeneralEditorComponent,\n    MetricsEditorComponent,\n    AxesEditorComponent,\n    LegendEditorComponent,\n\n  ],\n  imports: [\n    CommonModule,\n    FormsModule,\n    ReactiveFormsModule,\n    ChartModule,\n\n    EdCommonModule,\n    EdUilibModule,\n  ],\n  exports: [\n    ChartComponent,\n    ChartEditorComponent\n  ]\n})\nexport class ChartWidgetModule { }\n"]}