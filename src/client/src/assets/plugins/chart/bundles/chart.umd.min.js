!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/router"),require("@angular/common"),require("uilib"),require("@angular/forms"),require("common"),require("lodash"),require("rxjs/operators"),require("rxjs"),require("ngx-perfect-scrollbar"),require("primeng")):"function"==typeof define&&define.amd?define("chart",["exports","@angular/core","@angular/router","@angular/common","uilib","@angular/forms","common","lodash","rxjs/operators","rxjs","ngx-perfect-scrollbar","primeng"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).chart={},e.ng.core,e.ng.router,e.ng.common,e.uilib,e.ng.forms,e.common,e.lodash,e.rxjs.operators,e.rxjs,e["ngx-perfect-scrollbar"],e.primeng)}(this,(function(e,t,n,o,r,i,a,l,s,d,c,u){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */var p=function(e,t){return(p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function m(e,t){function n(){this.constructor=e}p(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function h(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,r,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(o=i.next()).done;)a.push(o.value)}catch(e){r={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return a}function f(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(h(arguments[t]));return e}var g=function(){function e(e){this.panel=e}return Object.defineProperty(e.prototype,"widget",{get:function(){return this.panel.widget},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"axes",{get:function(){var e;return null===(e=this.widget)||void 0===e?void 0:e.axes},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"legend",{get:function(){var e;return null===(e=this.widget)||void 0===e?void 0:e.legend},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"display",{get:function(){var e;return null===(e=this.widget)||void 0===e?void 0:e.display},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"thresholds",{get:function(){return this.display.thresholds},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"timeRegions",{get:function(){return this.display.timeRegions},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"overrides",{get:function(){return this.display.overrides},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"time",{get:function(){var e;return this.widget.time=null!==(e=this.widget.time)&&void 0!==e?e:new a.TimeRangeMod,this.widget.time},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alert",{get:function(){return this.widget.alert},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"chartControl",{get:function(){return this.widget.component.control.chart},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this.chartControl.options},enumerable:!1,configurable:!0}),e.prototype.refresh=function(){var e,t;null===(t=null===(e=this.widget.component)||void 0===e?void 0:e.control)||void 0===t||t.refresh()},e.prototype.update=function(){var e=this.widget.component;null==e||e.datasets.forEach((function(t){return e.display.setup(t)})),this.refresh()},e.prototype.pull=function(){var e;null===(e=this.widget.component)||void 0===e||e.store.dataProvider.update()},e.prototype.toggleAlertHandle=function(e){var t=this;setTimeout((function(){var n=t.widget.component;n&&(n.showAlertHandle=e)}))},e}();g.ɵfac=function(e){t.ɵɵinvalidFactory()},g.ɵdir=t.ɵɵdefineDirective({type:g});var v,b="xAxis",y="yAxisL",x="yAxisR";!function(e){e.Linear="linear",e.Log2="log2",e.Log10="log10",e.Log32="log32",e.Log1024="log1024"}(v||(v={}));var C,w,S,E,M,_,I=function(){this.operator=E.Gt,this.colorType=M.Critical,this.fill=!0,this.line=!0,this.axis=_.Left};!function(e){e.All="all",e.Single="single"}(C||(C={})),function(e){e.None="none",e.Increasing="increasing",e.Decreasing="decreasing"}(w||(w={})),function(e){e.Connected="connected",e.Null="null",e.NullAsZero="nullAsZero"}(S||(S={})),function(e){e.Gt="gt",e.Lt="lt"}(E||(E={})),function(e){e.Custom="custom",e.Critical="critical",e.Warning="warning",e.Ok="ok"}(M||(M={})),function(e){e.Left="left",e.Right="right"}(_||(_={}));var P,O,D=function(){this.colorType=P.Red,this.fill=!0,this.line=!0,this.fromDay=O.Any,this.toDay=O.Any};!function(e){e.Gray="gray",e.Red="red",e.Green="green",e.Blue="blue",e.Yellow="yellow",e.Custom="custom"}(P||(P={})),function(e){e.Any="any",e.Mon="mon",e.Tue="tue",e.Wed="wed",e.Thu="thu",e.Fri="fri",e.Sat="sat",e.Sun="sun"}(O||(O={}));var A,k,T=function(){},N=function(e,t){this.type=e,this.value=t};!function(e){e[e.Lines=0]="Lines",e[e.Points=1]="Points",e[e.PointRadius=2]="PointRadius",e[e.Stack=3]="Stack",e[e.LineFill=4]="LineFill",e[e.LineWidth=5]="LineWidth",e[e.Staircase=6]="Staircase",e[e.Dashes=7]="Dashes",e[e.DashLength=8]="DashLength",e[e.DashSpace=9]="DashSpace",e[e.Legend=10]="Legend",e[e.HideInTooltip=11]="HideInTooltip",e[e.Color=12]="Color",e[e.YAxis=13]="YAxis",e[e.ZIndex=14]="ZIndex"}(A||(A={})),function(e){e[e.None=0]="None",e[e.Common_Short=1]="Common_Short",e[e.Common_Percent=2]="Common_Percent",e[e.Common_Percent01=3]="Common_Percent01",e[e.Common_Humidity=4]="Common_Humidity",e[e.Common_Decibel=5]="Common_Decibel",e[e.Common_Hex0x=6]="Common_Hex0x",e[e.Common_Hex=7]="Common_Hex",e[e.Common_SciNotation=8]="Common_SciNotation",e[e.Common_LocaleString=9]="Common_LocaleString",e[e.Length_Millimetre=10]="Length_Millimetre",e[e.Length_Meter=11]="Length_Meter",e[e.Length_Feet=12]="Length_Feet",e[e.Length_Kilometer=13]="Length_Kilometer",e[e.Length_Mile=14]="Length_Mile",e[e.Area_SquareMeters=15]="Area_SquareMeters",e[e.Area_SquareFeet=16]="Area_SquareFeet",e[e.Area_SquareMiles=17]="Area_SquareMiles",e[e.Mass_Milligram=18]="Mass_Milligram",e[e.Mass_Gram=19]="Mass_Gram",e[e.Mass_Kilogram=20]="Mass_Kilogram",e[e.Mass_MetricTon=21]="Mass_MetricTon"}(k||(k={}));var F=function(e,t,n,o){this.type=e,this.label=t,this.unit=n,this.command=o},L=function(){function e(){}return e.getData=function(e){switch(+e){case k.Common_Short:return new F(k.Common_Short,"short","");case k.Common_Percent:return new F(k.Common_Percent,"percent (0-100)","%");case k.Common_Percent01:return new F(k.Common_Percent01,"percent (0.0-1.0)","%");case k.Common_Humidity:return new F(k.Common_Humidity,"humidity (%H)","%H");case k.Common_Decibel:return new F(k.Common_Decibel,"decibel","dB");case k.Common_Hex0x:return new F(k.Common_Hex0x,"hexadecimal (0x)","");case k.Common_Hex:return new F(k.Common_Hex,"hexadecimal","");case k.Common_SciNotation:return new F(k.Common_SciNotation,"scientific notation","");case k.Common_LocaleString:return new F(k.Common_LocaleString,"locale string","");case k.Length_Millimetre:return new F(k.Length_Millimetre,"millimetre (mm)","mm");case k.Length_Meter:return new F(k.Length_Meter,"meter (m)","m");case k.Length_Feet:return new F(k.Length_Feet,"feet (ft)","ft");case k.Length_Kilometer:return new F(k.Length_Kilometer,"kilometer (km)","km");case k.Length_Mile:return new F(k.Length_Mile,"mile (mi)","mi");case k.Area_SquareMeters:return new F(k.Area_SquareMeters,"Square Meters (m²)","m²");case k.Area_SquareFeet:return new F(k.Area_SquareFeet,"Square Feet (ft²)","ft²");case k.Area_SquareMiles:return new F(k.Area_SquareMiles,"Square Miles (mi²)","mi²");case k.Mass_Milligram:return new F(k.Mass_Milligram,"milligram (mg)","mg");case k.Mass_Gram:return new F(k.Mass_Gram,"gram (g)","g");case k.Mass_Kilogram:return new F(k.Mass_Kilogram,"kilogram (kg)","kg");case k.Mass_MetricTon:return new F(k.Mass_MetricTon,"metric ton (t)","t")}return new F(k.None,"none","")},e.getFormattedValue=function(t,n,o){var r=t.toFixed(o),i=e.getData(n);switch(i.type){case k.Common_Hex:return t.toString(16);case k.Common_Hex0x:return"0x"+t.toString(16);case k.Common_Percent01:return(100*t).toFixed(o)+" %";case k.Common_SciNotation:return t.toExponential(o);case k.Common_LocaleString:return t.toLocaleString();case k.Common_Short:return e.getShortFormattedValue(t,n,o);case k.None:return r;default:return r+" "+i.unit}},e.getShortFormattedValue=function(e,t,n){var o=1,r="";return e>=1e3&&e<1e6?(r="K",o=1e3):e>=1e6&&e<1e9?(r="Mil",o=1e6):e>=1e9&&e<1e12?(r="Bil",o=1e9):e>=1e12&&e<1e15?(r="Tri",o=1e12):e>=1e15&&e<1e18&&(r="Qdr",o=1e15),(e/o).toFixed(n)+" "+r},e}(),R=[{label:"none",items:[L.getData(k.None),L.getData(k.Common_Short),L.getData(k.Common_Percent),L.getData(k.Common_Percent01),L.getData(k.Common_Humidity),L.getData(k.Common_Decibel),L.getData(k.Common_Hex0x),L.getData(k.Common_Hex),L.getData(k.Common_SciNotation),L.getData(k.Common_LocaleString)]},{label:"length",items:[L.getData(k.Length_Millimetre),L.getData(k.Length_Meter),L.getData(k.Length_Feet),L.getData(k.Length_Kilometer),L.getData(k.Length_Mile)]},{label:"area",items:[L.getData(k.Area_SquareMeters),L.getData(k.Area_SquareFeet),L.getData(k.Area_SquareMiles)]},{label:"mass",items:[L.getData(k.Mass_Milligram),L.getData(k.Mass_Gram),L.getData(k.Mass_Kilogram),L.getData(k.Mass_MetricTon)]}],j=function(e){function t(t){var n=e.call(this,t)||this;return n.left=!0,n.units=l.cloneDeep(R),n.scales=r.DropDownComponent.wrapEnum(v),n}return m(t,e),Object.defineProperty(t.prototype,"axis",{get:function(){return this.left?this.axes.leftY:this.axes.rightY},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"chartAxis",{get:function(){return this.options.scales.yAxes[this.left?0:1]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"show",{get:function(){return this.axis.show},set:function(e){this.axis.show=this.chartAxis.display=e,this.refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"unit",{get:function(){return this.axis.unit},set:function(e){this.axis.unit=e,this.refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scale",{get:function(){return this.axis.scale},set:function(e){this.axis.scale=e,this.chartAxis.type=e==v.Linear?"linear":"logarithmic",this.refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"label",{get:function(){return this.axis.label},set:function(e){this.axis.label=e;var t=this.chartAxis.scaleLabel;e?(t.display=!0,t.labelString=e):(t.display=!1,t.labelString=void 0),this.refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"decimals",{get:function(){return this.axis.decimals},set:function(e){this.axis.decimals=e?+e:void 0,this.refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"min",{get:function(){return this.axis.min},set:function(e){this.axis.min=this.chartAxis.ticks.min=e?+e:void 0,this.refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"max",{get:function(){return this.axis.max},set:function(e){this.axis.max=this.chartAxis.ticks.max=e?+e:void 0,this.refresh()},enumerable:!1,configurable:!0}),t}(g);j.ɵfac=function(e){return new(e||j)(t.ɵɵdirectiveInject(a.PANEL_TOKEN))},j.ɵcmp=t.ɵɵdefineComponent({type:j,selectors:[["editor-axis-y"]],inputs:{left:"left"},features:[t.ɵɵInheritDefinitionFeature],decls:11,vars:11,consts:[[1,"section","gf-form-group"],[1,"section-heading"],["labelWidth","6","label","Show",3,"ngModel","ngModelChange"],["label","Unit","width","16","labelWidth","6",3,"valueProperty","ngModel","data","ngModelChange"],["label","Scale","labelWidth","6","width","16",3,"ngModel","data","ngModelChange"],[1,"gf-form-inline"],["type","number","labelWidth","6","label","Y-Min","width","5","placeholder","auto",3,"ngModel","ngModelChange"],["type","number","labelWidth","6","label","Y-Max","width","5","placeholder","auto",3,"ngModel","ngModelChange"],["type","text","labelWidth","6","label","Decimals","width","16","placeholder","auto",3,"ngModel","ngModelChange"],["labelWidth","6","label","Label","width","16",3,"ngModel","ngModelChange"]],template:function(e,n){1&e&&(t.ɵɵelementStart(0,"div",0),t.ɵɵelementStart(1,"h5",1),t.ɵɵtext(2),t.ɵɵelementEnd(),t.ɵɵelementStart(3,"ed-checkbox",2),t.ɵɵlistener("ngModelChange",(function(e){return n.show=e})),t.ɵɵelementEnd(),t.ɵɵelementStart(4,"ed-hierarchical-dropdown",3),t.ɵɵlistener("ngModelChange",(function(e){return n.unit=e})),t.ɵɵelementEnd(),t.ɵɵelementStart(5,"ed-dropdown",4),t.ɵɵlistener("ngModelChange",(function(e){return n.scale=e})),t.ɵɵelementEnd(),t.ɵɵelementStart(6,"div",5),t.ɵɵelementStart(7,"ed-textbox",6),t.ɵɵlistener("ngModelChange",(function(e){return n.min=e})),t.ɵɵelementEnd(),t.ɵɵelementStart(8,"ed-textbox",7),t.ɵɵlistener("ngModelChange",(function(e){return n.max=e})),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementStart(9,"ed-textbox",8),t.ɵɵlistener("ngModelChange",(function(e){return n.decimals=e})),t.ɵɵelementEnd(),t.ɵɵelementStart(10,"ed-textbox",9),t.ɵɵlistener("ngModelChange",(function(e){return n.label=e})),t.ɵɵelementEnd(),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(2),t.ɵɵtextInterpolate(n.left?"Left Y":"Right Y"),t.ɵɵadvance(1),t.ɵɵproperty("ngModel",n.show),t.ɵɵadvance(1),t.ɵɵproperty("valueProperty","type")("ngModel",n.unit)("data",n.units),t.ɵɵadvance(1),t.ɵɵproperty("ngModel",n.scale)("data",n.scales),t.ɵɵadvance(2),t.ɵɵproperty("ngModel",n.min),t.ɵɵadvance(1),t.ɵɵproperty("ngModel",n.max),t.ɵɵadvance(1),t.ɵɵproperty("ngModel",n.decimals),t.ɵɵadvance(1),t.ɵɵproperty("ngModel",n.label))},directives:[r.CheckBoxComponent,i.NgControlStatus,i.NgModel,r.HierarchicalDropDownComponent,r.DropDownComponent,r.TextBoxComponent],encapsulation:2});var V=function(e){function t(t){return e.call(this,t)||this}return m(t,e),Object.defineProperty(t.prototype,"axis",{get:function(){return this.axes.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"chartAxis",{get:function(){return this.options.scales.xAxes[0]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"show",{get:function(){return this.axis.show},set:function(e){this.axis.show=this.chartAxis.display=e,this.refresh()},enumerable:!1,configurable:!0}),t}(g);V.ɵfac=function(e){return new(e||V)(t.ɵɵdirectiveInject(a.PANEL_TOKEN))},V.ɵcmp=t.ɵɵdefineComponent({type:V,selectors:[["editor-axis-x"]],features:[t.ɵɵInheritDefinitionFeature],decls:4,vars:1,consts:[[1,"section","gf-form-group"],[1,"section-heading"],["labelWidth","6","label","Show",3,"ngModel","ngModelChange"]],template:function(e,n){1&e&&(t.ɵɵelementStart(0,"div",0),t.ɵɵelementStart(1,"h5",1),t.ɵɵtext(2,"X-Axis"),t.ɵɵelementEnd(),t.ɵɵelementStart(3,"ed-checkbox",2),t.ɵɵlistener("ngModelChange",(function(e){return n.show=e})),t.ɵɵelementEnd(),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(3),t.ɵɵproperty("ngModel",n.show))},directives:[r.CheckBoxComponent,i.NgControlStatus,i.NgModel],encapsulation:2});var H=function(e){function t(t){return e.call(this,t)||this}return m(t,e),t}(g);H.ɵfac=function(e){return new(e||H)(t.ɵɵdirectiveInject(a.PANEL_TOKEN))},H.ɵcmp=t.ɵɵdefineComponent({type:H,selectors:[["editor-axes"]],features:[t.ɵɵInheritDefinitionFeature],decls:3,vars:1,consts:[[3,"left"]],template:function(e,n){1&e&&(t.ɵɵelement(0,"editor-axis-y"),t.ɵɵelement(1,"editor-axis-y",0),t.ɵɵelement(2,"editor-axis-x")),2&e&&(t.ɵɵadvance(1),t.ɵɵproperty("left",!1))},directives:[j,V],encapsulation:2});var q=function(e){function t(t){return e.call(this,t)||this}return m(t,e),t}(g);q.ɵfac=function(e){return new(e||q)(t.ɵɵdirectiveInject(a.PANEL_TOKEN))},q.ɵcmp=t.ɵɵdefineComponent({type:q,selectors:[["editor-legend"]],features:[t.ɵɵInheritDefinitionFeature],decls:23,vars:11,consts:[[1,"section","gf-form-group"],[1,"section-heading"],["labelWidth","7","label","Show",3,"ngModel","ngModelChange"],["labelWidth","7","label","As Table",3,"ngModel","ngModelChange"],["labelWidth","7","label","To the right",3,"ngModel","ngModelChange"],[1,"gf-form-inline"],["labelWidth","4","label","Min",3,"ngModel","ngModelChange"],["labelWidth","6","label","Min",3,"ngModel","ngModelChange"],["labelWidth","4","label","Avg",3,"ngModel","ngModelChange"],["labelWidth","6","label","Current",3,"ngModel","ngModelChange"],["labelWidth","4","label","Total",3,"ngModel","ngModelChange"],["type","number","labelWidth","6","label","Decimals","width","4","placeholder","auto",3,"ngModel","ngModelChange"],["labelWidth","10","label","With only nulls",3,"ngModel","ngModelChange"],["labelWidth","10","label","With only zeros",3,"ngModel","ngModelChange"]],template:function(e,n){1&e&&(t.ɵɵelementStart(0,"div",0),t.ɵɵelementStart(1,"h5",1),t.ɵɵtext(2,"Options"),t.ɵɵelementEnd(),t.ɵɵelementStart(3,"ed-checkbox",2),t.ɵɵlistener("ngModelChange",(function(e){return n.legend.show=e})),t.ɵɵelementEnd(),t.ɵɵelementStart(4,"ed-checkbox",3),t.ɵɵlistener("ngModelChange",(function(e){return n.legend.table=e})),t.ɵɵelementEnd(),t.ɵɵelementStart(5,"ed-checkbox",4),t.ɵɵlistener("ngModelChange",(function(e){return n.legend.right=e})),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementStart(6,"div",0),t.ɵɵelementStart(7,"h5",1),t.ɵɵtext(8,"Values"),t.ɵɵelementEnd(),t.ɵɵelementStart(9,"div",5),t.ɵɵelementStart(10,"ed-checkbox",6),t.ɵɵlistener("ngModelChange",(function(e){return n.legend.min=e})),t.ɵɵelementEnd(),t.ɵɵelementStart(11,"ed-checkbox",7),t.ɵɵlistener("ngModelChange",(function(e){return n.legend.max=e})),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementStart(12,"div",5),t.ɵɵelementStart(13,"ed-checkbox",8),t.ɵɵlistener("ngModelChange",(function(e){return n.legend.avg=e})),t.ɵɵelementEnd(),t.ɵɵelementStart(14,"ed-checkbox",9),t.ɵɵlistener("ngModelChange",(function(e){return n.legend.current=e})),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementStart(15,"div",5),t.ɵɵelementStart(16,"ed-checkbox",10),t.ɵɵlistener("ngModelChange",(function(e){return n.legend.total=e})),t.ɵɵelementEnd(),t.ɵɵelementStart(17,"ed-textbox",11),t.ɵɵlistener("ngModelChange",(function(e){return n.legend.decimals=e})),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementStart(18,"div",0),t.ɵɵelementStart(19,"h5",1),t.ɵɵtext(20,"Hide series"),t.ɵɵelementEnd(),t.ɵɵelementStart(21,"ed-checkbox",12),t.ɵɵlistener("ngModelChange",(function(e){return n.legend.hideOnlyNulls=e})),t.ɵɵelementEnd(),t.ɵɵelementStart(22,"ed-checkbox",13),t.ɵɵlistener("ngModelChange",(function(e){return n.legend.hideOnlyZeroes=e})),t.ɵɵelementEnd(),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(3),t.ɵɵproperty("ngModel",n.legend.show),t.ɵɵadvance(1),t.ɵɵproperty("ngModel",n.legend.table),t.ɵɵadvance(1),t.ɵɵproperty("ngModel",n.legend.right),t.ɵɵadvance(5),t.ɵɵproperty("ngModel",n.legend.min),t.ɵɵadvance(1),t.ɵɵproperty("ngModel",n.legend.max),t.ɵɵadvance(2),t.ɵɵproperty("ngModel",n.legend.avg),t.ɵɵadvance(1),t.ɵɵproperty("ngModel",n.legend.current),t.ɵɵadvance(2),t.ɵɵproperty("ngModel",n.legend.total),t.ɵɵadvance(1),t.ɵɵproperty("ngModel",n.legend.decimals),t.ɵɵadvance(4),t.ɵɵproperty("ngModel",n.legend.hideOnlyNulls),t.ɵɵadvance(1),t.ɵɵproperty("ngModel",n.legend.hideOnlyZeroes))},directives:[r.CheckBoxComponent,i.NgControlStatus,i.NgModel,r.TextBoxComponent],encapsulation:2});var W=function(e){function t(t){var n=e.call(this,t)||this;return n.availableWidth=r.DropDownComponent.wrapArray([0,1,2,3,4,5,6,7,8,9,10]),n.availableTooltipModes=r.DropDownComponent.wrapEnum(C),n.availableTooltipSortOrders=r.DropDownComponent.wrapEnum(w),n.availableNullValueOptions=r.DropDownComponent.wrapEnum(S),n}return m(t,e),Object.defineProperty(t.prototype,"stack",{get:function(){return this.display.stack},set:function(e){this.display.stack=e,this.options.scales.yAxes[0].stacked=e,this.refresh()},enumerable:!1,configurable:!0}),t}(g);function B(e,n){if(1&e&&(t.ɵɵelementStart(0,"span",21),t.ɵɵtext(1),t.ɵɵelementEnd()),2&e){var o=t.ɵɵnextContext().$implicit;t.ɵɵadvance(1),t.ɵɵtextInterpolate(o.value)}}function Y(e,n){if(1&e&&t.ɵɵelement(0,"color-circle",22),2&e){var o=t.ɵɵnextContext().$implicit;t.ɵɵproperty("value",o.value)("canBeActive",!1)}}function $(e,n){if(1&e){var o=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"div",9),t.ɵɵelementStart(1,"div",16),t.ɵɵelementStart(2,"span",17),t.ɵɵlistener("click",(function(){t.ɵɵrestoreView(o);var e=n.$implicit;return t.ɵɵnextContext().onRemoveItem(e)})),t.ɵɵelement(3,"i",18),t.ɵɵelementEnd(),t.ɵɵtext(4),t.ɵɵtemplate(5,B,2,1,"span",19),t.ɵɵtemplate(6,Y,1,2,"ng-template",null,20,t.ɵɵtemplateRefExtractor),t.ɵɵelementEnd(),t.ɵɵelementEnd()}if(2&e){var r=n.$implicit,i=t.ɵɵreference(7),a=t.ɵɵnextContext();t.ɵɵadvance(4),t.ɵɵtextInterpolate1(" ",a.getItemHeader(r),": "),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",12!=r.type)("ngIfElse",i)}}W.ɵfac=function(e){return new(e||W)(t.ɵɵdirectiveInject(a.PANEL_TOKEN))},W.ɵcmp=t.ɵɵdefineComponent({type:W,selectors:[["editor-draw-options"]],features:[t.ɵɵInheritDefinitionFeature],decls:23,vars:19,consts:[[1,"section","gf-form-group"],[1,"section-heading"],["labelWidth","5","label","Bars"],["labelWidth","5","label","Lines",3,"ngModel","ngModelChange","checked"],["labelWidth","5","label","Points",3,"ngModel","ngModelChange","checked"],["label","Fill","labelWidth","8","width","5",3,"ngModel","data","ngModelChange","selectionChange"],["label","Line Width","labelWidth","8","width","5",3,"ngModel","data","disabled","ngModelChange","selectionChange"],["label","Staircase","labelWidth","8","width","5",3,"ngModel","ngModelChange","checked"],["label","Point Radius","labelWidth","8","width","5",3,"ngModel","data","disabled","ngModelChange","selectionChange"],["label","Mode","labelWidth","9","width","9",3,"data","ngModel","ngModelChange"],["label","Sort Order","labelWidth","9","width","9",3,"data","ngModel","ngModelChange"],["labelWidth","7","label","Stack",3,"ngModel","ngModelChange"],["label","Null Value",3,"ngModel","data","labelWidth","ngModelChange"]],template:function(e,n){1&e&&(t.ɵɵelementStart(0,"div",0),t.ɵɵelementStart(1,"h5",1),t.ɵɵtext(2,"Draw Modes"),t.ɵɵelementEnd(),t.ɵɵelement(3,"ed-checkbox",2),t.ɵɵelementStart(4,"ed-checkbox",3),t.ɵɵlistener("ngModelChange",(function(e){return n.display.showLines=e}))("checked",(function(){return n.update()})),t.ɵɵelementEnd(),t.ɵɵelementStart(5,"ed-checkbox",4),t.ɵɵlistener("ngModelChange",(function(e){return n.display.showPoints=e}))("checked",(function(){return n.update()})),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementStart(6,"div",0),t.ɵɵelementStart(7,"h5",1),t.ɵɵtext(8,"Mode Options"),t.ɵɵelementEnd(),t.ɵɵelementStart(9,"ed-dropdown",5),t.ɵɵlistener("ngModelChange",(function(e){return n.display.fill=e}))("selectionChange",(function(){return n.update()})),t.ɵɵelementEnd(),t.ɵɵelementStart(10,"ed-dropdown",6),t.ɵɵlistener("ngModelChange",(function(e){return n.display.lineWidth=e}))("selectionChange",(function(){return n.update()})),t.ɵɵelementEnd(),t.ɵɵelementStart(11,"ed-checkbox",7),t.ɵɵlistener("ngModelChange",(function(e){return n.display.staircase=e}))("checked",(function(){return n.update()})),t.ɵɵelementEnd(),t.ɵɵelementStart(12,"ed-dropdown",8),t.ɵɵlistener("ngModelChange",(function(e){return n.display.pointRadius=e}))("selectionChange",(function(){return n.update()})),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementStart(13,"div",0),t.ɵɵelementStart(14,"h5",1),t.ɵɵtext(15,"Hover tooltip"),t.ɵɵelementEnd(),t.ɵɵelementStart(16,"ed-dropdown",9),t.ɵɵlistener("ngModelChange",(function(e){return n.display.tooltipMode=e})),t.ɵɵelementEnd(),t.ɵɵelementStart(17,"ed-dropdown",10),t.ɵɵlistener("ngModelChange",(function(e){return n.display.tooltipSortOrder=e})),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementStart(18,"div",0),t.ɵɵelementStart(19,"h5",1),t.ɵɵtext(20,"Stacking & Null value"),t.ɵɵelementEnd(),t.ɵɵelementStart(21,"ed-checkbox",11),t.ɵɵlistener("ngModelChange",(function(e){return n.stack=e})),t.ɵɵelementEnd(),t.ɵɵelementStart(22,"ed-dropdown",12),t.ɵɵlistener("ngModelChange",(function(e){return n.display.nullValue=e})),t.ɵɵelementEnd(),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(4),t.ɵɵproperty("ngModel",n.display.showLines),t.ɵɵadvance(1),t.ɵɵproperty("ngModel",n.display.showPoints),t.ɵɵadvance(4),t.ɵɵproperty("ngModel",n.display.fill)("data",n.availableWidth),t.ɵɵadvance(1),t.ɵɵproperty("ngModel",n.display.lineWidth)("data",n.availableWidth)("disabled",!n.display.showLines),t.ɵɵadvance(1),t.ɵɵproperty("ngModel",n.display.staircase),t.ɵɵadvance(1),t.ɵɵproperty("ngModel",n.display.pointRadius)("data",n.availableWidth)("disabled",!n.display.showPoints),t.ɵɵadvance(4),t.ɵɵproperty("data",n.availableTooltipModes)("ngModel",n.display.tooltipMode),t.ɵɵadvance(1),t.ɵɵproperty("data",n.availableTooltipSortOrders)("ngModel",n.display.tooltipSortOrder),t.ɵɵadvance(4),t.ɵɵproperty("ngModel",n.stack),t.ɵɵadvance(1),t.ɵɵproperty("ngModel",n.display.nullValue)("data",n.availableNullValueOptions)("labelWidth",7))},directives:[r.CheckBoxComponent,i.NgControlStatus,i.NgModel,r.DropDownComponent],encapsulation:2});var z=function(e){function n(n){var o=e.call(this,n)||this;return o.removed=new t.EventEmitter,o.cmItems=[],o.items=new Array,o.showColorPicker=!1,o}return m(n,e),n.prototype.ngOnInit=function(){var e=this;this.cmItems=[this.createBoolItem("Lines",A.Lines),this.createNumberItem("Line fill",A.LineFill),this.createNumberItem("Line width",A.LineWidth),this.createBoolItem("Staircase",A.Staircase),this.createBoolItem("Dashes",A.Dashes),this.createNumberItem("Dash length",A.DashLength),this.createNumberItem("Dash space",A.DashSpace),this.createBoolItem("Points",A.Points),this.createNumberItem("Point radius",A.PointRadius,0,5),this.createBoolItem("Stack",A.Stack),this.createColorItem("Color",A.Color),this.createNumberItem("Y-axis",A.YAxis,1,2),this.createNumberItem("Z-index",A.ZIndex,-3,3),this.createBoolItem("Legend",A.Legend),this.createBoolItem("Hide in tooltip",A.HideInTooltip)],r.ContextMenuComponent.wrapItems(this.cmItems,(function(t){return e.onOptionSelected(t.item)})),this.rebuildItems()},n.prototype.rebuildItems=function(){var e=new Array;for(var t in this.override)if("alias"!=t){var n=this.getOverrideType(t);e.push(new N(n,this.override[t]))}this.items=e,this.update()},n.prototype.createBoolItem=function(e,t){return{label:e,items:[{label:"true",value:!0,type:t},{label:"false",value:!1,type:t}]}},n.prototype.createNumberItem=function(e,t,n,o){void 0===n&&(n=0),void 0===o&&(o=10);for(var r={label:e,items:[]},i=n;i<=o;++i)r.items.push({label:i,value:i,type:t});return r},n.prototype.createColorItem=function(e,t){return{label:e,type:t,items:[{label:"change",type:t}]}},n.prototype.onOptionSelected=function(e){null!=e.type&&(A.Color==e.type?(this.showColorPicker=!0,event.stopPropagation()):(this.override[this.getPropertyName(e)]=e.value,this.rebuildItems()))},n.prototype.onRemoveItem=function(e){delete this.override[this.getPropertyName(e)],this.rebuildItems()},n.prototype.getItemHeader=function(e){return A[e.type].replace(/([a-z0-9])([A-Z])/g,"$1 $2").toLowerCase()},n.prototype.getPropertyName=function(e){return A[e.type].replace(/^\w/,(function(e){return e.toLowerCase()}))},n.prototype.getOverrideType=function(e){return A[e.replace(/^\w/,(function(e){return e.toUpperCase()}))]},n.prototype.onColorSelected=function(e){var t=this.createColorItem("Color",A.Color);this.override[this.getPropertyName(t)]=e,this.rebuildItems()},n}(g);function G(e,n){if(1&e){var o=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"editor-series-override",5),t.ɵɵlistener("removed",(function(e){return t.ɵɵrestoreView(o),t.ɵɵnextContext().onRemove(e)})),t.ɵɵelementEnd()}if(2&e){var r=n.$implicit,i=n.index;t.ɵɵproperty("override",r)("index",i)}}z.ɵfac=function(e){return new(e||z)(t.ɵɵdirectiveInject(a.PANEL_TOKEN))},z.ɵcmp=t.ɵɵdefineComponent({type:z,selectors:[["editor-series-override"]],inputs:{override:"override",index:"index"},outputs:{removed:"removed"},features:[t.ɵɵInheritDefinitionFeature],decls:16,vars:5,consts:[[1,"ed-form-inline"],["label","alias or regex","width","15",3,"ngModel","ngModelChange"],["class","gf-form",4,"ngFor","ngForOf"],[1,"gf-form",3,"click"],["menuTarget",""],[1,"gf-form-label","pointer"],[1,"fa","fa-plus"],[1,"gf-form","gf-form--grow"],[1,"gf-form-label","gf-form-label--grow"],[1,"gf-form"],[1,"gf-form-label","pointer",3,"click"],[1,"fa","fa-trash"],[3,"visible","anchor","visibleChange"],[3,"selected"],[3,"items"],["cm",""],[1,"gf-form-label"],[3,"click"],[1,"fa","fa-times","mr-2","pointer"],["class","ml-1",4,"ngIf","ngIfElse"],["color",""],[1,"ml-1"],[1,"ml-1",3,"value","canBeActive"]],template:function(e,n){if(1&e){var o=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"div",0),t.ɵɵelementStart(1,"ed-textbox",1),t.ɵɵlistener("ngModelChange",(function(e){return n.override.alias=e})),t.ɵɵelementEnd(),t.ɵɵtemplate(2,$,8,3,"div",2),t.ɵɵelementStart(3,"div",3,4),t.ɵɵlistener("click",(function(e){return t.ɵɵrestoreView(o),t.ɵɵreference(15).show(e)})),t.ɵɵelementStart(5,"label",5),t.ɵɵelement(6,"i",6),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementStart(7,"div",7),t.ɵɵelement(8,"div",8),t.ɵɵelementEnd(),t.ɵɵelementStart(9,"div",9),t.ɵɵelementStart(10,"label",10),t.ɵɵlistener("click",(function(){return n.removed.emit(n.override)})),t.ɵɵelement(11,"i",11),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementStart(12,"ed-popup",12),t.ɵɵlistener("visibleChange",(function(e){return n.showColorPicker=e})),t.ɵɵelementStart(13,"ed-palette-editor",13),t.ɵɵlistener("selected",(function(e){return n.onColorSelected(e)})),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelement(14,"ed-context-menu",14,15)}if(2&e){var r=t.ɵɵreference(4);t.ɵɵadvance(1),t.ɵɵproperty("ngModel",n.override.alias),t.ɵɵadvance(1),t.ɵɵproperty("ngForOf",n.items),t.ɵɵadvance(10),t.ɵɵproperty("visible",n.showColorPicker)("anchor",r),t.ɵɵadvance(2),t.ɵɵproperty("items",n.cmItems)}},directives:[r.TextBoxComponent,i.NgControlStatus,i.NgModel,o.NgForOf,r.PopupComponent,r.PaletteEditorComponent,r.ContextMenuComponent,o.NgIf,r.ColorCircleComponent],encapsulation:2});var K=function(e){function t(t){return e.call(this,t)||this}return m(t,e),t.prototype.onAdd=function(){this.overrides.push(new T)},t.prototype.onRemove=function(e){var t=this.overrides.indexOf(e);-1!==t&&this.overrides.splice(t,1),this.update()},t}(g);function X(e,n){if(1&e){var o=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"ed-color-picker",12),t.ɵɵlistener("ngModelChange",(function(e){return t.ɵɵrestoreView(o),t.ɵɵnextContext().threshold.fillColor=e}))("selected",(function(){return t.ɵɵrestoreView(o),t.ɵɵnextContext().refresh()})),t.ɵɵelementEnd()}if(2&e){var r=t.ɵɵnextContext();t.ɵɵproperty("ngModel",r.threshold.fillColor)}}function U(e,n){if(1&e){var o=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"ed-color-picker",13),t.ɵɵlistener("ngModelChange",(function(e){return t.ɵɵrestoreView(o),t.ɵɵnextContext().threshold.lineColor=e}))("selected",(function(){return t.ɵɵrestoreView(o),t.ɵɵnextContext().refresh()})),t.ɵɵelementEnd()}if(2&e){var r=t.ɵɵnextContext();t.ɵɵproperty("ngModel",r.threshold.lineColor)}}K.ɵfac=function(e){return new(e||K)(t.ɵɵdirectiveInject(a.PANEL_TOKEN))},K.ɵcmp=t.ɵɵdefineComponent({type:K,selectors:[["editor-series-overrides"]],features:[t.ɵɵInheritDefinitionFeature],decls:9,vars:1,consts:[[1,"gf-form-group"],[3,"override","index","removed",4,"ngFor","ngForOf"],[1,"gf-form-button-row"],[1,"btn","btn-inverse",3,"click"],[1,"fa","fa-plus"],[3,"override","index","removed"]],template:function(e,n){1&e&&(t.ɵɵelementStart(0,"div",0),t.ɵɵelementStart(1,"h5"),t.ɵɵtext(2,"Series specific overrides "),t.ɵɵelementEnd(),t.ɵɵelementStart(3,"div"),t.ɵɵtemplate(4,G,1,2,"editor-series-override",1),t.ɵɵelementStart(5,"div",2),t.ɵɵelementStart(6,"button",3),t.ɵɵlistener("click",(function(){return n.onAdd()})),t.ɵɵelement(7,"i",4),t.ɵɵtext(8," Add Override "),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(4),t.ɵɵproperty("ngForOf",n.overrides))},directives:[o.NgForOf,z],encapsulation:2});var Q=function(e){function n(n){var o=e.call(this,n)||this;return o.removed=new t.EventEmitter,o.availableOperatorValues=r.DropDownComponent.wrapEnum(E),o.availableColorValues=r.DropDownComponent.wrapEnum(M),o.availableAxisValues=r.DropDownComponent.wrapEnum(_),o}return m(n,e),Object.defineProperty(n.prototype,"value",{get:function(){return this.threshold.value},set:function(e){var t=+e;this.threshold.value=isNaN(t)||!e?void 0:t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"showCustomColors",{get:function(){return M.Custom==this.threshold.colorType},enumerable:!1,configurable:!0}),n}(g);function Z(e,n){if(1&e){var o=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"editor-threshold",6),t.ɵɵlistener("removed",(function(e){return t.ɵɵrestoreView(o),t.ɵɵnextContext().onRemove(e)})),t.ɵɵelementEnd()}if(2&e){var r=n.$implicit,i=n.index;t.ɵɵproperty("threshold",r)("index",i)}}Q.ɵfac=function(e){return new(e||Q)(t.ɵɵdirectiveInject(a.PANEL_TOKEN))},Q.ɵcmp=t.ɵɵdefineComponent({type:Q,selectors:[["editor-threshold"]],inputs:{threshold:"threshold",index:"index"},outputs:{removed:"removed"},features:[t.ɵɵInheritDefinitionFeature],decls:13,vars:12,consts:[[1,"ed-form-inline"],["width","6",3,"data","ngModel","label","ngModelChange","selectionChange"],["placeholder","value","type","number","width","8",3,"ngModel","ngModelChange","changed"],["label","Color",3,"data","ngModel","ngModelChange","selectionChange"],["label","Fill",3,"ngModel","ngModelChange","checked"],["label","Fill color",3,"ngModel","ngModelChange","selected",4,"ngIf"],["label","Line",3,"ngModel","ngModelChange","checked"],["label","Line color",3,"ngModel","ngModelChange","selected",4,"ngIf"],["label","Y-Axis",3,"data","ngModel","ngModelChange","selectionChange"],[1,"gf-form"],[1,"gf-form-label","pointer",3,"click"],[1,"fa","fa-trash"],["label","Fill color",3,"ngModel","ngModelChange","selected"],["label","Line color",3,"ngModel","ngModelChange","selected"]],template:function(e,n){1&e&&(t.ɵɵelementStart(0,"div",0),t.ɵɵelementStart(1,"ed-dropdown",1),t.ɵɵlistener("ngModelChange",(function(e){return n.threshold.operator=e}))("selectionChange",(function(){return n.refresh()})),t.ɵɵelementEnd(),t.ɵɵelementStart(2,"ed-textbox",2),t.ɵɵlistener("ngModelChange",(function(e){return n.value=e}))("changed",(function(){return n.refresh()})),t.ɵɵelementEnd(),t.ɵɵelementStart(3,"ed-dropdown",3),t.ɵɵlistener("ngModelChange",(function(e){return n.threshold.colorType=e}))("selectionChange",(function(){return n.refresh()})),t.ɵɵelementEnd(),t.ɵɵelementStart(4,"ed-checkbox",4),t.ɵɵlistener("ngModelChange",(function(e){return n.threshold.fill=e}))("checked",(function(){return n.refresh()})),t.ɵɵelementEnd(),t.ɵɵtemplate(5,X,1,1,"ed-color-picker",5),t.ɵɵelementStart(6,"ed-checkbox",6),t.ɵɵlistener("ngModelChange",(function(e){return n.threshold.line=e}))("checked",(function(){return n.refresh()})),t.ɵɵelementEnd(),t.ɵɵtemplate(7,U,1,1,"ed-color-picker",7),t.ɵɵelementStart(8,"ed-dropdown",8),t.ɵɵlistener("ngModelChange",(function(e){return n.threshold.axis=e}))("selectionChange",(function(){return n.refresh()})),t.ɵɵelementEnd(),t.ɵɵelementStart(9,"div",9),t.ɵɵelementStart(10,"label",10),t.ɵɵlistener("click",(function(){return n.removed.emit(n.threshold)})),t.ɵɵelementStart(11,"a"),t.ɵɵelement(12,"i",11),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(1),t.ɵɵpropertyInterpolate1("label","T",n.index+1,""),t.ɵɵproperty("data",n.availableOperatorValues)("ngModel",n.threshold.operator),t.ɵɵadvance(1),t.ɵɵproperty("ngModel",n.value),t.ɵɵadvance(1),t.ɵɵproperty("data",n.availableColorValues)("ngModel",n.threshold.colorType),t.ɵɵadvance(1),t.ɵɵproperty("ngModel",n.threshold.fill),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",n.showCustomColors),t.ɵɵadvance(1),t.ɵɵproperty("ngModel",n.threshold.line),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",n.showCustomColors),t.ɵɵadvance(1),t.ɵɵproperty("data",n.availableAxisValues)("ngModel",n.threshold.axis))},directives:[r.DropDownComponent,i.NgControlStatus,i.NgModel,r.TextBoxComponent,r.CheckBoxComponent,o.NgIf,r.ColorPickerComponent],encapsulation:2});var J=function(e){function t(t){return e.call(this,t)||this}return m(t,e),t.prototype.onAdd=function(){this.thresholds.push(new I)},t.prototype.onRemove=function(e){var t=this.thresholds.indexOf(e);-1!==t&&this.thresholds.splice(t,1),this.refresh()},t}(g);function ee(e,n){if(1&e){var o=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"ed-color-picker",13),t.ɵɵlistener("ngModelChange",(function(e){return t.ɵɵrestoreView(o),t.ɵɵnextContext().timeRegion.fillColor=e}))("selected",(function(){return t.ɵɵrestoreView(o),t.ɵɵnextContext().refresh()})),t.ɵɵelementEnd()}if(2&e){var r=t.ɵɵnextContext();t.ɵɵproperty("ngModel",r.timeRegion.fillColor)}}function te(e,n){if(1&e){var o=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"ed-color-picker",14),t.ɵɵlistener("ngModelChange",(function(e){return t.ɵɵrestoreView(o),t.ɵɵnextContext().timeRegion.lineColor=e}))("selected",(function(){return t.ɵɵrestoreView(o),t.ɵɵnextContext().refresh()})),t.ɵɵelementEnd()}if(2&e){var r=t.ɵɵnextContext();t.ɵɵproperty("ngModel",r.timeRegion.lineColor)}}J.ɵfac=function(e){return new(e||J)(t.ɵɵdirectiveInject(a.PANEL_TOKEN))},J.ɵcmp=t.ɵɵdefineComponent({type:J,selectors:[["editor-thresholds"]],features:[t.ɵɵInheritDefinitionFeature],decls:9,vars:1,consts:[[1,"gf-form-group"],["ng-class","{'thresholds-form-disabled': ctrl.disabled}"],[3,"threshold","index","removed",4,"ngFor","ngForOf"],[1,"gf-form-button-row"],["ng-disabled","ctrl.disabled",1,"btn","btn-inverse",3,"click"],[1,"fa","fa-plus"],[3,"threshold","index","removed"]],template:function(e,n){1&e&&(t.ɵɵelementStart(0,"div",0),t.ɵɵelementStart(1,"h5"),t.ɵɵtext(2,"Thresholds"),t.ɵɵelementEnd(),t.ɵɵelementStart(3,"div",1),t.ɵɵtemplate(4,Z,1,2,"editor-threshold",2),t.ɵɵelementStart(5,"div",3),t.ɵɵelementStart(6,"button",4),t.ɵɵlistener("click",(function(){return n.onAdd()})),t.ɵɵelement(7,"i",5),t.ɵɵtext(8," Add Threshold "),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(4),t.ɵɵproperty("ngForOf",n.thresholds))},directives:[o.NgForOf,Q],encapsulation:2});var ne=function(e){function n(n){var o=e.call(this,n)||this;return o.removed=new t.EventEmitter,o.availableColors=r.DropDownComponent.wrapEnum(P),o.availableDays=r.DropDownComponent.wrapEnum(O),o}return m(n,e),Object.defineProperty(n.prototype,"showCustomColors",{get:function(){return P.Custom==this.timeRegion.colorType},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"showCustomFillColor",{get:function(){return this.showCustomColors&&this.timeRegion.fill},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"showCustomLineColor",{get:function(){return this.showCustomColors&&this.timeRegion.line},enumerable:!1,configurable:!0}),n.prototype.ngOnInit=function(){this.fromTime=this.timeRegion.fromTime,this.toTime=this.timeRegion.toTime},n}(g);function oe(e,n){if(1&e){var o=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"editor-time-region",6),t.ɵɵlistener("removed",(function(e){return t.ɵɵrestoreView(o),t.ɵɵnextContext().onRemove(e)})),t.ɵɵelementEnd()}if(2&e){var r=n.$implicit,i=n.index;t.ɵɵproperty("timeRegion",r)("index",i)}}ne.ɵfac=function(e){return new(e||ne)(t.ɵɵdirectiveInject(a.PANEL_TOKEN))},ne.ɵcmp=t.ɵɵdefineComponent({type:ne,selectors:[["editor-time-region"]],inputs:{timeRegion:"timeRegion",index:"index"},outputs:{removed:"removed"},features:[t.ɵɵInheritDefinitionFeature],decls:17,vars:13,consts:[[1,"ed-form-inline"],[1,"gf-form"],[1,"gf-form-label"],["label","From",3,"data","ngModel","ngModelChange","selectionChange"],["placeholder","hh:mm","width","8",3,"ngModel","ngModelChange","focusout"],["label","To",3,"data","ngModel","ngModelChange","selectionChange"],["label","Color",3,"data","ngModel","ngModelChange","selectionChange"],["label","Fill",3,"ngModel","ngModelChange","checked"],["label","Fill color",3,"ngModel","ngModelChange","selected",4,"ngIf"],["label","Line",3,"ngModel","ngModelChange","checked"],["label","Line color",3,"ngModel","ngModelChange","selected",4,"ngIf"],[1,"gf-form-label","pointer",3,"click"],[1,"fa","fa-trash"],["label","Fill color",3,"ngModel","ngModelChange","selected"],["label","Line color",3,"ngModel","ngModelChange","selected"]],template:function(e,n){1&e&&(t.ɵɵelementStart(0,"div",0),t.ɵɵelementStart(1,"div",1),t.ɵɵelementStart(2,"label",2),t.ɵɵtext(3),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementStart(4,"ed-dropdown",3),t.ɵɵlistener("ngModelChange",(function(e){return n.timeRegion.fromDay=e}))("selectionChange",(function(){return n.refresh()})),t.ɵɵelementEnd(),t.ɵɵelementStart(5,"ed-textbox",4),t.ɵɵlistener("ngModelChange",(function(e){return n.fromTime=e}))("focusout",(function(){return n.timeRegion.fromTime=n.fromTime,n.refresh()})),t.ɵɵelementEnd(),t.ɵɵelementStart(6,"ed-dropdown",5),t.ɵɵlistener("ngModelChange",(function(e){return n.timeRegion.toDay=e}))("selectionChange",(function(){return n.refresh()})),t.ɵɵelementEnd(),t.ɵɵelementStart(7,"ed-textbox",4),t.ɵɵlistener("ngModelChange",(function(e){return n.toTime=e}))("focusout",(function(){return n.timeRegion.toTime=n.toTime,n.refresh()})),t.ɵɵelementEnd(),t.ɵɵelementStart(8,"ed-dropdown",6),t.ɵɵlistener("ngModelChange",(function(e){return n.timeRegion.colorType=e}))("selectionChange",(function(){return n.refresh()})),t.ɵɵelementEnd(),t.ɵɵelementStart(9,"ed-checkbox",7),t.ɵɵlistener("ngModelChange",(function(e){return n.timeRegion.fill=e}))("checked",(function(){return n.refresh()})),t.ɵɵelementEnd(),t.ɵɵtemplate(10,ee,1,1,"ed-color-picker",8),t.ɵɵelementStart(11,"ed-checkbox",9),t.ɵɵlistener("ngModelChange",(function(e){return n.timeRegion.line=e}))("checked",(function(){return n.refresh()})),t.ɵɵelementEnd(),t.ɵɵtemplate(12,te,1,1,"ed-color-picker",10),t.ɵɵelementStart(13,"div",1),t.ɵɵelementStart(14,"label",11),t.ɵɵlistener("click",(function(){return n.removed.emit(n.timeRegion)})),t.ɵɵelementStart(15,"a"),t.ɵɵelement(16,"i",12),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(3),t.ɵɵtextInterpolate1("T",n.index+1,""),t.ɵɵadvance(1),t.ɵɵproperty("data",n.availableDays)("ngModel",n.timeRegion.fromDay),t.ɵɵadvance(1),t.ɵɵproperty("ngModel",n.fromTime),t.ɵɵadvance(1),t.ɵɵproperty("data",n.availableDays)("ngModel",n.timeRegion.toDay),t.ɵɵadvance(1),t.ɵɵproperty("ngModel",n.toTime),t.ɵɵadvance(1),t.ɵɵproperty("data",n.availableColors)("ngModel",n.timeRegion.colorType),t.ɵɵadvance(1),t.ɵɵproperty("ngModel",n.timeRegion.fill),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",n.showCustomFillColor),t.ɵɵadvance(1),t.ɵɵproperty("ngModel",n.timeRegion.line),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",n.showCustomLineColor))},directives:[r.DropDownComponent,i.NgControlStatus,i.NgModel,r.TextBoxComponent,r.CheckBoxComponent,o.NgIf,r.ColorPickerComponent],encapsulation:2});var re=function(e){function t(t){return e.call(this,t)||this}return m(t,e),t.prototype.onAdd=function(){this.timeRegions.push(new D)},t.prototype.onRemove=function(e){var t=this.timeRegions.indexOf(e);-1!==t&&this.timeRegions.splice(t,1),this.refresh()},t}(g);function ie(e,n){1&e&&t.ɵɵelement(0,"editor-draw-options")}function ae(e,n){if(1&e&&(t.ɵɵelementStart(0,"span",5),t.ɵɵtext(1),t.ɵɵelementEnd()),2&e){var o=t.ɵɵnextContext(2);t.ɵɵadvance(1),t.ɵɵtextInterpolate1("(",o.overrides.length,")")}}function le(e,n){if(1&e&&(t.ɵɵtext(0," Series overrides"),t.ɵɵtemplate(1,ae,2,1,"span",4)),2&e){var o=t.ɵɵnextContext();t.ɵɵadvance(1),t.ɵɵproperty("ngIf",o.overrides.length)}}function se(e,n){1&e&&t.ɵɵelement(0,"editor-series-overrides")}function de(e,n){if(1&e&&(t.ɵɵelementStart(0,"span",5),t.ɵɵtext(1),t.ɵɵelementEnd()),2&e){var o=t.ɵɵnextContext(2);t.ɵɵadvance(1),t.ɵɵtextInterpolate1("(",o.thresholds.length,")")}}function ce(e,n){if(1&e&&(t.ɵɵtext(0," Thresholds"),t.ɵɵtemplate(1,de,2,1,"span",4)),2&e){var o=t.ɵɵnextContext();t.ɵɵadvance(1),t.ɵɵproperty("ngIf",o.thresholds.length)}}function ue(e,n){1&e&&t.ɵɵelement(0,"editor-thresholds")}function pe(e,n){if(1&e&&(t.ɵɵelementStart(0,"span",5),t.ɵɵtext(1),t.ɵɵelementEnd()),2&e){var o=t.ɵɵnextContext(2);t.ɵɵadvance(1),t.ɵɵtextInterpolate1("(",o.timeRegions.length,")")}}function me(e,n){if(1&e&&(t.ɵɵtext(0," Time regions"),t.ɵɵtemplate(1,pe,2,1,"span",4)),2&e){var o=t.ɵɵnextContext();t.ɵɵadvance(1),t.ɵɵproperty("ngIf",o.timeRegions.length)}}function he(e,n){1&e&&t.ɵɵelement(0,"editor-time-regions")}re.ɵfac=function(e){return new(e||re)(t.ɵɵdirectiveInject(a.PANEL_TOKEN))},re.ɵcmp=t.ɵɵdefineComponent({type:re,selectors:[["editor-time-regions"]],features:[t.ɵɵInheritDefinitionFeature],decls:9,vars:1,consts:[[1,"gf-form-group"],["ng-class","{'thresholds-form-disabled': ctrl.disabled}"],[3,"timeRegion","index","removed",4,"ngFor","ngForOf"],[1,"gf-form-button-row"],["ng-disabled","ctrl.disabled",1,"btn","btn-inverse",3,"click"],[1,"fa","fa-plus"],[3,"timeRegion","index","removed"]],template:function(e,n){1&e&&(t.ɵɵelementStart(0,"div",0),t.ɵɵelementStart(1,"h5"),t.ɵɵtext(2,"Time regions"),t.ɵɵelementEnd(),t.ɵɵelementStart(3,"div",1),t.ɵɵtemplate(4,oe,1,2,"editor-time-region",2),t.ɵɵelementStart(5,"div",3),t.ɵɵelementStart(6,"button",4),t.ɵɵlistener("click",(function(){return n.onAdd()})),t.ɵɵelement(7,"i",5),t.ɵɵtext(8," Add Time Region "),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(4),t.ɵɵproperty("ngForOf",n.timeRegions))},directives:[o.NgForOf,ne],encapsulation:2});var fe=function(e){function t(t){var n=e.call(this,t)||this;return n.index=1,n}return m(t,e),t}(g);fe.ɵfac=function(e){return new(e||fe)(t.ɵɵdirectiveInject(a.PANEL_TOKEN))},fe.ɵcmp=t.ɵɵdefineComponent({type:fe,selectors:[["editor-display"]],features:[t.ɵɵInheritDefinitionFeature],decls:12,vars:1,consts:[[3,"ngModel","ngModelChange"],["header","Draw options"],["edTabContent",""],["edTabTitle",""],["class","muted ml-1",4,"ngIf"],[1,"muted","ml-1"]],template:function(e,n){1&e&&(t.ɵɵelementStart(0,"ed-side-tabstrip",0),t.ɵɵlistener("ngModelChange",(function(e){return n.index=e})),t.ɵɵelementStart(1,"ed-tab",1),t.ɵɵtemplate(2,ie,1,0,"ng-template",2),t.ɵɵelementEnd(),t.ɵɵelementStart(3,"ed-tab"),t.ɵɵtemplate(4,le,2,1,"ng-template",3),t.ɵɵtemplate(5,se,1,0,"ng-template",2),t.ɵɵelementEnd(),t.ɵɵelementStart(6,"ed-tab"),t.ɵɵtemplate(7,ce,2,1,"ng-template",3),t.ɵɵtemplate(8,ue,1,0,"ng-template",2),t.ɵɵelementEnd(),t.ɵɵelementStart(9,"ed-tab"),t.ɵɵtemplate(10,me,2,1,"ng-template",3),t.ɵɵtemplate(11,he,1,0,"ng-template",2),t.ɵɵelementEnd(),t.ɵɵelementEnd()),2&e&&t.ɵɵproperty("ngModel",n.index)},directives:[r.SideTabStripComponent,i.NgControlStatus,i.NgModel,r.TabComponent,r.TabContentTemplate,r.TabTitleTemplate,W,o.NgIf,K,J,re],encapsulation:2});var ge=["editor"],ve=["suggestions"];function be(e,n){if(1&e&&(t.ɵɵelementStart(0,"a"),t.ɵɵtext(1),t.ɵɵelementEnd()),2&e){var o=t.ɵɵnextContext();t.ɵɵadvance(1),t.ɵɵtextInterpolate(o.value)}}var ye=function(e){return{width:e}};function xe(e,n){if(1&e){var o=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"input",5,6),t.ɵɵlistener("ngModelChange",(function(e){return t.ɵɵrestoreView(o),t.ɵɵnextContext().value=e}))("focusout",(function(){return t.ɵɵrestoreView(o),t.ɵɵnextContext().onEditorFocusOut()}))("keydown",(function(){return t.ɵɵrestoreView(o),t.ɵɵnextContext().onEditorKeyDown()}))("keyup.enter",(function(){t.ɵɵrestoreView(o);var e=t.ɵɵnextContext();return e.isEditorVisible=!1,e.onEditorFocusOut()})),t.ɵɵelementEnd()}if(2&e){var r=t.ɵɵnextContext();t.ɵɵproperty("ngStyle",t.ɵɵpureFunction1(2,ye,8*(r.value.length+1)+"px"))("ngModel",r.value)}}var Ce=function(){function e(){this.backupValue="",this.isEditorVisible=!1,this.isSuggestionMenuOpen=!1,this.pick=new t.EventEmitter,this.valueChange=new t.EventEmitter}return Object.defineProperty(e.prototype,"value",{get:function(){return this._value},set:function(e){this._value=e,this.valueChange.emit(this._value),this.pick.emit(this._value)},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){var e=this;this.items.forEach((function(t){return t.command=function(t){return e.onPick(t.item)}}))},e.prototype.onShowEditor=function(e){var t=this;this.backupValue=this.value,this.isSuggestionMenuOpen=!0,this.ctrlSuggestions.show(e),setTimeout((function(){t.isEditorVisible=!0,setTimeout((function(){return t.ctrlEditorElement.nativeElement.focus()}),0)}),0)},e.prototype.onEditorFocusOut=function(){this.isSuggestionMenuOpen||(this.isEditorVisible=!1,this.value||(this.value=this.backupValue))},e.prototype.onEditorKeyDown=function(){this.isSuggestionMenuOpen=!1,this.ctrlSuggestions.hide()},e.prototype.onPick=function(e){this.value=this.backupValue=e.label,this.isEditorVisible=!1},e}();Ce.ɵfac=function(e){return new(e||Ce)},Ce.ɵcmp=t.ɵɵdefineComponent({type:Ce,selectors:[["query-param-picker"]],viewQuery:function(e,n){var o;(1&e&&(t.ɵɵviewQuery(ge,!0),t.ɵɵviewQuery(ve,!0)),2&e)&&(t.ɵɵqueryRefresh(o=t.ɵɵloadQuery())&&(n.ctrlEditorElement=o.first),t.ɵɵqueryRefresh(o=t.ɵɵloadQuery())&&(n.ctrlSuggestions=o.first))},inputs:{items:"items",value:"value"},outputs:{pick:"pick",valueChange:"valueChange"},decls:5,vars:3,consts:[[1,"pointer",3,"click"],[4,"ngIf"],["type","text","class","q__editor","spellcheck","false",3,"ngStyle","ngModel","ngModelChange","focusout","keydown","keyup.enter",4,"ngIf"],[3,"items"],["suggestions",""],["type","text","spellcheck","false",1,"q__editor",3,"ngStyle","ngModel","ngModelChange","focusout","keydown","keyup.enter"],["editor",""]],template:function(e,n){1&e&&(t.ɵɵelementStart(0,"span",0),t.ɵɵlistener("click",(function(e){return n.onShowEditor(e)})),t.ɵɵtemplate(1,be,2,1,"a",1),t.ɵɵtemplate(2,xe,2,4,"input",2),t.ɵɵelementEnd(),t.ɵɵelement(3,"ed-context-menu",3,4)),2&e&&(t.ɵɵadvance(1),t.ɵɵproperty("ngIf",!n.isEditorVisible),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",n.isEditorVisible),t.ɵɵadvance(1),t.ɵɵproperty("items",n.items))},directives:[o.NgIf,r.ContextMenuComponent,i.DefaultValueAccessor,o.NgStyle,i.NgControlStatus,i.NgModel],styles:[".q__editor[_ngcontent-%COMP%]{background:transparent;border:none;color:#d8d9da;font-family:Roboto,Helvetica,Arial,sans-serif;font-size:12px;font-weight:400;margin:0;padding:0;width:24px}.q__editor[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:focus{-moz-box-shadow:none;-webkit-box-shadow:none;box-shadow:none;outline:none!important;outline-width:0!important}"]});var we=function(e){function t(t){var n=e.call(this,t)||this;return n.itemsTarget=[],n.itemsFrom=[{label:"10s"},{label:"1m"},{label:"5m"},{label:"10m"},{label:"15m"},{label:"1h"},{label:"24h"},{label:"48h"}],n.itemsTo=[{label:"now"},{label:"now-1m"},{label:"now-5m"},{label:"now-10m"},{label:"now-1h"}],n.itemsTarget=n.widget.metrics.targets.map((function(e){return{label:e.refId}})),n}return m(t,e),t}(g);function Se(e,n){1&e&&(t.ɵɵelementStart(0,"label",13),t.ɵɵtext(1," WHEN "),t.ɵɵelementEnd())}function Ee(e,n){if(1&e){var o=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"ed-autocomplete-picker",14),t.ɵɵlistener("pick",(function(e){return t.ɵɵrestoreView(o),t.ɵɵnextContext().condition.operator=e.toLowerCase()})),t.ɵɵelementEnd()}if(2&e){var r=t.ɵɵnextContext();t.ɵɵproperty("request",r.operators$)("value",r.condition.operator.toUpperCase())("readonly",!0)}}function Me(e,n){if(1&e){var o=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"ed-textbox",15),t.ɵɵlistener("ngModelChange",(function(e){return t.ɵɵrestoreView(o),t.ɵɵnextContext().evalParamFrom=e})),t.ɵɵelementEnd()}if(2&e){var r=t.ɵɵnextContext();t.ɵɵproperty("ngModel",r.evalParamFrom)}}function _e(e,n){if(1&e){var o=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"ed-textbox",16),t.ɵɵlistener("ngModelChange",(function(e){return t.ɵɵrestoreView(o),t.ɵɵnextContext().evalParamTo=e})),t.ɵɵelementEnd()}if(2&e){var r=t.ɵɵnextContext();t.ɵɵproperty("ngModel",r.evalParamTo)}}we.ɵfac=function(e){return new(e||we)(t.ɵɵdirectiveInject(a.PANEL_TOKEN))},we.ɵcmp=t.ɵɵdefineComponent({type:we,selectors:[["alert-query-editor"]],inputs:{query:"query"},features:[t.ɵɵInheritDefinitionFeature],decls:13,vars:6,consts:[[1,"gf-form"],[1,"gf-form-label"],[3,"value","items","valueChange"]],template:function(e,n){1&e&&(t.ɵɵelementStart(0,"div",0),t.ɵɵelementStart(1,"label",1),t.ɵɵelementStart(2,"span"),t.ɵɵtext(3,"query("),t.ɵɵelementEnd(),t.ɵɵelementStart(4,"query-param-picker",2),t.ɵɵlistener("valueChange",(function(e){return n.query.target=e})),t.ɵɵelementEnd(),t.ɵɵelementStart(5,"span"),t.ɵɵtext(6,", "),t.ɵɵelementEnd(),t.ɵɵelementStart(7,"query-param-picker",2),t.ɵɵlistener("valueChange",(function(e){return n.query.from=e})),t.ɵɵelementEnd(),t.ɵɵelementStart(8,"span"),t.ɵɵtext(9,", "),t.ɵɵelementEnd(),t.ɵɵelementStart(10,"query-param-picker",2),t.ɵɵlistener("valueChange",(function(e){return n.query.to=e})),t.ɵɵelementEnd(),t.ɵɵelementStart(11,"span"),t.ɵɵtext(12,")"),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(4),t.ɵɵproperty("value",n.query.target)("items",n.itemsTarget),t.ɵɵadvance(3),t.ɵɵproperty("value",n.query.from)("items",n.itemsFrom),t.ɵɵadvance(3),t.ɵɵproperty("value",n.query.to)("items",n.itemsTo))},directives:[Ce],encapsulation:2});var Ie=function(e){function n(n){var o=e.call(this,n)||this;return o.index=0,o.removed=new t.EventEmitter,o.AlertEvalTypeRef=["is below","is above","is outside range","is within range","has no value"],o}return m(n,e),Object.defineProperty(n.prototype,"reducers$",{get:function(){return d.of(Object.values(a.AlertReducer))},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"evaluators$",{get:function(){return d.of(f(this.AlertEvalTypeRef).map((function(e){return e.toUpperCase()})))},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"evaluator",{get:function(){return this.AlertEvalTypeRef[this.condition.evaluator.type].toUpperCase()},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"operators$",{get:function(){return d.of(Object.values(a.AlertOperator).map((function(e){return e.toUpperCase()})))},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"evaluatorType",{get:function(){return this.condition.evaluator.type},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"showEvalParamFrom",{get:function(){return this.evaluatorType!=a.AlertEvalType.HasNoValue},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"showEvalParamTo",{get:function(){return this.evaluatorType==a.AlertEvalType.IsOutsideRange||this.evaluatorType==a.AlertEvalType.IsWithinRange},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"evalParamFrom",{get:function(){var e;return null===(e=this.condition.evaluator.params[0])||void 0===e?void 0:e.toString()},set:function(e){var t=parseFloat(e),n=parseFloat(this.evalParamTo);t=isNaN(t)?"":t,n=isNaN(n)?"":n,this.condition.evaluator.params=this.showEvalParamTo?[t,n]:[t],this.refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"evalParamTo",{get:function(){var e;return null===(e=this.condition.evaluator.params[1])||void 0===e?void 0:e.toString()},set:function(e){var t=parseFloat(this.evalParamFrom),n=parseFloat(e);t=isNaN(t)?"":t,n=isNaN(n)?"":n,this.condition.evaluator.params=[t,n],this.refresh()},enumerable:!1,configurable:!0}),n.prototype.onEvaluatorPick=function(e){var t,n,o,r=this.AlertEvalTypeRef.indexOf(e.toLowerCase());if(-1!=r&&e!=this.evaluator){this.condition.evaluator.type=r;var i=this.condition.evaluator,l=i.params;switch(i.type){case a.AlertEvalType.IsAbove:case a.AlertEvalType.IsBelow:i.params=[null!==(t=l[0])&&void 0!==t?t:""];break;case a.AlertEvalType.HasNoValue:i.params=[];break;default:i.params=[null!==(n=l[0])&&void 0!==n?n:"",null!==(o=l[1])&&void 0!==o?o:""]}this.refresh()}},n}(g);function Pe(e,n){if(1&e){var o=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"div"),t.ɵɵelementStart(1,"editor-alert-condition",18),t.ɵɵlistener("removed",(function(e){return t.ɵɵrestoreView(o),t.ɵɵnextContext().onRemoveCondition(e)})),t.ɵɵelementEnd(),t.ɵɵelementEnd()}if(2&e){var r=n.$implicit,i=n.index;t.ɵɵadvance(1),t.ɵɵproperty("condition",r)("index",i)}}function Oe(e,n){1&e&&t.ɵɵelement(0,"ed-progress",19)}Ie.ɵfac=function(e){return new(e||Ie)(t.ɵɵdirectiveInject(a.PANEL_TOKEN))},Ie.ɵcmp=t.ɵɵdefineComponent({type:Ie,selectors:[["editor-alert-condition"]],inputs:{condition:"condition",index:"index"},outputs:{removed:"removed"},features:[t.ɵɵInheritDefinitionFeature],decls:16,vars:10,consts:[[1,"gf-form-inline"],[1,"gf-form"],["class","gf-form-label  query-keyword width-5",4,"ngIf"],["valueClass","query-keyword","width","5",3,"request","value","readonly","pick",4,"ngIf"],[3,"ngModel","formatString","request","ngModelChange"],[1,"gf-form","mr-1"],[1,"gf-form-label","query-keyword"],[3,"query"],["valueClass","query-keyword",3,"value","request","pick"],["width","9","type","number",3,"ngModel","ngModelChange",4,"ngIf"],["label","TO","labelClass","query-keyword","width","9","type","number",3,"ngModel","ngModelChange",4,"ngIf"],[1,"gf-form-label","pointer",3,"click"],[1,"fa","fa-trash"],[1,"gf-form-label","query-keyword","width-5"],["valueClass","query-keyword","width","5",3,"request","value","readonly","pick"],["width","9","type","number",3,"ngModel","ngModelChange"],["label","TO","labelClass","query-keyword","width","9","type","number",3,"ngModel","ngModelChange"]],template:function(e,n){1&e&&(t.ɵɵelementStart(0,"div",0),t.ɵɵelementStart(1,"div",1),t.ɵɵtemplate(2,Se,2,0,"label",2),t.ɵɵelementEnd(),t.ɵɵtemplate(3,Ee,1,3,"ed-autocomplete-picker",3),t.ɵɵelementStart(4,"ed-autocomplete-picker",4),t.ɵɵlistener("ngModelChange",(function(e){return n.condition.reducer=e})),t.ɵɵelementEnd(),t.ɵɵelementStart(5,"div",5),t.ɵɵelementStart(6,"label",6),t.ɵɵtext(7," OF "),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelement(8,"alert-query-editor",7),t.ɵɵelement(9,"div",5),t.ɵɵelementStart(10,"ed-autocomplete-picker",8),t.ɵɵlistener("pick",(function(e){return n.onEvaluatorPick(e)})),t.ɵɵelementEnd(),t.ɵɵtemplate(11,Me,1,1,"ed-textbox",9),t.ɵɵtemplate(12,_e,1,1,"ed-textbox",10),t.ɵɵelementStart(13,"div",1),t.ɵɵelementStart(14,"label",11),t.ɵɵlistener("click",(function(){return n.removed.emit(n.condition)})),t.ɵɵelement(15,"i",12),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(2),t.ɵɵproperty("ngIf",0==n.index),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",0!=n.index),t.ɵɵadvance(1),t.ɵɵproperty("ngModel",n.condition.reducer)("formatString","{0}()")("request",n.reducers$),t.ɵɵadvance(4),t.ɵɵproperty("query",n.condition.query),t.ɵɵadvance(2),t.ɵɵproperty("value",n.evaluator)("request",n.evaluators$),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",n.showEvalParamFrom),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",n.showEvalParamTo))},directives:[o.NgIf,r.AutoCompletePickerComponent,i.NgControlStatus,i.NgModel,we,r.TextBoxComponent],encapsulation:2});var De=function(e){function t(t,n,o){var i=e.call(this,t)||this;return i.store=n,i.dsService=o,i.availableNoDataOptions=r.DropDownComponent.wrapEnum(a.AlertNoDataOption),i.availableErrorOptions=r.DropDownComponent.wrapEnum(a.AlertErrorOption),i.storeSubs=n.dashboard$.subscribe((function(e){return i.dashboard=e})),i}return m(t,e),t.prototype.ngOnDestroy=function(){var e;null===(e=this.storeSubs)||void 0===e||e.unsubscribe()},t.prototype.onAddCondition=function(){var e;this.alert.conditions=null!==(e=this.alert.conditions)&&void 0!==e?e:[],this.alert.conditions.push(new a.AlertCondition)},t.prototype.onRemoveCondition=function(e){var t=this.alert.conditions.indexOf(e);-1!==t&&(this.alert.conditions.splice(t,1),this.refresh())},t.prototype.onTestRule=function(){var e=this;this.testing=!0,this.explorer.clean(),this.dsService.evalAlert(this.dashboard,this.panel.id).pipe(s.finalize((function(){return e.testing=!1}))).subscribe((function(t){e.explorer.content=t,t.error&&r.Notes.error(t.error)}),(function(e){var t,n;return r.Notes.error(null!==(n=null===(t=e.error)||void 0===t?void 0:t.message)&&void 0!==n?n:r.ErrorMessages.BAD_ALERT_EVAL)}))},t}(g);function Ae(e,n){if(1&e){var o=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"span",9),t.ɵɵelement(1,"i",10),t.ɵɵtext(2),t.ɵɵelementStart(3,"i",11),t.ɵɵlistener("click",(function(){t.ɵɵrestoreView(o);var e=n.$implicit;return t.ɵɵnextContext().onRemove(e)})),t.ɵɵelementEnd(),t.ɵɵelementEnd()}if(2&e){var r,i=n.$implicit,a=t.ɵɵnextContext();t.ɵɵadvance(2),t.ɵɵtextInterpolate1(" ",null==(r=a.getChannelById(i))?null:r.name,"  ")}}De.ɵfac=function(e){return new(e||De)(t.ɵɵdirectiveInject(a.PANEL_TOKEN),t.ɵɵdirectiveInject(a.DashboardStore),t.ɵɵdirectiveInject(a.DashboardService))},De.ɵcmp=t.ɵɵdefineComponent({type:De,selectors:[["editor-alert-config"]],viewQuery:function(e,n){var o;(1&e&&t.ɵɵviewQuery(r.JsonExplorerComponent,!0),2&e)&&(t.ɵɵqueryRefresh(o=t.ɵɵloadQuery())&&(n.explorer=o.first))},features:[t.ɵɵInheritDefinitionFeature],decls:36,vars:10,consts:[[1,"gf-form-group"],[1,"section-heading"],["label","Name","labelWidth","6","width","20",3,"ngModel","ngModelChange"],[1,"gf-form-inline"],["label","Evaluate every","labelWidth","9","width","6",3,"ngModel","ngModelChange"],["label","For","labelWidth","5","width","6","placeholder","5m","hint","If an alert rule has a configured For and the query violates\n\t\t\t\tthe configured threshold it will first go from OK to Pending. \n\t\t\t\tGoing from OK to Pending Grafana will not send any notifications.\n\t\t\t\tOnce the alert rule has been firing for more than For duration,\n\t\t\t\tit will change to Alerting and send alert notifications. ",3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],[1,"gf-form"],[1,"gf-form-label","pointer",3,"click"],[1,"fa","fa-plus"],[1,"gf-form-label","width-18"],[1,"gf-form-label","query-keyword"],["width","11",3,"data","ngModel","ngModelChange"],[1,"gf-form-button-row","ed-flex"],[1,"btn","btn-inverse",3,"disabled","click"],["message","evaluating rule...",4,"ngIf"],["ng-if","ctrl.testResult",1,"gf-form-group"],["jsonExplorer",""],[3,"condition","index","removed"],["message","evaluating rule..."]],template:function(e,n){1&e&&(t.ɵɵelementStart(0,"div",0),t.ɵɵelementStart(1,"h5",1),t.ɵɵtext(2,"Alert Config"),t.ɵɵelementEnd(),t.ɵɵelementStart(3,"ed-textbox",2),t.ɵɵlistener("ngModelChange",(function(e){return n.alert.name=e})),t.ɵɵelementEnd(),t.ɵɵelementStart(4,"div",3),t.ɵɵelementStart(5,"ed-textbox",4),t.ɵɵlistener("ngModelChange",(function(e){return n.alert.frequency=e})),t.ɵɵelementEnd(),t.ɵɵelementStart(6,"ed-textbox",5),t.ɵɵlistener("ngModelChange",(function(e){return n.alert.for=e})),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementStart(7,"div",0),t.ɵɵelementStart(8,"h5",1),t.ɵɵtext(9,"Conditions"),t.ɵɵelementEnd(),t.ɵɵtemplate(10,Pe,2,2,"div",6),t.ɵɵelementStart(11,"div",7),t.ɵɵelementStart(12,"label",8),t.ɵɵlistener("click",(function(){return n.onAddCondition()})),t.ɵɵelement(13,"i",9),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementStart(14,"div",0),t.ɵɵelementStart(15,"div",3),t.ɵɵelementStart(16,"div",7),t.ɵɵelementStart(17,"span",10),t.ɵɵtext(18,"If no data or all values are null"),t.ɵɵelementEnd(),t.ɵɵelementStart(19,"span",11),t.ɵɵtext(20,"SET STATE TO"),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementStart(21,"ed-dropdown",12),t.ɵɵlistener("ngModelChange",(function(e){return n.alert.noDataOption=e})),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementStart(22,"div",3),t.ɵɵelementStart(23,"div",7),t.ɵɵelementStart(24,"span",10),t.ɵɵtext(25,"If execution error or timeout"),t.ɵɵelementEnd(),t.ɵɵelementStart(26,"span",11),t.ɵɵtext(27,"SET STATE TO"),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementStart(28,"ed-dropdown",12),t.ɵɵlistener("ngModelChange",(function(e){return n.alert.errorOption=e})),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementStart(29,"div",13),t.ɵɵelementStart(30,"button",14),t.ɵɵlistener("click",(function(){return n.onTestRule()})),t.ɵɵtext(31," Test Rule "),t.ɵɵelementEnd(),t.ɵɵtemplate(32,Oe,1,0,"ed-progress",15),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementStart(33,"div",16),t.ɵɵelement(34,"ed-json-explorer",null,17),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(3),t.ɵɵproperty("ngModel",n.alert.name),t.ɵɵadvance(2),t.ɵɵproperty("ngModel",n.alert.frequency),t.ɵɵadvance(1),t.ɵɵproperty("ngModel",n.alert.for),t.ɵɵadvance(4),t.ɵɵproperty("ngForOf",n.alert.conditions),t.ɵɵadvance(11),t.ɵɵproperty("data",n.availableNoDataOptions)("ngModel",n.alert.noDataOption),t.ɵɵadvance(7),t.ɵɵproperty("data",n.availableErrorOptions)("ngModel",n.alert.errorOption),t.ɵɵadvance(2),t.ɵɵproperty("disabled",n.testing),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",n.testing))},directives:[r.TextBoxComponent,i.NgControlStatus,i.NgModel,o.NgForOf,r.DropDownComponent,o.NgIf,r.JsonExplorerComponent,Ie,r.ProgressComponent],encapsulation:2});var ke=function(e){function t(t,n){var o,i=this;return(i=e.call(this,t)||this).alertService=n,i.availableChannels=[],i.alert.notifications=null!==(o=i.notifications)&&void 0!==o?o:[],i.alertService.getNotifications().subscribe((function(e){i.availableChannels=e,i.alert.notifications=i.notifications.filter((function(e){return i.availableChannels.find((function(t){return t.id==e}))}))}),(function(e){var t,n;return r.Notes.error(null!==(n=null===(t=e.error)||void 0===t?void 0:t.message)&&void 0!==n?n:r.ErrorMessages.BAD_GET_ALERT_NOTIFS)})),i}return m(t,e),Object.defineProperty(t.prototype,"channels$",{get:function(){var e=this;return d.of(f(this.availableChannels.filter((function(t){var n;return!(null===(n=e.notifications)||void 0===n?void 0:n.includes(t.id))})).map((function(e){return e.name}))))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"notifications",{get:function(){return this.alert.notifications},enumerable:!1,configurable:!0}),t.prototype.getChannelByName=function(e){return this.availableChannels.find((function(t){return t.name==e}))},t.prototype.getChannelById=function(e){return this.availableChannels.find((function(t){return t.id==e}))},t.prototype.onAdd=function(e){var t=this.getChannelByName(e);t&&this.notifications.push(t.id)},t.prototype.onRemove=function(e){var t=this.notifications.findIndex((function(t){return t==e}));-1!==t&&this.notifications.splice(t,1)},t}(g);ke.ɵfac=function(e){return new(e||ke)(t.ɵɵdirectiveInject(a.PANEL_TOKEN),t.ɵɵdirectiveInject(a.AlertService))},ke.ɵcmp=t.ɵɵdefineComponent({type:ke,selectors:[["editor-alert-notifications"]],features:[t.ɵɵInheritDefinitionFeature],decls:14,vars:3,consts:[[1,"section-heading"],[1,"gf-form-inline"],[1,"gf-form-inline","max-width-30"],[1,"gf-form"],[1,"gf-form-label","width-8"],["class","gf-form gf-form-label",4,"ngFor","ngForOf"],["placeholder","fa fa-plus","readonly","true",3,"request","pick"],[1,"gf-form","gf-form--v-stretch"],["rows","10","placeholder","Notification message details...",1,"gf-form-input",3,"ngModel","ngModelChange"],[1,"gf-form","gf-form-label"],[1,"fa","fa-bell"],["ng-if","nc.isDefault === false",1,"fa","fa-remove","pointer","muted",3,"click"]],template:function(e,n){1&e&&(t.ɵɵelementStart(0,"h5",0),t.ɵɵtext(1,"Notifications"),t.ɵɵelementEnd(),t.ɵɵelementStart(2,"div",1),t.ɵɵelementStart(3,"div",2),t.ɵɵelementStart(4,"div",3),t.ɵɵelementStart(5,"span",4),t.ɵɵtext(6,"Send to"),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵtemplate(7,Ae,4,1,"span",5),t.ɵɵelementStart(8,"ed-autocomplete-picker",6),t.ɵɵlistener("pick",(function(e){return n.onAdd(e)})),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementStart(9,"div",7),t.ɵɵelementStart(10,"span",4),t.ɵɵtext(11,"Message"),t.ɵɵelementEnd(),t.ɵɵelementStart(12,"textarea",8),t.ɵɵlistener("ngModelChange",(function(e){return n.alert.message=e})),t.ɵɵtext(13,"\t"),t.ɵɵelementEnd(),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(7),t.ɵɵproperty("ngForOf",n.notifications),t.ɵɵadvance(1),t.ɵɵproperty("request",n.channels$),t.ɵɵadvance(4),t.ɵɵproperty("ngModel",n.alert.message))},directives:[o.NgForOf,r.AutoCompletePickerComponent,i.DefaultValueAccessor,i.NgControlStatus,i.NgModel],encapsulation:2});var Te=function(e){return[e]};function Ne(e,n){if(1&e&&(t.ɵɵelementStart(0,"li",17),t.ɵɵelementStart(1,"div",18),t.ɵɵelement(2,"i",19),t.ɵɵelementEnd(),t.ɵɵelementStart(3,"div",20),t.ɵɵelementStart(4,"div",21),t.ɵɵelementStart(5,"div",22),t.ɵɵelementStart(6,"span",19),t.ɵɵtext(7),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementStart(8,"span",23),t.ɵɵtext(9),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementStart(10,"div",24),t.ɵɵelementStart(11,"span"),t.ɵɵtext(12),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementEnd()),2&e){var o=n.$implicit,r=t.ɵɵnextContext(2);t.ɵɵadvance(1),t.ɵɵproperty("ngClass",t.ɵɵpureFunction1(6,Te,r.AlertHelperRef.getStateClass(o.alert.currentState))),t.ɵɵadvance(1),t.ɵɵproperty("ngClass",t.ɵɵpureFunction1(8,Te,r.AlertHelperRef.getStateIconClass(o.alert.currentState))),t.ɵɵadvance(4),t.ɵɵproperty("ngClass",t.ɵɵpureFunction1(10,Te,r.AlertHelperRef.getStateClass(o.alert.currentState))),t.ɵɵadvance(1),t.ɵɵtextInterpolate(null==o.alert?null:o.alert.currentState),t.ɵɵadvance(2),t.ɵɵtextInterpolate(r.AlertHelperRef.getInfo(o.alert)),t.ɵɵadvance(3),t.ɵɵtextInterpolate(r.getFormattedTime(o))}}function Fe(e,n){1&e&&(t.ɵɵelementStart(0,"div"),t.ɵɵelementStart(1,"i"),t.ɵɵtext(2,"No state changes recorded"),t.ɵɵelementEnd(),t.ɵɵelementEnd())}function Le(e,n){if(1&e&&(t.ɵɵelementStart(0,"div"),t.ɵɵelementStart(1,"ol",14),t.ɵɵtemplate(2,Ne,13,12,"li",15),t.ɵɵelementEnd(),t.ɵɵtemplate(3,Fe,3,0,"div",16),t.ɵɵelementEnd()),2&e){var o=t.ɵɵnextContext();t.ɵɵadvance(2),t.ɵɵproperty("ngForOf",o.history),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",!(null!=o.history&&o.history.length))}}var Re=function(e){function t(t,n,o){var i=e.call(this,t)||this;return i.store=n,i.annotService=o,i.ErrorMessagesRef=r.ErrorMessages,i.AlertHelperRef=a.AlertHelper,i.storeSubs=n.dashboard$.subscribe((function(e){e&&(i.dashboardId=e.id,i.loadHistory())})),i}return m(t,e),t.prototype.ngOnDestroy=function(){var e;null===(e=this.storeSubs)||void 0===e||e.unsubscribe()},t.prototype.loadHistory=function(){var e=this,t="dashboardId="+this.dashboardId+"&panelId="+this.panel.id+"&limit=50&type=alert";this.historyRequest=new r.ObservableEx(this.annotService.find(t).pipe(s.tap((function(t){return e.history=f(t)}))))},t.prototype.getFormattedTime=function(e){return a.Moment.format(e.time)},t.prototype.onClearHistory=function(){var e=this;this.deleting=!0,this.annotService.clear(this.dashboardId,+this.panel.id).pipe(s.finalize((function(){return e.deleting=e.deleteDialogOpened=!1}))).subscribe((function(t){e.history=[],r.Notes.success(t.message)}),(function(e){var t,n;return r.Notes.error(null!==(n=null===(t=e.error)||void 0===t?void 0:t.message)&&void 0!==n?n:r.ErrorMessages.BAD_DELETE_ANNS)}))},t}(g);function je(e,n){1&e&&t.ɵɵelement(0,"editor-alert-config")}function Ve(e,n){1&e&&t.ɵɵtext(0," Notifications ")}function He(e,n){1&e&&t.ɵɵelement(0,"editor-alert-notifications")}function qe(e,n){1&e&&t.ɵɵelement(0,"editor-alert-history")}function We(e,n){if(1&e){var o=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"ed-dialog",8),t.ɵɵlistener("close",(function(){return t.ɵɵrestoreView(o),t.ɵɵnextContext(2).onClose()})),t.ɵɵelementStart(1,"div",9),t.ɵɵelementStart(2,"div",10),t.ɵɵtext(3," Are you sure you want to delete this alert rule? "),t.ɵɵelementStart(4,"div",11),t.ɵɵtext(5," You need to save dashboard for the delete to take effect "),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementStart(6,"ed-dialog-actions"),t.ɵɵelementStart(7,"button",12),t.ɵɵlistener("click",(function(){return t.ɵɵrestoreView(o),t.ɵɵnextContext(2).onDelete()})),t.ɵɵtext(8,"Delete"),t.ɵɵelementEnd(),t.ɵɵelementStart(9,"button",13),t.ɵɵlistener("click",(function(){return t.ɵɵrestoreView(o),t.ɵɵnextContext(2).onClose()})),t.ɵɵtext(10,"Cancel"),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementEnd()}}function Be(e,n){if(1&e){var o=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"ed-side-tabstrip",2),t.ɵɵlistener("ngModelChange",(function(e){return t.ɵɵrestoreView(o),t.ɵɵnextContext().index=e})),t.ɵɵelementStart(1,"ed-tab",3),t.ɵɵtemplate(2,je,1,0,"ng-template",4),t.ɵɵelementEnd(),t.ɵɵelementStart(3,"ed-tab"),t.ɵɵtemplate(4,Ve,1,0,"ng-template",5),t.ɵɵtemplate(5,He,1,0,"ng-template",4),t.ɵɵelementEnd(),t.ɵɵelementStart(6,"ed-tab",6),t.ɵɵtemplate(7,qe,1,0,"ng-template",4),t.ɵɵelementEnd(),t.ɵɵelementStart(8,"ed-tab",7),t.ɵɵtemplate(9,We,11,0,"ng-template",4),t.ɵɵelementEnd(),t.ɵɵelementEnd()}if(2&e){var r=t.ɵɵnextContext();t.ɵɵproperty("ngModel",r.index)}}function Ye(e,n){if(1&e){var o=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"div",14),t.ɵɵelementStart(1,"div",15),t.ɵɵelementStart(2,"button",16),t.ɵɵlistener("click",(function(){return t.ɵɵrestoreView(o),t.ɵɵnextContext().onAddAlert()})),t.ɵɵelement(3,"i",17),t.ɵɵtext(4," Create Alert "),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementEnd()}}Re.ɵfac=function(e){return new(e||Re)(t.ɵɵdirectiveInject(a.PANEL_TOKEN),t.ɵɵdirectiveInject(a.DashboardStore),t.ɵɵdirectiveInject(a.AnnotationService))},Re.ɵcmp=t.ɵɵdefineComponent({type:Re,selectors:[["editor-alert-history"]],features:[t.ɵɵInheritDefinitionFeature],decls:24,vars:8,consts:[[1,"gf-form-group",2,"max-width","720px"],[1,"btn","btn-mini","btn-danger","pull-right",3,"click"],[1,"fa","fa-trash"],[1,"section-heading",2,"whitespace","nowrap"],[1,"muted","small"],[4,"ngIf","ngIfElse"],[3,"loadingWrapper","loadingMessage","errorMessage"],["loadOrError",""],["header","Delete Alert History","headerIcon","fa fa-trash",3,"visible","visibleChange","close"],[1,"text-center"],[1,"confirm-modal-text"],[1,"gf-form-button-row"],[1,"btn","btn-danger",3,"click"],[1,"btn","btn-inverse",3,"click"],[1,"alert-rule-list"],["class","alert-rule-item",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"alert-rule-item"],[1,"alert-rule-item__icon",3,"ngClass"],[3,"ngClass"],[1,"alert-rule-item__body"],[1,"alert-rule-item__header"],[1,"alert-rule-item__text-big"],[1,"alert-list-info"],[1,"alert-rule-item__time"]],template:function(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",0),t.ɵɵelementStart(1,"button",1),t.ɵɵlistener("click",(function(){return n.deleteDialogOpened=!0})),t.ɵɵelement(2,"i",2),t.ɵɵtext(3," Clear history"),t.ɵɵelementEnd(),t.ɵɵelementStart(4,"h5",3),t.ɵɵtext(5," State history "),t.ɵɵelementStart(6,"span",4),t.ɵɵtext(7,"(last 50 state changes)"),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵtemplate(8,Le,4,2,"div",5),t.ɵɵpipe(9,"async"),t.ɵɵelementEnd(),t.ɵɵelement(10,"load-or-error",6,7),t.ɵɵelementStart(12,"ed-dialog",8),t.ɵɵlistener("visibleChange",(function(e){return n.deleteDialogOpened=e}))("close",(function(){return n.deleteDialogOpened=!1})),t.ɵɵelementStart(13,"div",9),t.ɵɵelementStart(14,"div",10),t.ɵɵtext(15,"Are you sure you want to remove all history "),t.ɵɵelement(16,"br"),t.ɵɵtext(17,"& annotations for this alert?"),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementStart(18,"ed-dialog-actions"),t.ɵɵelementStart(19,"div",11),t.ɵɵelementStart(20,"button",12),t.ɵɵlistener("click",(function(){return n.onClearHistory()})),t.ɵɵtext(21,"Delete"),t.ɵɵelementEnd(),t.ɵɵelementStart(22,"button",13),t.ɵɵlistener("click",(function(){return n.deleteDialogOpened=!1})),t.ɵɵtext(23,"Cancel"),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementEnd()),2&e){var o=t.ɵɵreference(11);t.ɵɵadvance(8),t.ɵɵproperty("ngIf",t.ɵɵpipeBind1(9,6,null==n.historyRequest?null:n.historyRequest.data$))("ngIfElse",o.template),t.ɵɵadvance(2),t.ɵɵproperty("loadingWrapper",n.historyRequest)("loadingMessage","loading alert annotation history...")("errorMessage",n.ErrorMessagesRef.BAD_GET_ANNS),t.ɵɵadvance(2),t.ɵɵproperty("visible",n.deleteDialogOpened)}},directives:[o.NgIf,r.LoadOrErrorComponent,r.DialogComponent,r.DialogActionsComponent,o.NgForOf,o.NgClass],pipes:[o.AsyncPipe],encapsulation:2});var $e=function(e){function t(t){var n=e.call(this,t)||this;return n.index=1,n.toggleAlertHandle(!0),n}return m(t,e),t.prototype.ngOnDestroy=function(){this.toggleAlertHandle(!1)},t.prototype.onAddAlert=function(){this.widget.alert=new a.AlertRule},t.prototype.onClose=function(){this.index=0},t.prototype.onDelete=function(){this.widget.alert=this.panel.alertState=void 0,this.refresh(),this.onClose()},t}(g);$e.ɵfac=function(e){return new(e||$e)(t.ɵɵdirectiveInject(a.PANEL_TOKEN))},$e.ɵcmp=t.ɵɵdefineComponent({type:$e,selectors:[["editor-alert"]],features:[t.ɵɵInheritDefinitionFeature],decls:3,vars:2,consts:[[3,"ngModel","ngModelChange",4,"ngIf","ngIfElse"],["invitation",""],[3,"ngModel","ngModelChange"],["header","Alert Config"],["edTabContent",""],["edTabTitle",""],["header","State History"],["header","Delete"],["header","Delete Alert","headerIcon","fa fa-trash","visible","true",3,"close"],[1,"text-center"],[1,"confirm-modal-text"],[1,"confirm-modal-text2"],[1,"btn","btn-danger",3,"click"],[1,"ml-2","btn","btn-inverse",3,"click"],[1,"gf-form-group"],[1,"gf-form-button-row"],[1,"btn","btn-inverse",3,"click"],[1,"icon-gf","icon-gf-alert"]],template:function(e,n){if(1&e&&(t.ɵɵtemplate(0,Be,10,1,"ed-side-tabstrip",0),t.ɵɵtemplate(1,Ye,5,0,"ng-template",null,1,t.ɵɵtemplateRefExtractor)),2&e){var o=t.ɵɵreference(2);t.ɵɵproperty("ngIf",n.alert)("ngIfElse",o)}},directives:[o.NgIf,r.SideTabStripComponent,i.NgControlStatus,i.NgModel,r.TabComponent,r.TabContentTemplate,r.TabTitleTemplate,De,ke,Re,r.DialogComponent,r.DialogActionsComponent],encapsulation:2});var ze=function(e){function t(t){return e.call(this,t)||this}return m(t,e),t.prototype.ngOnInit=function(){var e,t,n=this;this.form=new i.FormGroup({from:new i.FormControl(null!==(e=this.time.from)&&void 0!==e?e:"",this.validateTime.bind(this)),shift:new i.FormControl(null!==(t=this.time.shift)&&void 0!==t?t:"",this.validateTime.bind(this)),hide:new i.FormControl(this.time.hide)}),this.form.valueChanges.subscribe((function(e){if(n.form.valid){var t=!1;n.time.from!==e.from&&(n.time.from=e.from,t=!0),n.time.shift!==e.shift&&(n.time.shift=e.shift,t=!0),n.time.hide!==e.hide&&(n.time.hide=e.hide),t&&n.pull()}}))},t.prototype.validateTime=function(e){if(!e.value)return null;var t="now - "+e.value;return a.TimeRangeParser.isValid(t)?null:{invalidTime:!0}},t}(g);function Ge(e,n){1&e&&t.ɵɵelement(0,"editor-general")}function Ke(e,n){1&e&&t.ɵɵelement(0,"editor-metrics")}function Xe(e,n){1&e&&t.ɵɵelement(0,"editor-axes")}function Ue(e,n){1&e&&t.ɵɵelement(0,"editor-legend")}function Qe(e,n){1&e&&t.ɵɵelement(0,"editor-display")}function Ze(e,n){1&e&&t.ɵɵelement(0,"editor-alert")}function Je(e,n){1&e&&t.ɵɵelement(0,"editor-time")}ze.ɵfac=function(e){return new(e||ze)(t.ɵɵdirectiveInject(a.PANEL_TOKEN))},ze.ɵcmp=t.ɵɵdefineComponent({type:ze,selectors:[["editor-time"]],features:[t.ɵɵInheritDefinitionFeature],decls:22,vars:1,consts:[[3,"formGroup"],["f",""],[1,"section","gf-form-group"],[1,"ed-form-inline"],[1,"gf-form"],[1,"gf-form-label"],[1,"fa","fa-clock-o"],[1,"gf-form-label","width-12"],["label","Last","labelWidth","6","width","8","placeholder","1h","formControlName","from"],["label","Amount","labelWidth","6","width","8","placeholder","1h","formControlName","shift"],[1,"gf-form-inline"],["labelWidth","12","width","6","label","Hide time override info","formControlName","hide"]],template:function(e,n){1&e&&(t.ɵɵelementStart(0,"form",0,1),t.ɵɵelementStart(2,"div",2),t.ɵɵelementStart(3,"div",3),t.ɵɵelementStart(4,"div",4),t.ɵɵelementStart(5,"span",5),t.ɵɵelement(6,"i",6),t.ɵɵelementEnd(),t.ɵɵelementStart(7,"span",7),t.ɵɵtext(8,"Override relative time"),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelement(9,"ed-textbox",8),t.ɵɵelementEnd(),t.ɵɵelementStart(10,"div",3),t.ɵɵelementStart(11,"div",4),t.ɵɵelementStart(12,"span",5),t.ɵɵelement(13,"i",6),t.ɵɵelementEnd(),t.ɵɵelementStart(14,"span",7),t.ɵɵtext(15,"Add time shift"),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelement(16,"ed-textbox",9),t.ɵɵelementEnd(),t.ɵɵelementStart(17,"div",10),t.ɵɵelementStart(18,"div",4),t.ɵɵelementStart(19,"span",5),t.ɵɵelement(20,"i",6),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelement(21,"ed-checkbox",11),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementEnd()),2&e&&t.ɵɵproperty("formGroup",n.form)},directives:[i.ɵangular_packages_forms_forms_y,i.NgControlStatusGroup,i.FormGroupDirective,r.TextBoxComponent,i.NgControlStatus,i.FormControlName,r.CheckBoxComponent],encapsulation:2});var et=function(){function e(e,t,n){var o=this;this.router=e,this.activatedRoute=t,this.location=n,this.index=0,this.routeSubs=this.activatedRoute.queryParamMap.subscribe((function(e){var t=+e.get("tab");Number.isInteger(t)&&(o.index=t)}))}return e.prototype.ngOnDestroy=function(){var e;null===(e=this.routeSubs)||void 0===e||e.unsubscribe()},e.prototype.onTabSelected=function(e){var t=this.router.createUrlTree([],{relativeTo:this.activatedRoute,queryParams:{tab:e},queryParamsHandling:"merge"}).toString();this.location.go(t)},e}();et.ɵfac=function(e){return new(e||et)(t.ɵɵdirectiveInject(n.Router),t.ɵɵdirectiveInject(n.ActivatedRoute),t.ɵɵdirectiveInject(o.Location))},et.ɵcmp=t.ɵɵdefineComponent({type:et,selectors:[["widget-editor"]],decls:15,vars:1,consts:[["header","Graph",3,"ngModel","ngModelChange","selected"],["header","General"],["edTabContent",""],["header","Metrics"],["header","Axes"],["header","Legend"],["header","Display"],["header","Alert"],["header","Time range"]],template:function(e,n){1&e&&(t.ɵɵelementStart(0,"ed-tabstrip",0),t.ɵɵlistener("ngModelChange",(function(e){return n.index=e}))("selected",(function(e){return n.onTabSelected(e)})),t.ɵɵelementStart(1,"ed-tab",1),t.ɵɵtemplate(2,Ge,1,0,"ng-template",2),t.ɵɵelementEnd(),t.ɵɵelementStart(3,"ed-tab",3),t.ɵɵtemplate(4,Ke,1,0,"ng-template",2),t.ɵɵelementEnd(),t.ɵɵelementStart(5,"ed-tab",4),t.ɵɵtemplate(6,Xe,1,0,"ng-template",2),t.ɵɵelementEnd(),t.ɵɵelementStart(7,"ed-tab",5),t.ɵɵtemplate(8,Ue,1,0,"ng-template",2),t.ɵɵelementEnd(),t.ɵɵelementStart(9,"ed-tab",6),t.ɵɵtemplate(10,Qe,1,0,"ng-template",2),t.ɵɵelementEnd(),t.ɵɵelementStart(11,"ed-tab",7),t.ɵɵtemplate(12,Ze,1,0,"ng-template",2),t.ɵɵelementEnd(),t.ɵɵelementStart(13,"ed-tab",8),t.ɵɵtemplate(14,Je,1,0,"ng-template",2),t.ɵɵelementEnd(),t.ɵɵelementEnd()),2&e&&t.ɵɵproperty("ngModel",n.index)},directives:[r.TabStripComponent,i.NgControlStatus,i.NgModel,r.TabComponent,r.TabContentTemplate,r.GeneralEditorComponent,r.MetricsEditorComponent,H,q,fe,$e,ze],encapsulation:2});var tt=function(){function e(e,t){this.model=e,this.component=t,this.ID="chartjs-tooltip",this.TOOLTIP_SELECTOR="ed-tooltip"}return e.build=function(t){return Chart.Tooltip.positioners.custom=function(e,t){return{x:t.x,y:t.y}},{mode:"index",position:"custom",axis:"x",intersect:!1,caretSize:0,xPadding:10,bodySpacing:5,titleAlign:"right",enabled:!1,custom:function(n){return new e(n,t).create()}}},Object.defineProperty(e.prototype,"root",{get:function(){var e=document.getElementById(this.ID);return e||((e=document.createElement("div")).id=this.ID,e.innerHTML="<div class='graph-tooltip grafana-tooltip "+this.TOOLTIP_SELECTOR+"'></div>",document.body.appendChild(e)),e},enumerable:!1,configurable:!0}),e.prototype.create=function(){var e=this.root;0===this.model.opacity||this.component.nativeControl.showAnnotView?e.style.opacity="0":(e.classList.remove("above","below","no-transform"),this.model.yAlign?e.classList.add(this.model.yAlign):e.classList.add("no-transform"),this.model.body&&this.createBody(),this.setPosition())},e.prototype.setPosition=function(){var e=this.root,t=this.component.control.chart.canvas.getBoundingClientRect(),n=document.getElementsByClassName(this.TOOLTIP_SELECTOR)[0].getBoundingClientRect().width,o=this.model.caretX+n>t.width?n+2*this.model.xPadding:0;e.style.opacity="1",e.style.position="absolute",e.style.left=t.left+window.pageXOffset+this.model.caretX-o+"px",e.style.top=t.top+window.pageYOffset+this.model.caretY+"px",e.style.fontFamily=this.model._bodyFontFamily,e.style.padding=this.model.yPadding+"px "+this.model.xPadding+"px",e.style.pointerEvents="none"},e.prototype.createBody=function(){var e=this.root,t=this.component,n=this.component.store.panel.widget,o=this.model.title||[],r="";o.forEach((function(e){var t=Date.parse(e),n=a.Moment.format(t);r+='<div class="graph-tooltip-time">'+n+"</div>"})),this.sort().forEach((function(e,o){var i=e.seriesName,a=e.value,l='\n\t\t\t\t<div class="graph-tooltip-series-name">\n\t\t\t\t\t<i class="fa fa-minus" style="color:'+e.color+';"></i> '+i+":\n\t\t\t\t</div>",s=t.data.datasets.find((function(e){return e.label==i})).yAxisID==y?n.axes.leftY:n.axes.rightY,d=n.legend.decimals?n.legend.decimals:1,c=L.getFormattedValue(a,s.unit,d);r+='\n\t\t\t\t<div class="graph-tooltip-list-item">\n\t\t\t\t\t'+l+"\n\t\t\t\t\t"+('<div class="graph-tooltip-value ">'+c+"</div>")+"\n\t\t\t\t</div>"})),e.querySelector("."+this.TOOLTIP_SELECTOR).innerHTML=r},e.prototype.sort=function(){var e=this;var t=this.model.body.map((function(e){return e.lines})),n=this.component.widget.display.tooltipSortOrder,o=[];switch(t.forEach((function(t,n){var i=e.model.labelColors[n],a=r.ColorHelper.hexToRgbString(i.backgroundColor),l=t[0].lastIndexOf(":"),s=t[0].substring(0,l),d=parseFloat(e.model.dataPoints[n].value);o.push({seriesName:s,value:d,color:a})})),n){case w.Increasing:o.sort((function(e,t){return e.value-t.value}));break;case w.Decreasing:o.sort((function(e,t){return t.value-e.value}))}return o.filter((function(t){var n;return!(null===(n=e.component.display.getOverrideByLabel(t.seriesName))||void 0===n?void 0:n.hideInTooltip)}))},e}(),nt=function(){function e(){}return e.getOptions=function(e){Chart.defaults.global.defaultFontColor="#e3e3e3",Chart.defaults.global.defaultFontFamily="Roboto",Chart.defaults.global.defaultFontSize=11;var t=e.widget;return{maintainAspectRatio:!1,animation:!1,tooltips:tt.build(e),legend:{display:!1},spanGaps:!0,scales:{xAxes:[this.getAxisX(t)],yAxes:[this.getAxisY(t,!0),this.getAxisY(t,!1)]},onHover:function(t){return e.store.mouse.move(t)}}},e.getAxisX=function(e){return{id:b,type:"time",gridLines:{color:"rgba( 255,255,255, 0.1)"},ticks:{autoSkip:!0,autoSkipPadding:50,maxRotation:0,minRotation:0},time:{displayFormats:{second:"HH:mm:ss",minute:"HH:mm",hour:"HH:mm",day:"M/D HH:mm",week:"M/D",month:"M/D",year:"YYYY-M"}},display:e.axes.x.show}},e.getAxisY=function(e,t){var n=t?e.axes.leftY:e.axes.rightY;return{id:t?y:x,display:n.show,type:n.scale&&n.scale!=v.Linear?"logarithmic":"linear",gridLines:{color:"rgba( 255,255,255, 0.1)",zeroLineWidth:3},position:t?"left":"right",scaleLabel:{display:n.label,labelString:n.label},ticks:{min:n.min,max:n.max,userCallback:function(e,t,o){if(!(o.length>8)||t%2)return L.getFormattedValue(e,n.unit,n.decimals)}},stacked:e.display.stack}},e}(),ot=function(){function e(e){this.panel=e}return Object.defineProperty(e.prototype,"display",{get:function(){return this.panel.widget.display},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this.panel.widget.component.control.chart.options},enumerable:!1,configurable:!0}),e.prototype.setup=function(e){this.setupLines(e),this.setupPoints(e),this.setupNullValue(e)},e.prototype.setupLines=function(e){var t=this.getShowLines(e),n=this.getLineWidth(e),o=this.getFill(e),r=o/10;if(e.fill=o>0,e.backgroundColor=this.getLineColor(e,r),r=t&&n?1:0,e.borderColor=this.getLineColor(e,r),e.borderWidth=n,e.steppedLine=this.getStaircase(e),this.getDashes(e)){var i=this.getDashLength(e),a=this.getDashSpace(e);e.borderDash=[i,a]}else e.borderDash=void 0;e.order=this.getZIndex(e),e.legend=this.getLegend(e),e.yAxisID=1==this.getYAxis(e)?y:x},e.prototype.setupPoints=function(e){var t=this.getShowPoints(e),n=t?1:0,o=this.getLineColor(e,n);e.pointBorderColor=""+o,e.pointBackgroundColor=""+o,e.pointRadius=t?this.getPointRadius(e):0},e.prototype.setupNullValue=function(e){switch(this.display.nullValue){case S.Connected:this.options.spanGaps=!0,e.data.forEach((function(e){return e.y=e.isNull?null:e.y}));break;case S.Null:this.options.spanGaps=!1,e.data.forEach((function(e){return e.y=e.isNull?null:e.y}));break;case S.NullAsZero:this.options.spanGaps=!1,e.data.forEach((function(e){return e.y=e.isNull?0:e.y}))}},e.prototype.getShowLines=function(e){var t=this.getOverride(e);return t&&null!=t.lines?t.lines:this.display.showLines},e.prototype.getLineWidth=function(e){var t=this.getOverride(e);return t&&null!=t.lineWidth?t.lineWidth:this.display.lineWidth},e.prototype.getLineColor=function(e,t){var n,o=this.getOverride(e),i=r.ColorHelper.colors[e.index%r.ColorHelper.colors.length],a=r.ColorHelper.hexToRgbString(i,t),l=o&&null!=o.color;return l&&(n=r.ColorHelper.hexToRgbString(o.color,t)),l?n:a},e.prototype.getFill=function(e){var t=this.getOverride(e);return t&&null!=t.lineFill?t.lineFill:this.display.fill},e.prototype.getStaircase=function(e){var t=this.getOverride(e);return t&&null!=t.staircase?t.staircase:this.display.staircase},e.prototype.getDashes=function(e){var t=this.getOverride(e);return!(!t||null==t.dashes)&&t.dashes},e.prototype.getDashLength=function(e){var t=this.getOverride(e);return t&&null!=t.dashLength?t.dashLength:1},e.prototype.getDashSpace=function(e){var t=this.getOverride(e);return t&&null!=t.dashSpace?t.dashSpace:1},e.prototype.getShowPoints=function(e){var t=this.getOverride(e);return t&&null!=t.points?t.points:this.display.showPoints},e.prototype.getPointRadius=function(e){var t=this.getOverride(e);return t&&null!=t.pointRadius?t.pointRadius:this.display.pointRadius},e.prototype.getLegend=function(e){var t=this.getOverride(e);return!t||null==t.legend||t.legend},e.prototype.getZIndex=function(e){var t=this.getOverride(e);return t&&null!=t.zIndex?t.zIndex:0},e.prototype.getYAxis=function(e){var t=this.getOverride(e);return t&&null!=t.yAxis?t.yAxis:1},e.prototype.getOverride=function(e){return this.getOverrideByLabel(e.label)},e.prototype.getOverrideByLabel=function(e){return this.display.overrides.find((function(t){return t.alias&&new RegExp(t.alias).test(e)}))},e}();ot.ɵfac=function(e){return new(e||ot)(t.ɵɵinject(a.PANEL_TOKEN))},ot.ɵprov=t.ɵɵdefineInjectable({token:ot,factory:ot.ɵfac});var rt=function(){function e(e){this.dispay=e}return e.prototype.toDataSets=function(e){var t=this;if(!e||0===e.length)return[];var n=[],o=0;return e.forEach((function(e){var r=f(e.columns.slice(1).map((function(n,r){return t.toDataSet(e,r+1,o++)}))).filter((function(e){return e}));(n=f(n,r)).forEach((function(e){return t.dispay.setup(e)}))})),n},e.prototype.toDataSet=function(e,t,n){var o=e.values.map((function(e){var n=null==e[t];return{x:a.Moment.valueOf(e[0]),y:e[t],isNull:n}})),r=o.map((function(e){return e.y})).filter((function(e){return null!=e})).map((function(e){return parseFloat(e)}));if(0!=r.length){var i=r.reduce((function(e,t){return e+t}))/r.length,l=r.every((function(e){return null==e})),s=r.every((function(e){return 0==e}));return{label:this.generateDataSetName(e,t),data:o,lineTension:0,min:Math.min.apply(Math,f(r)),max:Math.max.apply(Math,f(r)),avg:i,current:r.slice(-1)[0],allNulls:l,allZeros:s,index:n,pointRadius:0,borderColor:"#ff0000"}}},e.prototype.generateDataSetName=function(e,t){var n=e.name+"."+e.columns[t],o="",r=(Object.keys(e.tags),0);for(var i in e.tags)o+=(r>0?", ":"")+i+": "+e.tags[i],r++;return o&&(n=n+" {"+o+"}"),n},e}();rt.ɵfac=function(e){return new(e||rt)(t.ɵɵinject(ot))},rt.ɵprov=t.ɵɵdefineInjectable({token:rt,factory:rt.ɵfac});var it=function(){function e(e,n,o,r,i){var a=this;this.pluginActivator=e,this.dsService=n,this.converter=o,this.time=r,this.panel=i,this.data$=new t.EventEmitter,this.timeSubs=this.time.range$.pipe(s.mergeMap((function(e){return a.pluginActivator.createDataSourceMetricsBuilder(i)})),s.mergeMap((function(e){return e.build(a.metrics,a.range)}))).subscribe((function(e){return a.pull(e)}),(function(e){return a.onError(e)}))}return Object.defineProperty(e.prototype,"metrics",{get:function(){var e,t;return null===(t=null===(e=this.panel)||void 0===e?void 0:e.widget)||void 0===t?void 0:t.metrics},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"range",{get:function(){var e,t,n=this.time.range.raw,o=null===(t=null===(e=this.panel)||void 0===e?void 0:e.widget)||void 0===t?void 0:t.time;return this.time.converter.modify(n,o)},enumerable:!1,configurable:!0}),e.prototype.destroy=function(){var e;null===(e=this.timeSubs)||void 0===e||e.unsubscribe()},e.prototype.update=function(){this.time.tick()},e.prototype.pull=function(e){var t=this;this.request=e,e&&console.log("pull: "+e),e?(this.panel.loading=!0,this.dsService.proxy(this.metrics.dataSource,e).pipe(s.finalize((function(){return t.panel.loading=!1}))).subscribe((function(e){return t.onData(e)}),(function(e){var n,o;return t.onError(null!==(o=null===(n=e.error)||void 0===n?void 0:n.details)&&void 0!==o?o:"error: todo")}))):this.onData([])},e.prototype.onData=function(e){this.panel.error=void 0,this.data$.emit({datasets:this.converter.toDataSets(e)})},e.prototype.onError=function(e){this.panel.error=e,this.data$.emit({datasets:[]})},e}();it.ɵfac=function(e){return new(e||it)(t.ɵɵinject(a.PluginActivator),t.ɵɵinject(a.DataSourceService),t.ɵɵinject(rt),t.ɵɵinject(a.TimeRangeStore),t.ɵɵinject(a.PANEL_TOKEN))},it.ɵprov=t.ɵɵdefineInjectable({token:it,factory:it.ɵfac});var at=function(){function e(e,t){this.panel=e,this.time=t,this._down=new d.BehaviorSubject(null),this.down$=this._down.asObservable(),this._up=new d.BehaviorSubject(null),this.up$=this._up.asObservable(),this.drag=new d.BehaviorSubject(null),this.drag$=this.drag.asObservable(),this.hover=new d.BehaviorSubject(null),this.hover$=this.hover.asObservable()}return Object.defineProperty(e.prototype,"component",{get:function(){var e;return null===(e=this.panel.widget)||void 0===e?void 0:e.component},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"chart",{get:function(){return this.component.control.chart},enumerable:!1,configurable:!0}),e.prototype.down=function(e){this.drag.next({start:e,end:e/*!? */}),this._down.next(e),e.target.setPointerCapture(1)},e.prototype.up=function(e){e.target.releasePointerCapture(1),this._up.next(e),e.ctrlKey||this.zoomIn(),this.drag.next(void 0),this.refresh()},e.prototype.move=function(e){this.hover.next(e);var t=this.drag.value;t&&this.drag.next({start:t.start,end:e})},e.prototype.leave=function(e){this.hover.next(void 0),this.refresh()},e.prototype.refresh=function(){this.component.control.refresh()},e.prototype.zoomIn=function(){var e=this.chart.scales.xAxis;if(this.drag.value.end){var t=this.drag.value.start.offsetX,n=this.drag.value.end.offsetX,o=Math.min(t,n),r=Math.max(t,n),i=Math.max(o,e.left),a=Math.max(e.left,Math.min(r,e.right));if(0!=Math.abs(i-a)){var l=e.getValueForPixel(i),s=e.getValueForPixel(a);Math.abs(l.diff(s,"minutes"))>=1&&this.time.zoom({from:l,to:s})}}},e}();at.ɵfac=function(e){return new(e||at)(t.ɵɵinject(a.PANEL_TOKEN),t.ɵɵinject(a.TimeRangeStore))},at.ɵprov=t.ɵɵdefineInjectable({token:at,factory:at.ɵfac});var lt=function(){function e(e,t,n,o,r,i){var a=this;this.dashboardStore=e,this.dataProvider=t,this.display=n,this.annotationStore=o,this.mouse=r,this.panel=i,this.data=new d.BehaviorSubject(null),this.data$=this.data.asObservable(),t.data$.subscribe((function(e){var t;return a.data.next(null!==(t=null==e?void 0:e.datasets)&&void 0!==t?t:[])})),this.dashboardSubs=e.dashboard$.subscribe((function(e){return a.dashboard=e})),this.annotSubs=o.annotationsUpdate$.subscribe((function(e){return a.refresh()}))}return Object.defineProperty(e.prototype,"widget",{get:function(){return this.panel.widget},enumerable:!1,configurable:!0}),e.prototype.destroy=function(){var e,t;null===(e=this.dashboardSubs)||void 0===e||e.unsubscribe(),null===(t=this.annotSubs)||void 0===t||t.unsubscribe(),this.dataProvider.destroy(),this.widget.component=void 0},e.prototype.refresh=function(){var e,t;null===(t=null===(e=this.widget.component)||void 0===e?void 0:e.control)||void 0===t||t.refresh()},e}();lt.ɵfac=function(e){return new(e||lt)(t.ɵɵinject(a.DashboardStore),t.ɵɵinject(it),t.ɵɵinject(ot),t.ɵɵinject(a.AnnotationStore),t.ɵɵinject(at),t.ɵɵinject(a.PANEL_TOKEN))},lt.ɵprov=t.ɵɵdefineInjectable({token:lt,factory:lt.ɵfac});var st=function(){function e(e){var t=this;this.store=e,this.dataSubs=e.data$.subscribe((function(e){return t.data={datasets:e}}))}return Object.defineProperty(e.prototype,"dashboardId",{get:function(){return this.store.dashboard.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"panel",{get:function(){return this.store.panel},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"widget",{get:function(){return this.store.widget},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"datasets",{get:function(){var e;return null===(e=this.data)||void 0===e?void 0:e.datasets},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"display",{get:function(){return this.store.display},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"component",{get:function(){return this.widget.component},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nativeControl",{get:function(){return this.component.control.chart},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scales",{get:function(){return this.nativeControl.scales},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"annotations",{get:function(){return this.panel.annotations},enumerable:!1,configurable:!0}),e.prototype.ngOnDestroy=function(){var e;null===(e=this.dataSubs)||void 0===e||e.unsubscribe()},e.prototype.refresh=function(){this.store.refresh()},e}();st.ɵfac=function(e){return new(e||st)(t.ɵɵdirectiveInject(lt))},st.ɵdir=t.ɵɵdefineDirective({type:st});var dt=function(){function e(e){this.store=e}return Object.defineProperty(e.prototype,"widget",{get:function(){return this.store.widget},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dashboard",{get:function(){return this.store.dashboard},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"panel",{get:function(){return this.store.panel},enumerable:!1,configurable:!0}),e.prototype.afterDatasetsDraw=function(e,t){},e.prototype.finalize=function(){},e}();dt.ɵfac=function(e){return new(e||dt)(t.ɵɵdirectiveInject(lt))},dt.ɵdir=t.ɵɵdefineDirective({type:dt});var ct=function(){function e(e){this.chart=e}return Object.defineProperty(e.prototype,"context",{get:function(){return this.chart.chart.ctx},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"canvas",{get:function(){return this.chart.canvas},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scaleY",{get:function(){return this.chart.scales.yAxisL},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scaleX",{get:function(){return this.chart.scales.xAxis},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"minY",{get:function(){return this.scaleY.top},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxY",{get:function(){return this.scaleY.bottom},enumerable:!1,configurable:!0}),e.prototype.alignPixel=function(e,t){var n=this.chart.currentDevicePixelRatio,o=t/2;return Math.round((e-o)*n)/n+o},e}(),ut=function(e){function t(t){return e.call(this,t)||this}return m(t,e),t.prototype.afterDatasetsDraw=function(e,t){var n,o;null===(o=null===(n=this.widget)||void 0===n?void 0:n.display)||void 0===o||o.thresholds.forEach((function(t){return new pt(e,t).draw()}))},t}(dt);ut.ɵfac=function(e){return new(e||ut)(t.ɵɵinject(lt))},ut.ɵprov=t.ɵɵdefineInjectable({token:ut,factory:ut.ɵfac});var pt=function(e){function t(t,n){var o=e.call(this,t)||this;return o.threshold=n,o}return m(t,e),t.prototype.draw=function(){if(null!=this.threshold.value){var e=this.chart.scales.yAxisL,t=this.chart.scales.yAxisR,n=this.chart.scales.xAxis,o=this.threshold.axis==_.Right&&t?t:e,r=o.getPixelForValue(this.threshold.value),i=this.threshold.operator==E.Gt;if(!(!i&&this.threshold.value<o.min||i&&this.threshold.value>o.max||!this.chart.data.datasets.length)){if(this.threshold.line){var a=this.getColor(!1);this.renderLine(n,a,r)}this.threshold.fill&&this.renderRectangle(n,o,r)}}},t.prototype.renderLine=function(e,t,n){this.context.beginPath(),this.context.strokeStyle=t+"99",this.context.lineWidth=2,this.context.moveTo(e.left,n),this.context.lineTo(e.right,n),this.context.stroke()},t.prototype.renderRectangle=function(e,t,n){var o=this.getColor(!0),r=this.threshold.operator==E.Gt;this.context.fillStyle=o+"22";var i=e.left,a=e.width,l=t.getPixelForValue(t.max),s=t.getPixelForValue(t.min),d=r?l:Math.max(l,n),c=r?n-t.top:t.bottom-n;c=Math.min(s-l,c),this.context.fillRect(i,d,a,c)},t.prototype.getColor=function(e){switch(this.threshold.colorType){case M.Critical:return"#ED2E18";case M.Ok:return"#10a345";case M.Warning:return"#f79520"}var t="#ffffff";return e?this.threshold.fillColor?this.threshold.fillColor:t:this.threshold.lineColor?this.threshold.lineColor:t},t}(ct),mt=function(e){function t(t){var n=e.call(this,t)||this;return n.posSubs=t.mouse.hover$.subscribe((function(e){return n.trackball=e})),n}return m(t,e),t.prototype.finalize=function(){e.prototype.finalize.call(this),this.posSubs.unsubscribe()},t.prototype.afterDatasetsDraw=function(e,t){this.trackball&&new ht(e,this.trackball).draw()},t}(dt);mt.ɵfac=function(e){return new(e||mt)(t.ɵɵinject(lt))},mt.ɵprov=t.ɵɵdefineInjectable({token:mt,factory:mt.ɵfac});var ht=function(e){function t(t,n){var o=e.call(this,t)||this;return o.trackball=n,o}return m(t,e),Object.defineProperty(t.prototype,"position",{get:function(){var e=this.canvas.getBoundingClientRect();return{x:this.trackball.clientX-e.left,y:this.trackball.clientY-e.top}},enumerable:!1,configurable:!0}),t.prototype.draw=function(){var e=this.context,t=this.position;if(!(0==this.chart.data.datasets.length||t.x<this.scaleX.left||t.x>this.scaleX.right)){var n=.8,o=this.alignPixel(t.x,n),r=this.alignPixel(this.scaleY.top,n),i=this.alignPixel(this.scaleY.bottom,n);e.beginPath(),e.strokeStyle="#880015",e.lineWidth=n,e.moveTo(o,r),e.lineTo(o,i),e.stroke()}},t}(ct),ft=function(e){function t(t){return e.call(this,t)||this}return m(t,e),t.prototype.afterDatasetsDraw=function(e,t){var n,o;null===(o=null===(n=this.widget)||void 0===n?void 0:n.display)||void 0===o||o.timeRegions.forEach((function(t){return new gt(e,t).draw()}))},t}(dt);ft.ɵfac=function(e){return new(e||ft)(t.ɵɵinject(lt))},ft.ɵprov=t.ɵɵdefineInjectable({token:ft,factory:ft.ɵfac});var gt=function(e){function t(t,n){var o=e.call(this,t)||this;return o.timeRegion=n,o}return m(t,e),t.prototype.draw=function(){var e=this,t=this.chart.scales.xAxis,n=a.Moment.create(t.min),o=a.Moment.create(t.max);this.getSpans(n,o).forEach((function(n){var o=t.getPixelForValue(n.start.toDate()),r=t.getPixelForValue(n.end.toDate());r<t.left||o>t.right||(o=Math.max(o,t.left),r=Math.min(r,t.right),e.renderRegion(o,r))}))},t.prototype.getSpans=function(e,t){var n=this.getSpanBorders(e,t),o=this.getTime();return this.isSpecificDayOfWeek()?this.getSpansDayOfWeek(n,o):this.getSpansAny(n,o)},t.prototype.getTime=function(){var e=this.isSpecificDayOfWeek(),t=this.timeRegion.fromTime,n=this.timeRegion.toTime,o="HH:mm",r=a.Moment.create(t,o),i=a.Moment.create(n,o);if(r.isValid()||i.isValid())r.isValid()&&!i.isValid()?i=r.clone():!r.isValid()&&i.isValid()&&(r=i.clone());else if(e){var l=a.Moment.create("00:00",o);r=l.clone(),i=l.clone()}return{from:r.isValid()?r.toDate():void 0,to:i.isValid()?i.toDate():void 0}},t.prototype.getSpansDayOfWeek=function(e,t){for(var n=e.to,o=e.from.clone(),r=[],i=this.timeRegion.fromDay,a=this.timeRegion.toDay;o<n;){var l=o.clone().day(i),s=l.clone().day(a);s.isBefore(l)&&s.add(1,"weeks"),l.set({hour:t.from.getHours(),minute:t.from.getMinutes()}),s.set({hour:t.to.getHours(),minute:t.to.getMinutes()}),r.push({start:l,end:s}),o.add(1,"weeks")}return r},t.prototype.getSpansAny=function(e,t){var n=e.to,o=e.from.clone(),r=[];if(!t.from&&!t.to)return r;for(;o<n;){var i=o.clone().set({hour:t.from.getHours(),minute:t.from.getMinutes()}),a=o.clone().set({hour:t.to.getHours(),minute:t.to.getMinutes()});a.isBefore(i)&&a.add(1,"days"),r.push({start:i,end:a}),o.add(1,"days")}return r},t.prototype.getSpanBorders=function(e,t){var n=this.isSpecificDayOfWeek()?8:1;return{from:e.clone().subtract(n,"days").startOf("day"),to:t.clone().add(n,"days").endOf("day")}},t.prototype.isSpecificDayOfWeek=function(){return this.timeRegion.fromDay!=O.Any||this.timeRegion.toDay!=O.Any},t.prototype.renderRegion=function(e,t){var n=this.chart.scales.yAxisL,o=this.chart.scales.xAxis,r=n.top,i=n.bottom;this.timeRegion.line&&(o.left!=e&&this.renderLine(r,i,e),o.right!=t&&t!=e&&this.renderLine(r,i,t)),this.timeRegion.fill&&t!=e&&this.renderRectangle(r,i,e,t)},t.prototype.renderLine=function(e,t,n){var o=this.getColor(!1);this.context.beginPath(),this.context.strokeStyle=o+"99",this.context.lineWidth=2,this.context.moveTo(n,e),this.context.lineTo(n,t),this.context.stroke()},t.prototype.renderRectangle=function(e,t,n,o){var r=this.getColor(!0);this.context.fillStyle=r+"22";var i=n,a=o-n,l=e,s=t-e;this.context.fillRect(i,l,a,s)},t.prototype.getColor=function(e){switch(this.timeRegion.colorType){case P.Red:return"#ED2E18";case P.Green:return"#10a345";case P.Blue:return"#1f78c1";case P.Yellow:return"#f79520";case P.Gray:return"#fce2de"}var t="#ffffff";return e?this.timeRegion.fillColor?this.timeRegion.fillColor:t:this.timeRegion.lineColor?this.timeRegion.lineColor:t},t}(ct),vt=function(e){function t(t){return e.call(this,t)||this}return m(t,e),t.prototype.afterDatasetsDraw=function(e,t){var n,o,r=null===(o=null===(n=this.widget)||void 0===n?void 0:n.alert)||void 0===o?void 0:o.conditions;(null==r?void 0:r.length)&&new bt(e,r[0].evaluator).draw()},t}(dt);vt.ɵfac=function(e){return new(e||vt)(t.ɵɵinject(lt))},vt.ɵprov=t.ɵɵdefineInjectable({token:vt,factory:vt.ɵfac});var bt=function(e){function t(t,n){var o=e.call(this,t)||this;return o.evaluator=n,o}return m(t,e),t.prototype.draw=function(){var e=this.scaleY.getPixelForValue(+this.evaluator.params[0]),t=this.scaleY.getPixelForValue(+this.evaluator.params[1]),n=this.scaleY.getPixelForValue(this.scaleY.max),o=this.scaleY.getPixelForValue(this.scaleY.min);switch(+this.evaluator.type){case a.AlertEvalType.IsAbove:n>e||o<e||(this.renderLine(e),this.renderRectangle(e,!0));break;case a.AlertEvalType.IsBelow:n>e||o<e||(this.renderLine(e),this.renderRectangle(e,!1));break;case a.AlertEvalType.IsWithinRange:n>e||o<e||n>t||o<t||(this.renderLine(e),this.renderLine(t),this.renderRectangleBetween(e,t));break;case a.AlertEvalType.IsOutsideRange:n>e||o<e||n>t||o<t||(this.renderLine(e),this.renderLine(t),this.renderRectangle(e,!1),this.renderRectangle(t,!0))}},t.prototype.renderLine=function(e){this.context.beginPath(),this.context.strokeStyle=t.LINE_COLOR,this.context.lineWidth=2,this.context.moveTo(this.scaleX.left,e),this.context.lineTo(this.scaleX.right,e),this.context.stroke()},t.prototype.renderRectangle=function(e,n){this.context.fillStyle=t.FILL_COLOR;var o=this.scaleX.left,r=this.scaleX.width,i=this.scaleY.getPixelForValue(this.scaleY.max),a=this.scaleY.getPixelForValue(this.scaleY.min),l=n?i:Math.max(i,e),s=n?e-this.scaleY.top:this.scaleY.bottom-e;s=Math.min(a-i,s),this.context.fillRect(o,l,r,s)},t.prototype.renderRectangleBetween=function(e,n){this.context.fillStyle=t.FILL_COLOR;var o=this.scaleX.left,r=this.scaleX.width;this.context.fillRect(o,e,r,n-e)},t}(ct);bt.LINE_COLOR=r.ColorHelper.hexToRgbString(r.ColorHelper.ALERTING_COLOR,.6),bt.FILL_COLOR=r.ColorHelper.hexToRgbString(r.ColorHelper.ALERTING_COLOR,r.ColorHelper.REGION_FILL_ALPHA);var yt=function(e){function t(t){return e.call(this,t)||this}return m(t,e),t.prototype.afterDatasetsDraw=function(e,t){var n,o=this;(null===(n=e.data.datasets)||void 0===n?void 0:n.length)&&this.panel.annotations.forEach((function(t){return new xt(e,o.widget,o.dashboard,t).draw()}))},t}(dt);yt.ɵfac=function(e){return new(e||yt)(t.ɵɵinject(lt))},yt.ɵprov=t.ɵɵdefineInjectable({token:yt,factory:yt.ɵfac});var xt=function(e){function t(t,n,o,r){var i=e.call(this,t)||this;return i.widget=n,i.dashboard=o,i.annotation=r,i}return m(t,e),t.prototype.draw=function(){this.annotation.alert&&!this.widget.alert||(this.annotation.timeEnd?this.renderRegionAnnotation():this.renderLineAnnotation())},Object.defineProperty(t.prototype,"color",{get:function(){var e,t,n;if(this.annotation.alert){var o=this.annotation.alert;switch(a.AlertState[o.currentState]){case a.AlertState.Alerting:return r.ColorHelper.ALERTING_COLOR;case a.AlertState.Ok:return r.ColorHelper.OK_COLOR;case a.AlertState.Pending:case a.AlertState.NoData:return r.ColorHelper.PENDING_COLOR}}return null!==(n=null===(t=null===(e=this.dashboard.data)||void 0===e?void 0:e.annotationRules[this.annotation.ruleIndex])||void 0===t?void 0:t.color)&&void 0!==n?n:r.ColorHelper.DEFAULT_ANNOTATION_COLOR},enumerable:!1,configurable:!0}),t.prototype.renderLineAnnotation=function(){var e=a.Moment.toDate(this.annotation.time),t=this.scaleX.getPixelForValue(e);t<this.scaleX.left||t>this.scaleX.right||this.renderLine(t,this.color)},t.prototype.renderLine=function(e,t){var n=.8,o=this.context,r=this.alignPixel(e,n),i=this.alignPixel(this.minY,n),a=this.alignPixel(this.maxY,n);o.beginPath(),o.strokeStyle=o.fillStyle=t,o.lineWidth=n,o.setLineDash([3,2]),o.moveTo(r,i),o.lineTo(r,a),o.stroke(),o.beginPath(),o.moveTo(r,a),o.lineTo(r+5,a+5),o.lineTo(r-5,a+5),o.lineTo(r,a),o.closePath(),o.setLineDash([]),o.fill(),this.annotation.rect={x1:e-5,y1:this.maxY,x2:e+5,y2:this.maxY+5}},t.prototype.renderRegionAnnotation=function(){var e=a.Moment.toDate(this.annotation.time),t=a.Moment.toDate(this.annotation.timeEnd),n=this.scaleX.getPixelForValue(e),o=this.scaleX.getPixelForValue(t);o<this.scaleX.left||n>this.scaleX.right||(n=Math.max(n,this.scaleX.left),o=Math.max(this.scaleX.left,Math.min(o,this.scaleX.right)),this.renderRegion(n,o,this.color))},t.prototype.renderRegion=function(e,t,n){var o=.8,r=this.alignPixel(e,o),i=this.alignPixel(t,o),a=this.alignPixel(this.minY,o),l=this.alignPixel(this.maxY,o),s=this.context;s.strokeStyle=n,s.fillStyle="#00d3ff20",s.lineWidth=o,s.setLineDash([3,2]),s.beginPath(),s.moveTo(r,a),s.lineTo(r,l),s.stroke(),s.moveTo(i,a),s.lineTo(i,l),s.stroke(),s.fillRect(r,a,i-r,l-a),s.fillStyle=n,s.fillRect(r,l,i-r,5),s.setLineDash([]),s.closePath(),this.annotation.rect={x1:Math.min(e,t),y1:this.maxY,x2:Math.max(t,e),y2:this.maxY+5}},t}(ct),Ct=function(e){function t(t){var n=e.call(this,t)||this;return n.posSubs=t.mouse.drag$.subscribe((function(e){return n.region=e})),n}return m(t,e),t.prototype.finalize=function(){e.prototype.finalize.call(this),this.posSubs.unsubscribe()},t.prototype.afterDatasetsDraw=function(e,t){this.region&&this.region.start&&this.region.end&&new wt(e,this.region).draw()},t}(dt);Ct.ɵfac=function(e){return new(e||Ct)(t.ɵɵinject(lt))},Ct.ɵprov=t.ɵɵdefineInjectable({token:Ct,factory:Ct.ɵfac});var wt=function(e){function t(t,n){var o=e.call(this,t)||this;return o.region=n,o}return m(t,e),t.prototype.draw=function(){var e=Math.max(this.region.start.offsetX,this.scaleX.left),t=Math.max(this.scaleX.left,Math.min(this.region.end.offsetX,this.scaleX.right));this.renderRectangle(e,t)},t.prototype.renderRectangle=function(e,t){var n=this.context,o="#ffffff";n.fillStyle=o+"22",n.strokeStyle=o+"30";var r=e,i=t-e,a=this.minY,l=this.maxY-this.minY;n.beginPath(),n.setLineDash([]),n.fillRect(r,a,i,l),n.rect(r,a,i,l),n.stroke()},t}(ct),St=function(){function e(e,t,n,o,r,i){this.thresholds=e,this.trackball=t,this.timeRegions=n,this.alerts=o,this.annotations=r,this.drag=i}return Object.defineProperty(e.prototype,"list",{get:function(){return[this.thresholds,this.timeRegions,this.alerts,this.annotations,this.trackball,this.drag]},enumerable:!1,configurable:!0}),e.prototype.destroy=function(){this.list.forEach((function(e){return e.finalize()}))},e}();function Et(e,n){1&e&&t.ɵɵelement(0,"alert-handle")}function Mt(e,n){1&e&&t.ɵɵelement(0,"chart-legend",8)}function _t(e,n){1&e&&t.ɵɵelement(0,"chart-legend",9)}St.ɵfac=function(e){return new(e||St)(t.ɵɵinject(ut),t.ɵɵinject(mt),t.ɵɵinject(ft),t.ɵɵinject(vt),t.ɵɵinject(yt),t.ɵɵinject(Ct))},St.ɵprov=t.ɵɵdefineInjectable({token:St,factory:St.ɵfac});var It=function(e){function t(t,n){var o=e.call(this,t)||this;return o.plugins=n,o.showAlertHandle=!1,o.options=nt.getOptions(o),o}return m(t,e),t.prototype.ngAfterViewInit=function(){this.widget.component=this},t.prototype.ngOnDestroy=function(){this.store.destroy(),this.plugins.destroy()},t}(st);It.ɵfac=function(e){return new(e||It)(t.ɵɵdirectiveInject(lt),t.ɵɵdirectiveInject(St))},It.ɵcmp=t.ɵɵdefineComponent({type:It,selectors:[["widget"]],viewQuery:function(e,n){var o;(1&e&&t.ɵɵviewQuery(u.UIChart,!0),2&e)&&(t.ɵɵqueryRefresh(o=t.ɵɵloadQuery())&&(n.control=o.first))},features:[t.ɵɵProvidersFeature([it,rt,ot,lt,at,St,mt,ut,ft,vt,yt,Ct]),t.ɵɵInheritDefinitionFeature],decls:9,vars:6,consts:[[1,"chart__wrapper"],[1,"chart__right-legend-cont"],[1,"chart__canvas-cont"],["type","line","height","100%",3,"data","options","plugins","mousedown","mouseup","mouseleave"],["chart",""],[4,"ngIf"],["class","chart__legend-right",4,"ngIf"],["class","chart__legend-bottom",4,"ngIf"],[1,"chart__legend-right"],[1,"chart__legend-bottom"]],template:function(e,n){1&e&&(t.ɵɵelementStart(0,"div",0),t.ɵɵelementStart(1,"div",1),t.ɵɵelementStart(2,"div",2),t.ɵɵelementStart(3,"p-chart",3,4),t.ɵɵlistener("mousedown",(function(e){return n.store.mouse.down(e)}))("mouseup",(function(e){return n.store.mouse.up(e)}))("mouseleave",(function(e){return n.store.mouse.leave(e)})),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵtemplate(5,Et,1,0,"alert-handle",5),t.ɵɵtemplate(6,Mt,1,0,"chart-legend",6),t.ɵɵelementEnd(),t.ɵɵtemplate(7,_t,1,0,"chart-legend",7),t.ɵɵelementEnd(),t.ɵɵelement(8,"annotation-dispatcher")),2&e&&(t.ɵɵadvance(3),t.ɵɵproperty("data",n.data)("options",n.options)("plugins",n.plugins.list),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",n.showAlertHandle&&(null==n.widget?null:n.widget.alert)),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",(null==n.widget?null:n.widget.legend.show)&&(null==n.widget||null==n.widget.legend?null:n.widget.legend.right)),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",(null==n.widget?null:n.widget.legend.show)&&!(null!=n.widget&&(null!=n.widget.legend&&n.widget.legend.right))))},styles:[".hide-text{background-color:transparent;border:0;color:transparent;font:0/0 a;text-shadow:none}.input-block-level{box-sizing:border-box;display:block;min-height:18px;width:100%}.animate-height{max-height:0;overflow:hidden}.animate-height--open{max-height:1000px;overflow:auto;transition:max-height .25s ease-in-out}.chart__wrapper{display:flex;flex-direction:column;height:100%;min-height:0;position:relative}.chart__right-legend-cont{cursor:crosshair;display:flex;flex:1;min-height:0;min-width:0}.chart__canvas-cont{flex:1;min-height:0;min-width:0;padding-left:5px}.chart__legend-bottom{flex:0 1 auto;flex-wrap:wrap;max-height:35%;overflow:hidden;padding-top:6px;position:relative}.chart__legend-right{flex:0 1 10px}.graph-tooltip{background-color:#141414;color:#d8d9da;font-size:12px;white-space:nowrap}.graph-tooltip .graph-tooltip-time{color:#d8d9da;font-weight:700;padding:.2rem;position:relative;text-align:center;top:-3px}.graph-tooltip .graph-tooltip-list-item{display:table-row}.graph-tooltip .graph-tooltip-list-item--highlight{color:#ececec;font-weight:700}.graph-tooltip .graph-tooltip-series-name{display:table-cell;max-width:650px;overflow:hidden;padding:.15rem;text-overflow:ellipsis}.graph-tooltip .graph-tooltip-value{display:table-cell;font-weight:700;padding-left:15px;text-align:right}.grafana-tooltip{border-radius:5px;font-weight:200;line-height:14px;max-height:600px;max-width:800px;overflow:hidden;padding:10px;position:absolute;z-index:9999}.grafana-tooltip a{color:#e3e3e3}"],encapsulation:2});var Pt=["handle"],Ot=["wrapper"],Dt=function(e){return{"top.px":e}};function At(e,n){if(1&e){var o=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"div",10),t.ɵɵlistener("mousedown",(function(e){return t.ɵɵrestoreView(o),t.ɵɵnextContext().onGripClick(e,2)})),t.ɵɵelement(1,"div",11),t.ɵɵelementStart(2,"div",6),t.ɵɵelement(3,"i",7),t.ɵɵelementStart(4,"span",8),t.ɵɵtext(5),t.ɵɵelement(6,"i",9),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementEnd()}if(2&e){var r=t.ɵɵnextContext();t.ɵɵproperty("ngStyle",t.ɵɵpureFunction1(2,Dt,r.pixel2)),t.ɵɵadvance(5),t.ɵɵtextInterpolate(r.evaluatorParam2)}}var kt=function(e){function t(t){return e.call(this,t)||this}return m(t,e),Object.defineProperty(t.prototype,"handleMidHeight",{get:function(){return 14},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scale",{get:function(){return this.chartControl.scales.yAxisL},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"evaluator",{get:function(){var e,t=null===(e=this.alert)||void 0===e?void 0:e.conditions;return t?t[0].evaluator:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"evaluatorParam1",{get:function(){var e;return null===(e=null==this?void 0:this.evaluator)||void 0===e?void 0:e.params[0]},set:function(e){this.evaluator&&(this.evaluator.params[0]=e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"evaluatorParam2",{get:function(){var e;return null===(e=null==this?void 0:this.evaluator)||void 0===e?void 0:e.params[1]},set:function(e){this.evaluator&&(this.evaluator.params[1]=e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pixel1",{get:function(){return this.getPixel(this.evaluatorParam1)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pixel2",{get:function(){return this.getPixel(this.evaluatorParam2)},enumerable:!1,configurable:!0}),t.prototype.getPixel=function(e){var t;if(this.scale){var n=Math.max(this.scale.min,e);return n=Math.min(this.scale.max,n),(null===(t=this.scale)||void 0===t?void 0:t.getPixelForValue(n))-this.handleMidHeight}},Object.defineProperty(t.prototype,"showSecondHandle",{get:function(){var e;switch(+(null===(e=this.evaluator)||void 0===e?void 0:e.type)){case a.AlertEvalType.IsWithinRange:case a.AlertEvalType.IsOutsideRange:return!0}return!1},enumerable:!1,configurable:!0}),t.prototype.onGripClick=function(e,t){var n=this;e.preventDefault();var o=this.wrapper.nativeElement.getBoundingClientRect().top+window.scrollY+e.offsetY;this.resizeFuncHandler=function(e){e.preventDefault(),this.calculateValueForPixel(e.clientY-o,t),this.refresh()}.bind(this),this.stopResizeFuncHandler=function(e){window.removeEventListener("mousemove",n.resizeFuncHandler,!0),window.removeEventListener("mouseup",n.stopResizeFuncHandler,!0)}.bind(this),window.addEventListener("mousemove",this.resizeFuncHandler,!0),window.addEventListener("mouseup",this.stopResizeFuncHandler,!0)},t.prototype.calculateValueForPixel=function(e,t){var n=this.scale.getPixelForValue(this.scale.min)-this.handleMidHeight,o=-this.handleMidHeight,r=Math.min(n,Math.max(o,e)),i=this.scale.getValueForPixel(r+this.handleMidHeight),a=this.round(i);1==t?this.evaluatorParam1=a:this.evaluatorParam2=a},t.prototype.round=function(e){var t=this.countDecimals(this.scale.max),n=this.countDecimals(this.scale.min);return+e.toFixed(Math.max(t,n))},t.prototype.countDecimals=function(e){return Math.floor(e)===e?0:e.toString().split(".")[1].length||0},t}(g);function Tt(e,n){1&e&&(t.ɵɵelementStart(0,"span"),t.ɵɵtext(1,"Add Annotation"),t.ɵɵelementEnd())}function Nt(e,n){1&e&&(t.ɵɵelementStart(0,"span"),t.ɵɵtext(1,"Edit Annotation"),t.ɵɵelementEnd())}function Ft(e,n){if(1&e){var o=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"button",12),t.ɵɵlistener("click",(function(){return t.ɵɵrestoreView(o),t.ɵɵnextContext().onDelete()})),t.ɵɵtext(1,"Delete"),t.ɵɵelementEnd()}}kt.ɵfac=function(e){return new(e||kt)(t.ɵɵdirectiveInject(a.PANEL_TOKEN))},kt.ɵcmp=t.ɵɵdefineComponent({type:kt,selectors:[["alert-handle"]],viewQuery:function(e,n){var o;(1&e&&(t.ɵɵviewQuery(Pt,!0),t.ɵɵviewQuery(Ot,!0)),2&e)&&(t.ɵɵqueryRefresh(o=t.ɵɵloadQuery())&&(n.handle=o.first),t.ɵɵqueryRefresh(o=t.ɵɵloadQuery())&&(n.wrapper=o.first))},features:[t.ɵɵInheritDefinitionFeature],decls:11,vars:5,consts:[[1,"alert-wrapper","mr-3"],["wrapper",""],["class","alert-handle ed-flex ml-3",3,"ngStyle","mousedown",4,"ngIf"],[1,"alert-handle","ed-flex",3,"ngStyle","mousedown"],["handle",""],[1,"alert-handle-line"],[1,"alert-handle"],[1,"icon-gf","icon-gf-critical","alert-state-critical"],[1,"alert-handle-value"],[1,"alert-handle-grip"],[1,"alert-handle","ed-flex","ml-3",3,"ngStyle","mousedown"],[1,"alert-handle-line2"]],template:function(e,n){1&e&&(t.ɵɵelementStart(0,"div",0,1),t.ɵɵtemplate(2,At,7,4,"div",2),t.ɵɵelementStart(3,"div",3,4),t.ɵɵlistener("mousedown",(function(e){return n.onGripClick(e,1)})),t.ɵɵelement(5,"div",5),t.ɵɵelementStart(6,"div",6),t.ɵɵelement(7,"i",7),t.ɵɵelementStart(8,"span",8),t.ɵɵtext(9),t.ɵɵelement(10,"i",9),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(2),t.ɵɵproperty("ngIf",n.showSecondHandle),t.ɵɵadvance(1),t.ɵɵproperty("ngStyle",t.ɵɵpureFunction1(3,Dt,n.pixel1)),t.ɵɵadvance(6),t.ɵɵtextInterpolate(n.evaluatorParam1))},directives:[o.NgIf,o.NgStyle],styles:['.alert-wrapper[_ngcontent-%COMP%]{height:100%}.alert-handle-line[_ngcontent-%COMP%], .alert-handle-line2[_ngcontent-%COMP%]{background-color:rgba(237,46,24,.6);height:2px;margin-left:-20px;position:relative;width:20px;z-index:0}.alert-handle-line2[_ngcontent-%COMP%]{margin-left:-129px;width:129px}.alert-handle[_ngcontent-%COMP%]{background:linear-gradient(135deg,#2f2f32,#262628);border-radius:4px;box-shadow:-1px -1px 0 0 hsla(0,0%,100%,.1),1px 1px 0 0 rgba(0,0,0,.3);color:#8e8e8e;cursor:move;float:right;font-size:12px;position:relative;text-align:left;width:100px;z-index:10}.alert-handle[_ngcontent-%COMP%]:hover{background-color:#303032}.alert-handle[_ngcontent-%COMP%]   .icon-gf[_ngcontent-%COMP%]{border-right:1px solid #333;float:left;font-size:14px;padding:.5rem .3rem .4rem .4rem;position:relative;top:0}.alert-handle-value[_ngcontent-%COMP%]{border-left:1px solid #1f1f20;line-height:2rem;padding:.5rem}.alert-handle-value[_ngcontent-%COMP%]   .alert-handle-grip[_ngcontent-%COMP%]{background:url("data:image/svg+xml,%3C%3Fxml version%3D%221.0%22 encoding%3D%22utf-8%22%3F%3E%3C!-- Generated by IcoMoon.io --%3E%3C!DOCTYPE svg PUBLIC %22-%2F%2FW3C%2F%2FDTD SVG 1.1%2F%2FEN%22 %22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg version%3D%221.1%22 xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22 xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22 width%3D%2212%22 height%3D%2232%22 viewBox%3D%220 0 12 32%22%3E%3Cg id%3D%22icomoon-ignore%22%3E%3C%2Fg%3E%3Cpath d%3D%22M0 2h4v4h-4v-4z%22 fill%3D%22%23414141%22%3E%3C%2Fpath%3E%3Cpath d%3D%22M0 10h4v4h-4v-4z%22 fill%3D%22%23414141%22%3E%3C%2Fpath%3E%3Cpath d%3D%22M0 18h4v4h-4v-4z%22 fill%3D%22%23414141%22%3E%3C%2Fpath%3E%3Cpath d%3D%22M0 26h4v4h-4v-4z%22 fill%3D%22%23414141%22%3E%3C%2Fpath%3E%3Cpath d%3D%22M8 2h4v4h-4v-4z%22 fill%3D%22%23414141%22%3E%3C%2Fpath%3E%3Cpath d%3D%22M8 10h4v4h-4v-4z%22 fill%3D%22%23414141%22%3E%3C%2Fpath%3E%3Cpath d%3D%22M8 18h4v4h-4v-4z%22 fill%3D%22%23414141%22%3E%3C%2Fpath%3E%3Cpath d%3D%22M8 26h4v4h-4v-4z%22 fill%3D%22%23414141%22%3E%3C%2Fpath%3E%3C%2Fsvg%3E") no-repeat 50% 50%;background-size:8px;float:right;height:2rem;margin-right:2px;width:1rem}.alert-state-critical[_ngcontent-%COMP%]{color:#ed2e18}']});var Lt=function(e){function n(n,o,r){var i=e.call(this,n)||this;return i.store=n,i.annotService=o,i.time=r,i.close=new t.EventEmitter,i}return m(n,e),n.prototype.ngOnInit=function(){this.annotation||(this.annotation=a.Annotation.create(this.epochStart,this.epochEnd),this.annotations.push(this.annotation),this.refresh()),this.timeLabel=this.time.converter.toDateTimeString(this.annotation.time)},n.prototype.ngOnDestroy=function(){this.panel.annotations=this.annotations.filter((function(e){return e.id})),this.refresh()},n.prototype.onSave=function(){this.annotation.id?this.onUpdate():this.onCreate()},n.prototype.onCreate=function(){var e=this;this.annotation.panelId=this.panel.id,this.annotation.dashboardId=this.dashboardId,delete this.annotation.rect,this.annotService.create(this.annotation).pipe(s.finalize((function(){return e.close.emit()}))).subscribe((function(t){r.Notes.success(t.message),e.store.annotationStore.update()}),(function(e){var t,n;return r.Notes.error(null!==(n=null===(t=e.error)||void 0===t?void 0:t.message)&&void 0!==n?n:r.ErrorMessages.BAD_CREATE_ANN)}))},n.prototype.onUpdate=function(){var e,t=this,n={time:this.annotation.time,timeEnd:this.annotation.timeEnd,text:this.annotation.text,tags:f(this.annotation.tags),alertId:null===(e=this.annotation.alert)||void 0===e?void 0:e.id};this.annotService.update(this.annotation.id,n).pipe(s.finalize((function(){return t.close.emit()}))).subscribe((function(e){r.Notes.success(e.message),t.store.annotationStore.update()}),(function(e){var t,n;return r.Notes.error(null!==(n=null===(t=e.error)||void 0===t?void 0:t.message)&&void 0!==n?n:r.ErrorMessages.BAD_UPDATE_ANN)}))},n.prototype.onDelete=function(){var e=this;this.annotService.remove(this.annotation.id).pipe(s.finalize((function(){return e.close.emit()}))).subscribe((function(t){r.Notes.success(t.message),e.store.annotationStore.update()}),(function(e){var t,n;return r.Notes.error(null!==(n=null===(t=e.error)||void 0===t?void 0:t.message)&&void 0!==n?n:r.ErrorMessages.BAD_DELETE_ANN)}))},n}(st);function Rt(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",11),t.ɵɵelement(1,"ed-avatar",12),t.ɵɵelementEnd()),2&e){var o=t.ɵɵnextContext();t.ɵɵpropertyInterpolate1("edHint","Created by ",o.annotation.userName,""),t.ɵɵadvance(1),t.ɵɵproperty("key",o.annotation.userName)}}function jt(e,n){if(1&e&&(t.ɵɵelementStart(0,"span",13),t.ɵɵelement(1,"i",13),t.ɵɵtext(2),t.ɵɵelementEnd()),2&e){var o=t.ɵɵnextContext();t.ɵɵproperty("ngClass",o.AlertHelperRef.getStateClass(o.annotation.alert.currentState)),t.ɵɵadvance(1),t.ɵɵproperty("ngClass",o.AlertHelperRef.getStateIconClass(o.annotation.alert.currentState)),t.ɵɵadvance(1),t.ɵɵtextInterpolate1(" ",o.annotation.alert.currentState," ")}}function Vt(e,n){if(1&e&&(t.ɵɵelementStart(0,"span"),t.ɵɵtext(1),t.ɵɵelementEnd()),2&e){var o=t.ɵɵnextContext();t.ɵɵadvance(1),t.ɵɵtextInterpolate(o.AlertHelperRef.getInfo(o.annotation.alert))}}function Ht(e,n){if(1&e&&t.ɵɵelement(0,"ed-tag",14),2&e){var o=n.$implicit;t.ɵɵproperty("text",o)("canRemove",!1)}}Lt.ɵfac=function(e){return new(e||Lt)(t.ɵɵdirectiveInject(lt),t.ɵɵdirectiveInject(a.AnnotationService),t.ɵɵdirectiveInject(a.TimeRangeStore))},Lt.ɵcmp=t.ɵɵdefineComponent({type:Lt,selectors:[["edit-annotation"]],inputs:{epochStart:"epochStart",epochEnd:"epochEnd",annotation:"annotation"},outputs:{close:"close"},features:[t.ɵɵInheritDefinitionFeature],decls:16,vars:6,consts:[[1,"graph-annotation"],[1,"graph-annotation__header"],[1,"graph-annotation__title"],[4,"ngIf"],[1,"graph-annotation__time"],[1,"graph-annotation__body","text-center"],["label","Description","labelWidth","7","width","23","placeholder","Description","rows","2",3,"ngModel","ngModelChange"],["label","Tags","labelWidth","7",3,"ngModel","ngModelChange"],[1,"gf-form-button-row"],[1,"btn","btn-success",3,"click"],["class","btn btn-danger",3,"click",4,"ngIf"],[1,"btn-text",3,"click"],[1,"btn","btn-danger",3,"click"]],template:function(e,n){1&e&&(t.ɵɵelementStart(0,"div",0),t.ɵɵelementStart(1,"div",1),t.ɵɵelementStart(2,"div",2),t.ɵɵtemplate(3,Tt,2,0,"span",3),t.ɵɵtemplate(4,Nt,2,0,"span",3),t.ɵɵelementEnd(),t.ɵɵelementStart(5,"div",4),t.ɵɵtext(6),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementStart(7,"div",5),t.ɵɵelementStart(8,"ed-textarea",6),t.ɵɵlistener("ngModelChange",(function(e){return n.annotation.text=e})),t.ɵɵelementEnd(),t.ɵɵelementStart(9,"ed-tagbox",7),t.ɵɵlistener("ngModelChange",(function(e){return n.annotation.tags=e})),t.ɵɵelementEnd(),t.ɵɵelementStart(10,"div",8),t.ɵɵelementStart(11,"button",9),t.ɵɵlistener("click",(function(){return n.onSave()})),t.ɵɵtext(12,"Save"),t.ɵɵelementEnd(),t.ɵɵtemplate(13,Ft,2,0,"button",10),t.ɵɵelementStart(14,"a",11),t.ɵɵlistener("click",(function(){return n.close.emit()})),t.ɵɵtext(15,"Cancel"),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(3),t.ɵɵproperty("ngIf",!n.annotation.id),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",n.annotation.id),t.ɵɵadvance(2),t.ɵɵtextInterpolate(n.timeLabel),t.ɵɵadvance(2),t.ɵɵproperty("ngModel",n.annotation.text),t.ɵɵadvance(1),t.ɵɵproperty("ngModel",n.annotation.tags),t.ɵɵadvance(4),t.ɵɵproperty("ngIf",null==n.annotation?null:n.annotation.id))},directives:[o.NgIf,r.TextAreaComponent,i.NgControlStatus,i.NgModel,r.TagBoxComponent],styles:[".graph-annotation .label-tag{margin-right:4px;margin-top:8px}.graph-annotation .graph-annotation__header{align-items:center;background-color:#333;display:flex;padding:6px 10px}.graph-annotation .graph-annotation__title{display:inline-block;flex-grow:1;font-weight:500;overflow:hidden;padding-right:1rem;text-overflow:ellipsis;white-space:nowrap}.graph-annotation .graph-annotation__title.alert{text-transform:uppercase}.graph-annotation .graph-annotation__edit-icon{padding-left:1rem}.graph-annotation .graph-annotation__time{color:#8e8e8e;display:inline-block;font-style:italic;font-weight:400;position:relative;top:1px}.graph-annotation .graph-annotation__body{padding:.65rem}.graph-annotation .graph-annotation__body.hint{max-width:20rem}.graph-annotation .graph-annotation__user img{border-radius:50%;height:16px;width:16px}.graph-annotation a[href]{color:#33b5e5;text-decoration:underline}"],encapsulation:2});var qt=function(e){function n(n,o,i){var l=e.call(this,n,o,i)||this;return l.edit=new t.EventEmitter,l.overPopup=!1,l.TagColorHelperRef=r.TagColorHelper,l.AlertHelperRef=a.AlertHelper,l}return m(n,e),n.prototype.onMouseEnter=function(){this.overPopup=!0,this.annotation.overRoot=!1,this.annotation.overPopup=!0},n.prototype.onMouseLeave=function(){var e=this;this.overPopup=!1,setTimeout((function(){e.overPopup||(e.annotation.overPopup=!1)}),300)},n}(Lt);function Wt(e,n){if(1&e){var o=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"edit-annotation",5),t.ɵɵlistener("close",(function(){return t.ɵɵrestoreView(o),t.ɵɵnextContext().showAddAnnot=!1})),t.ɵɵelementEnd()}if(2&e){var r=t.ɵɵnextContext();t.ɵɵproperty("epochStart",r.epochStart)("epochEnd",r.epochEnd)}}function Bt(e,n){if(1&e){var o=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"edit-annotation",6),t.ɵɵlistener("close",(function(){return t.ɵɵrestoreView(o),t.ɵɵnextContext().showEditAnnot=!1})),t.ɵɵelementEnd()}if(2&e){var r=t.ɵɵnextContext();t.ɵɵproperty("annotation",r.annotation)}}function Yt(e,n){if(1&e){var o=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"annotation-hint",7),t.ɵɵlistener("edit",(function(){return t.ɵɵrestoreView(o),t.ɵɵnextContext().onEditAnnotation()})),t.ɵɵelementEnd()}if(2&e){var r=t.ɵɵnextContext();t.ɵɵproperty("annotation",r.annotation)}}qt.ɵfac=function(e){return new(e||qt)(t.ɵɵdirectiveInject(lt),t.ɵɵdirectiveInject(a.AnnotationService),t.ɵɵdirectiveInject(a.TimeRangeStore))},qt.ɵcmp=t.ɵɵdefineComponent({type:qt,selectors:[["annotation-hint"]],outputs:{edit:"edit"},features:[t.ɵɵInheritDefinitionFeature],decls:14,vars:6,consts:[[1,"graph-annotation","hint",3,"mouseenter","mouseleave"],[1,"graph-annotation__header"],["class","graph-annotation__user","hintPos","top",3,"edHint",4,"ngIf"],[1,"graph-annotation__title","alert"],[3,"ngClass",4,"ngIf"],[1,"graph-annotation__time"],[1,"pointer","graph-annotation__edit-icon",3,"click"],[1,"fa","fa-pencil-square","mt-1"],[1,"graph-annotation__body","hint"],[4,"ngIf"],[3,"text","canRemove",4,"ngFor","ngForOf"],["hintPos","top",1,"graph-annotation__user",3,"edHint"],[3,"key"],[3,"ngClass"],[3,"text","canRemove"]],template:function(e,n){1&e&&(t.ɵɵelementStart(0,"div",0),t.ɵɵlistener("mouseenter",(function(){return n.onMouseEnter()}))("mouseleave",(function(){return n.onMouseLeave()})),t.ɵɵelementStart(1,"div",1),t.ɵɵtemplate(2,Rt,2,2,"div",2),t.ɵɵelementStart(3,"div",3),t.ɵɵtemplate(4,jt,3,3,"span",4),t.ɵɵelementEnd(),t.ɵɵelementStart(5,"span",5),t.ɵɵtext(6),t.ɵɵelementEnd(),t.ɵɵelementStart(7,"span",6),t.ɵɵlistener("click",(function(e){return n.edit.emit(),e.stopPropagation()})),t.ɵɵelement(8,"i",7),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementStart(9,"div",8),t.ɵɵtemplate(10,Vt,2,1,"span",9),t.ɵɵelementStart(11,"div"),t.ɵɵtext(12),t.ɵɵelementEnd(),t.ɵɵtemplate(13,Ht,1,2,"ed-tag",10),t.ɵɵelementEnd(),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(2),t.ɵɵproperty("ngIf",!n.annotation.alert),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",n.annotation.alert),t.ɵɵadvance(2),t.ɵɵtextInterpolate(n.timeLabel),t.ɵɵadvance(4),t.ɵɵproperty("ngIf",n.annotation.alert),t.ɵɵadvance(2),t.ɵɵtextInterpolate(n.annotation.text),t.ɵɵadvance(1),t.ɵɵproperty("ngForOf",n.annotation.tags))},directives:[o.NgIf,o.NgForOf,r.HintDirective,r.AvatarComponent,o.NgClass,r.TagComponent],styles:[".graph-annotation .label-tag{margin-right:4px;margin-top:8px}.graph-annotation .graph-annotation__header{align-items:center;background-color:#333;display:flex;padding:6px 10px}.graph-annotation .graph-annotation__title{display:inline-block;flex-grow:1;font-weight:500;overflow:hidden;padding-right:1rem;text-overflow:ellipsis;white-space:nowrap}.graph-annotation .graph-annotation__title.alert{text-transform:uppercase}.graph-annotation .graph-annotation__edit-icon{padding-left:1rem}.graph-annotation .graph-annotation__time{color:#8e8e8e;display:inline-block;font-style:italic;font-weight:400;position:relative;top:1px}.graph-annotation .graph-annotation__body{padding:.65rem}.graph-annotation .graph-annotation__body.hint{max-width:20rem}.graph-annotation .graph-annotation__user img{border-radius:50%;height:16px;width:16px}.graph-annotation a[href]{color:#33b5e5;text-decoration:underline}"],encapsulation:2});var $t=function(e){function t(t,n){var o=e.call(this,t)||this;return o.store=t,o.time=n,o.MIN_LEFT_X=65,o.mouseDragSubs=t.mouse.drag$.subscribe((function(e){return o.region=e})),o.mouseUpSubs=t.mouse.up$.subscribe((function(e){return o.onMouseUp(e)})),o.mouseHover=t.mouse.hover$.subscribe((function(e){return o.onMouseHover(e)})),o}return m(t,e),Object.defineProperty(t.prototype,"showViewAnnot",{get:function(){var e,t;return(null===(e=this.annotation)||void 0===e?void 0:e.overRoot)||(null===(t=this.annotation)||void 0===t?void 0:t.overPopup)},enumerable:!1,configurable:!0}),t.prototype.ngOnDestroy=function(){var t,n,o;e.prototype.ngOnDestroy.call(this),null===(t=this.mouseUpSubs)||void 0===t||t.unsubscribe(),null===(n=this.mouseDragSubs)||void 0===n||n.unsubscribe(),null===(o=this.mouseHover)||void 0===o||o.unsubscribe()},t.prototype.onMouseUp=function(e){var t=this;if((null==e?void 0:e.ctrlKey)&&this.region){var n=this.scales.xAxis,o=this.region.start,r=this.region.end,i=Math.min(o.offsetX,r.offsetX),a=Math.max(o.offsetX,r.offsetX);i=Math.max(i,n.left),a=Math.min(a,n.right);var l=n.getValueForPixel(i).valueOf(),s=this.epochEnd=n.getValueForPixel(a).valueOf();this.epochStart=this.time.converter.toEpoch(l),this.epochEnd=this.time.converter.toEpoch(s),this.offset=this.getPopupLocation(e),setTimeout((function(){return t.showAddAnnot=!0}))}},t.prototype.onMouseHover=function(e){var t;if(e&&!this.showAddAnnot&&!this.showEditAnnot){var n=[];if(this.annotations.forEach((function(t){var o,r,i,a,l=(null===(o=t.rect)||void 0===o?void 0:o.x1)<=e.offsetX&&(null===(r=t.rect)||void 0===r?void 0:r.x2)>=e.offsetX,s=(null===(i=t.rect)||void 0===i?void 0:i.y1)<=e.offsetY&&(null===(a=t.rect)||void 0===a?void 0:a.y2)>=e.offsetY;l&&s&&t.id?n.push(t):t.overRoot&&setTimeout((function(){return t.overRoot=!1}),100)})),n.length>0){var o=n[0];if(n.forEach((function(e){Math.abs(e.rect.x2-e.rect.x1)<Math.abs(o.rect.x2-o.rect.x1)&&(o=e)})),o!=this.annotation){var r=(o.rect.x2-o.rect.x1)/2-(e.offsetX-(null===(t=o.rect)||void 0===t?void 0:t.x1));this.offset=this.getPopupLocation(e,100+r),o.overRoot=!0,o.overPopup=!1,this.annotation=o}}this.showViewAnnot||(this.annotation=void 0),this.nativeControl.showAnnotView=null!=this.annotation,this.nativeControl.canvas.style.cursor=this.showViewAnnot?"auto":"crosshair"}},t.prototype.getPopupLocation=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=0);var o=this.scales.yAxisL,r=this.nativeControl.canvas.getBoundingClientRect(),i=o.bottom;return{left:e.clientX,top:i+r.y+5+n}},t.prototype.onEditAnnotation=function(){this.offset.left=Math.max(this.MIN_LEFT_X,this.offset.left),this.annotation.overRoot=!1,this.annotation.overPopup=!1,this.showEditAnnot=!0},t.prototype.onEscPressed=function(e){this.showAddAnnot=this.showEditAnnot=!1},t}(st);function zt(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",17),t.ɵɵtext(1),t.ɵɵelementEnd()),2&e){var o=t.ɵɵnextContext().$implicit,r=t.ɵɵnextContext(3);t.ɵɵadvance(1),t.ɵɵtextInterpolate(r.min(o))}}function Gt(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",18),t.ɵɵtext(1),t.ɵɵelementEnd()),2&e){var o=t.ɵɵnextContext().$implicit,r=t.ɵɵnextContext(3);t.ɵɵadvance(1),t.ɵɵtextInterpolate(r.max(o))}}function Kt(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",19),t.ɵɵtext(1),t.ɵɵelementEnd()),2&e){var o=t.ɵɵnextContext().$implicit,r=t.ɵɵnextContext(3);t.ɵɵadvance(1),t.ɵɵtextInterpolate(r.avg(o))}}function Xt(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",20),t.ɵɵtext(1),t.ɵɵelementEnd()),2&e){var o=t.ɵɵnextContext().$implicit,r=t.ɵɵnextContext(3);t.ɵɵadvance(1),t.ɵɵtextInterpolate(r.current(o))}}$t.ɵfac=function(e){return new(e||$t)(t.ɵɵdirectiveInject(lt),t.ɵɵdirectiveInject(a.TimeRangeStore))},$t.ɵcmp=t.ɵɵdefineComponent({type:$t,selectors:[["annotation-dispatcher"]],hostBindings:function(e,n){1&e&&t.ɵɵlistener("keydown.escape",(function(e){return n.onEscPressed(e)}),!1,t.ɵɵresolveDocument)},features:[t.ɵɵInheritDefinitionFeature],decls:6,vars:12,consts:[[3,"visible","offset","shadow","visibleChange"],[3,"epochStart","epochEnd","close",4,"ngIf"],[3,"annotation","close",4,"ngIf"],[3,"offset","visible","shadow"],[3,"annotation","edit",4,"ngIf"],[3,"epochStart","epochEnd","close"],[3,"annotation","close"],[3,"annotation","edit"]],template:function(e,n){1&e&&(t.ɵɵelementStart(0,"ed-popup",0),t.ɵɵlistener("visibleChange",(function(e){return n.showAddAnnot=e})),t.ɵɵtemplate(1,Wt,1,2,"edit-annotation",1),t.ɵɵelementEnd(),t.ɵɵelementStart(2,"ed-popup",0),t.ɵɵlistener("visibleChange",(function(e){return n.showEditAnnot=e})),t.ɵɵtemplate(3,Bt,1,1,"edit-annotation",2),t.ɵɵelementEnd(),t.ɵɵelementStart(4,"ed-popup",3),t.ɵɵtemplate(5,Yt,1,1,"annotation-hint",4),t.ɵɵelementEnd()),2&e&&(t.ɵɵproperty("visible",n.showAddAnnot)("offset",n.offset)("shadow",!0),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",n.showAddAnnot),t.ɵɵadvance(1),t.ɵɵproperty("visible",n.showEditAnnot)("offset",n.offset)("shadow",!0),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",n.showEditAnnot),t.ɵɵadvance(1),t.ɵɵproperty("offset",n.offset)("visible",n.showViewAnnot)("shadow",!0),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",n.showViewAnnot))},directives:[r.PopupComponent,o.NgIf,Lt,qt],encapsulation:2});var Ut=function(e){return{hidden:e}};function Qt(e,n){if(1&e){var o=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"div",9),t.ɵɵlistener("click",(function(e){t.ɵɵrestoreView(o);var r=n.$implicit;return t.ɵɵnextContext(3).onSeriesClicked(r,e)})),t.ɵɵelementStart(1,"div",10),t.ɵɵelement(2,"i",11),t.ɵɵelementEnd(),t.ɵɵelementStart(3,"a",12),t.ɵɵtext(4),t.ɵɵelementEnd(),t.ɵɵtemplate(5,zt,2,1,"div",13),t.ɵɵtemplate(6,Gt,2,1,"div",14),t.ɵɵtemplate(7,Kt,2,1,"div",15),t.ɵɵtemplate(8,Xt,2,1,"div",16),t.ɵɵelementEnd()}if(2&e){var r=n.$implicit,i=t.ɵɵnextContext(3);t.ɵɵproperty("ngClass",t.ɵɵpureFunction1(9,Ut,r.hidden)),t.ɵɵadvance(1),t.ɵɵstyleProp("color",i.color(r)),t.ɵɵadvance(2),t.ɵɵproperty("title",r.label),t.ɵɵadvance(1),t.ɵɵtextInterpolate(r.label),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",i.legend.min),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",i.legend.max),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",i.legend.avg),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",i.legend.current)}}function Zt(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",7),t.ɵɵtemplate(1,Qt,9,11,"div",8),t.ɵɵelementEnd()),2&e){var o=t.ɵɵnextContext(2);t.ɵɵproperty("@fadeInOut",void 0),t.ɵɵadvance(1),t.ɵɵproperty("ngForOf",o.filteredDatasets)}}function Jt(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",3),t.ɵɵelementStart(1,"perfect-scrollbar"),t.ɵɵelementStart(2,"div",4),t.ɵɵtemplate(3,Zt,2,2,"div",5),t.ɵɵelement(4,"div",6),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementEnd()),2&e){var o=t.ɵɵnextContext();t.ɵɵadvance(3),t.ɵɵproperty("ngIf",null==o.datasets?null:o.datasets.length)}}function en(e,n){1&e&&(t.ɵɵelementStart(0,"th",29),t.ɵɵtext(1,"min"),t.ɵɵelementEnd())}function tn(e,n){1&e&&(t.ɵɵelementStart(0,"th",29),t.ɵɵtext(1,"max"),t.ɵɵelementEnd())}function nn(e,n){1&e&&(t.ɵɵelementStart(0,"th",29),t.ɵɵtext(1,"avg"),t.ɵɵelementEnd())}function on(e,n){1&e&&(t.ɵɵelementStart(0,"th",29),t.ɵɵtext(1,"current"),t.ɵɵelementEnd())}function rn(e,n){if(1&e&&(t.ɵɵelementStart(0,"thead"),t.ɵɵelementStart(1,"tr"),t.ɵɵelement(2,"th",27),t.ɵɵtemplate(3,en,2,0,"th",28),t.ɵɵtemplate(4,tn,2,0,"th",28),t.ɵɵtemplate(5,nn,2,0,"th",28),t.ɵɵtemplate(6,on,2,0,"th",28),t.ɵɵelementEnd(),t.ɵɵelementEnd()),2&e){var o=t.ɵɵnextContext(3);t.ɵɵadvance(3),t.ɵɵproperty("ngIf",o.legend.min),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",o.legend.max),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",o.legend.avg),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",o.legend.current)}}function an(e,n){if(1&e&&(t.ɵɵelementStart(0,"td",33),t.ɵɵtext(1),t.ɵɵelementEnd()),2&e){var o=t.ɵɵnextContext().$implicit,r=t.ɵɵnextContext(3);t.ɵɵadvance(1),t.ɵɵtextInterpolate(r.min(o))}}function ln(e,n){if(1&e&&(t.ɵɵelementStart(0,"td",33),t.ɵɵtext(1),t.ɵɵelementEnd()),2&e){var o=t.ɵɵnextContext().$implicit,r=t.ɵɵnextContext(3);t.ɵɵadvance(1),t.ɵɵtextInterpolate(r.max(o))}}function sn(e,n){if(1&e&&(t.ɵɵelementStart(0,"td",33),t.ɵɵtext(1),t.ɵɵelementEnd()),2&e){var o=t.ɵɵnextContext().$implicit,r=t.ɵɵnextContext(3);t.ɵɵadvance(1),t.ɵɵtextInterpolate(r.avg(o))}}function dn(e,n){if(1&e&&(t.ɵɵelementStart(0,"td",33),t.ɵɵtext(1),t.ɵɵelementEnd()),2&e){var o=t.ɵɵnextContext().$implicit,r=t.ɵɵnextContext(3);t.ɵɵadvance(1),t.ɵɵtextInterpolate(r.current(o))}}function cn(e,n){if(1&e){var o=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"tr",30),t.ɵɵelementStart(1,"td",31),t.ɵɵlistener("click",(function(e){t.ɵɵrestoreView(o);var r=n.$implicit;return t.ɵɵnextContext(3).onSeriesClicked(r,e)})),t.ɵɵelementStart(2,"div",10),t.ɵɵelement(3,"i",11),t.ɵɵelementEnd(),t.ɵɵelementStart(4,"div",12),t.ɵɵtext(5),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵtemplate(6,an,2,1,"td",32),t.ɵɵtemplate(7,ln,2,1,"td",32),t.ɵɵtemplate(8,sn,2,1,"td",32),t.ɵɵtemplate(9,dn,2,1,"td",32),t.ɵɵelementEnd()}if(2&e){var r=n.$implicit,i=t.ɵɵnextContext(3);t.ɵɵproperty("ngClass",t.ɵɵpureFunction1(9,Ut,r.hidden)),t.ɵɵadvance(2),t.ɵɵstyleProp("color",i.color(r)),t.ɵɵadvance(2),t.ɵɵproperty("title",r.label),t.ɵɵadvance(1),t.ɵɵtextInterpolate(r.label),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",i.legend.min),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",i.legend.max),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",i.legend.avg),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",i.legend.current)}}function un(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",4),t.ɵɵelementStart(1,"div",23),t.ɵɵelementStart(2,"table",24),t.ɵɵelementStart(3,"colgroup"),t.ɵɵelement(4,"col",24),t.ɵɵelementEnd(),t.ɵɵtemplate(5,rn,7,4,"thead",25),t.ɵɵelementStart(6,"tbody"),t.ɵɵtemplate(7,cn,10,11,"tr",26),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelement(8,"div",6),t.ɵɵelementEnd()),2&e){var o=t.ɵɵnextContext(2);t.ɵɵproperty("@fadeInOut",void 0),t.ɵɵadvance(5),t.ɵɵproperty("ngIf",o.datasets&&o.datasets.length>0),t.ɵɵadvance(2),t.ɵɵproperty("ngForOf",o.filteredDatasets)}}function pn(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",21),t.ɵɵelementStart(1,"perfect-scrollbar"),t.ɵɵtemplate(2,un,9,3,"div",22),t.ɵɵelementEnd(),t.ɵɵelementEnd()),2&e){var o=t.ɵɵnextContext();t.ɵɵadvance(2),t.ɵɵproperty("ngIf",null==o.datasets?null:o.datasets.length)}}var mn=function(e){function t(t){return e.call(this,t)||this}return m(t,e),Object.defineProperty(t.prototype,"legend",{get:function(){return this.widget.legend},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"filteredDatasets",{get:function(){var e=this.datasets.filter((function(e){return e.legend}));return this.legend.hideOnlyZeroes&&(e=e.filter((function(e){return!e.allZeros}))),this.legend.hideOnlyNulls&&(e=e.filter((function(e){return!e.allNulls}))),e},enumerable:!1,configurable:!0}),t.prototype.axis=function(e){var t=this.widget.axes;return e.yAxisID==y?t.leftY:t.rightY},t.prototype.decimals=function(e){return this.legend.decimals?this.legend.decimals:0},t.prototype.unit=function(e){return this.axis(e).unit},t.prototype.color=function(e){return this.display.getLineColor(e,1)},t.prototype.min=function(e){return L.getFormattedValue(e.min,this.unit(e),this.decimals(e))},t.prototype.max=function(e){return L.getFormattedValue(e.max,this.unit(e),this.decimals(e))},t.prototype.avg=function(e){return L.getFormattedValue(e.avg,this.unit(e),this.decimals(e))},t.prototype.current=function(e){return L.getFormattedValue(e.current,this.unit(e),this.decimals(e))},t.prototype.onSeriesClicked=function(e,t){var n=this;if(t.ctrlKey){var o=0==e.selected;this.toggleSeries(e,o)}else{var r=void 0===e.selected||0==e.selected||void 0;this.toggleSeries(e,r),this.datasets.filter((function(t){return t!=e})).forEach((function(e){return n.toggleSeries(e,1!=r&&void 0)}))}this.component.control.refresh()},t.prototype.toggleSeries=function(e,t){e.selected=t,void 0===t?(delete e.hidden,delete e.selected):e.hidden=!t},t}(st);mn.ɵfac=function(e){return new(e||mn)(t.ɵɵdirectiveInject(lt))},mn.ɵcmp=t.ɵɵdefineComponent({type:mn,selectors:[["chart-legend"]],features:[t.ɵɵInheritDefinitionFeature],decls:4,vars:2,consts:[[1,"legend__top-wrapper"],["class","legend__bottom",4,"ngIf","ngIfElse"],["legendAsTable",""],[1,"legend__bottom"],[1,"legend__scroller-cont"],["class","legend__series-wrapper",4,"ngIf"],[1,"legend__scroller-padding"],[1,"legend__series-wrapper"],["class","legend__series",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"legend__series",3,"ngClass","click"],[1,"legend__icon"],[1,"fa","fa-minus","pointer"],[1,"legend__alias","pointer",3,"title"],["class","legend__value min",4,"ngIf"],["class","legend__value max",4,"ngIf"],["class","legend__value avg",4,"ngIf"],["class","legend__value current",4,"ngIf"],[1,"legend__value","min"],[1,"legend__value","max"],[1,"legend__value","avg"],[1,"legend__value","current"],[1,"legend__bottom-table"],["class","legend__scroller-cont",4,"ngIf"],[1,"legend__series-wrapper","legend__full-width"],[1,"legend__full-width"],[4,"ngIf"],["class","legend__series",3,"ngClass",4,"ngFor","ngForOf"],[2,"text-align","left"],["class","pointer",4,"ngIf"],[1,"pointer"],[1,"legend__series",3,"ngClass"],[3,"click"],["class","legend__value",4,"ngIf"],[1,"legend__value"]],template:function(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",0),t.ɵɵtemplate(1,Jt,5,1,"div",1),t.ɵɵtemplate(2,pn,3,1,"ng-template",null,2,t.ɵɵtemplateRefExtractor),t.ɵɵelementEnd()),2&e){var o=t.ɵɵreference(3);t.ɵɵadvance(1),t.ɵɵproperty("ngIf",!n.legend.table)("ngIfElse",o)}},directives:[o.NgIf,c.PerfectScrollbarComponent,o.NgForOf,o.NgClass],styles:['.hide-text{background-color:transparent;border:0;color:transparent;font:0/0 a;text-shadow:none}.input-block-level{box-sizing:border-box;display:block;min-height:18px;width:100%}.animate-height{max-height:0;overflow:hidden}.animate-height--open{max-height:1000px;overflow:auto;transition:max-height .25s ease-in-out}.legend__top-wrapper{display:flex;flex-grow:1;max-height:100%;min-height:0;overflow:hidden;position:relative;width:100%}.legend__bottom{min-width:0;padding-bottom:5px}.legend__scroller-cont{display:flex;flex-direction:row}.legend__scroller-padding{min-width:10px}.legend__series-wrapper{display:flex;flex-direction:row;flex-wrap:wrap;min-width:0}.legend__series{min-width:0;padding-left:10px;white-space:nowrap}.legend__series--right-y{float:right}.legend__series.hidden .legend__alias,.legend__series.hidden .legend__value{color:#969696}.legend__alias,.legend__icon,.legend__value{cursor:pointer;display:inline;font-size:85%;text-align:left;white-space:nowrap}.legend__alias.current:before,.legend__icon.current:before,.legend__value.current:before{content:"Current: "}.legend__alias.max:before,.legend__icon.max:before,.legend__value.max:before{content:"Max: "}.legend__alias.min:before,.legend__icon.min:before,.legend__value.min:before{content:"Min: "}.legend__alias.total:before,.legend__icon.total:before,.legend__value.total:before{content:"Total: "}.legend__alias.avg:before,.legend__icon.avg:before,.legend__value.avg:before{content:"Avg: "}.legend__icon{padding-right:4px;position:relative;top:1px}.legend__icon .fa{font-size:135%;position:relative;top:1px}.legend__value{padding-left:6px}.legend__bottom-table{padding-bottom:1px;padding-left:5px;padding-right:5px;width:100%}.legend__bottom-table .legend__series{display:table-row;float:none;padding-left:0}.legend__bottom-table .legend__series--right-y{float:none}.legend__bottom-table .legend__series--right-y .legend__alias:after{color:#8e8e8e;content:"(right-y)";padding:0 5px}.legend__bottom-table .legend__alias,.legend__bottom-table .legend__icon,.legend__bottom-table .legend__value,.legend__bottom-table td{display:table-cell;float:none;padding:2px 10px;text-align:right;white-space:nowrap}.legend__bottom-table .legend__icon{padding:0;top:0;width:5px}.legend__bottom-table .legend__icon .fa{top:3px}.legend__bottom-table .legend__value{padding-left:15px}.legend__bottom-table .legend__alias{max-width:650px;overflow:hidden;padding-left:7px;text-align:left;text-overflow:ellipsis;width:95%}.legend__bottom-table th{color:#33b5e5;font-size:85%;font-weight:700;padding:0 10px 1px 0;text-align:right;white-space:nowrap}.legend__bottom-table .legend__series:nth-child(odd){background:#262628}.legend__full-width{width:100%}'],encapsulation:2,data:{animation:[r.FadeInOutAnimation]}});var hn=function(){};hn.ɵmod=t.ɵɵdefineNgModule({type:hn}),hn.ɵinj=t.ɵɵdefineInjector({factory:function(e){return new(e||hn)},imports:[[o.CommonModule,i.FormsModule,i.ReactiveFormsModule,u.ChartModule,a.EdCommonModule,r.EdUilibModule,c.PerfectScrollbarModule]]}),("undefined"==typeof ngJitMode||ngJitMode)&&t.ɵɵsetNgModuleScope(hn,{declarations:[It,et,mn,H,V,j,q,fe,W,J,Q,K,z,re,ne,ze,$e,De,Ie,we,Ce,Re,ke,kt,$t,Lt,qt],imports:[o.CommonModule,i.FormsModule,i.ReactiveFormsModule,u.ChartModule,a.EdCommonModule,r.EdUilibModule,c.PerfectScrollbarModule],exports:[It,et]}),t.ɵɵsetComponentScope(It,[o.NgClass,o.NgComponentOutlet,o.NgForOf,o.NgIf,o.NgTemplateOutlet,o.NgStyle,o.NgSwitch,o.NgSwitchCase,o.NgSwitchDefault,o.NgPlural,o.NgPluralCase,i.ɵangular_packages_forms_forms_y,i.NgSelectOption,i.ɵangular_packages_forms_forms_x,i.DefaultValueAccessor,i.NumberValueAccessor,i.RangeValueAccessor,i.CheckboxControlValueAccessor,i.SelectControlValueAccessor,i.SelectMultipleControlValueAccessor,i.RadioControlValueAccessor,i.NgControlStatus,i.NgControlStatusGroup,i.RequiredValidator,i.MinLengthValidator,i.MaxLengthValidator,i.PatternValidator,i.CheckboxRequiredValidator,i.EmailValidator,i.NgModel,i.NgModelGroup,i.NgForm,i.FormControlDirective,i.FormGroupDirective,i.FormControlName,i.FormGroupName,i.FormArrayName,u.UIChart,r.DialogActionsComponent,r.DialogComponent,r.DropDownComponent,r.DropDownValueTemplate,r.DropDownSelectedValueTemplate,r.PopupComponent,r.ContextMenuComponent,r.HierarchicalDropDownComponent,r.HintDirective,r.ErrorHintDirective,r.AutoCompleteComponent,r.PreferencesComponent,r.EmptyListComponent,r.InfoBoxComponent,r.ProgressComponent,r.FilterBoxComponent,r.TextBoxComponent,r.TextBoxValidationTemplate,r.CheckBoxComponent,r.AutoFocusDirective,r.TagBoxComponent,r.TextAreaComponent,r.AvatarComponent,r.GridComponent,r.ColumnComponent,r.DeleteColumnComponent,r.SlideDownComponent,r.TabStripComponent,r.TabComponent,r.TabTitleTemplate,r.TabContentTemplate,r.SideTabStripComponent,r.LoadOrErrorComponent,r.ErrorPopupComponent,r.NoteComponent,r.ModuleLoaderComponent,r.UserPickerComponent,r.TeamPickerComponent,r.PermissionPickerComponent,r.PermissionRulePickerComponent,r.PermissionIconComponent,r.TagPickerComponent,r.TimeRangePickerComponent,r.PluginPickerComponent,r.ColorPickerComponent,r.AutoCompletePickerComponent,r.FolderPickerComponent,r.PaletteEditorComponent,r.ColorCircleComponent,r.IconComponent,r.LabelIconComponent,r.RemoveHostDirective,r.PageComponent,r.PageHeaderComponent,r.PageTitleComponent,r.PageTabsNavigationComponent,r.PageDropdownNavigationComponent,r.TagComponent,r.DashboardExplorerComponent,r.DashboardExplorerDeleterComponent,r.DashboardExplorerMoverComponent,r.CardsLayoutSwitcherComponent,r.JsonExplorerComponent,r.GeneralEditorComponent,r.MetricsEditorComponent,r.MetricsDesignerAnchorDirective,r.MetricsInspectorComponent,c.PerfectScrollbarComponent,c.PerfectScrollbarDirective,It,et,mn,H,V,j,q,fe,W,J,Q,K,z,re,ne,ze,$e,De,Ie,we,Ce,Re,ke,kt,$t,Lt,qt],[o.AsyncPipe,o.UpperCasePipe,o.LowerCasePipe,o.JsonPipe,o.SlicePipe,o.DecimalPipe,o.PercentPipe,o.TitleCasePipe,o.CurrencyPipe,o.DatePipe,o.I18nPluralPipe,o.I18nSelectPipe,o.KeyValuePipe]),e.ChartComponent=It,e.ChartEditorComponent=et,e.ChartWidgetModule=hn,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=chart.umd.min.js.map