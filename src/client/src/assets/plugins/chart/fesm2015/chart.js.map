{"version":3,"file":"chart.js","sources":["../../../../app/plugins/widgets/chart/src/extensions/pixel-helper.ts","../../../../app/plugins/widgets/chart/src/extensions/trackball-drawer.ts","../../../../app/plugins/widgets/chart/src/services/data-provider.ts","../../../../app/plugins/widgets/chart/src/services/color-helper.ts","../../../../app/plugins/widgets/chart/src/services/series-manager.ts","../../../../app/plugins/widgets/chart/src/chart.c.ts","../../../../app/plugins/widgets/chart/src/chart.mod.ts","../../../../app/plugins/widgets/chart/src/public-api.ts","../../../../app/plugins/widgets/chart/src/chart.ts"],"sourcesContent":["\r\nexport class PixelHelper {\r\n\tpublic static alignPixel( chart, pixel, width) {\r\n\t\tvar devicePixelRatio = chart.currentDevicePixelRatio;\r\n\t\tvar halfWidth = width / 2;\r\n\t\treturn Math.round((pixel - halfWidth) * devicePixelRatio) / devicePixelRatio + halfWidth;\r\n\t};\r\n}\r\n","import { PixelHelper } from \"./pixel-helper\";\r\n\r\nexport class TrackballDrawerPlugin {\r\n\tstatic readonly ID = \"trackball\";\r\n\r\n\tget id(){\r\n\t\treturn TrackballDrawerPlugin.ID;\r\n\t}\r\n\r\n\tafterDatasetsDraw(chart, easing) {\r\n\t\t//console.log( \"trackball plugin\" )\r\n\t\treturn;\r\n\t\t\r\n\t\tconst context = chart.chart.ctx;\r\n\r\n\t\tconst scaleX = chart.scales['x-axis-0'];\r\n\t\t\r\n\t\t//const scaleYA = chart.scales[ \"A\" ];\r\n\t\tconst scaleYA = chart.scales[ \"y-axis-0\" ];\r\n\r\n\t\tvar pos = this.getMousePos( chart.canvas, chart.trackball );\r\n\r\n\t\tconsole.log( pos );\r\n\r\n\t\tconst shouldIgnore = \r\n\t\t\t( !chart.trackball ) ||\r\n\t\t\t( 0 == chart.data.datasets.length ) ||\r\n\t\t\t( pos.x < scaleX.left || pos.x > scaleX.right );\r\n\r\n\t\tif( shouldIgnore ){\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst lw = 0.8;\r\n\t\tconst x = PixelHelper.alignPixel( chart, pos.x, lw )\r\n\t\tconst y1 = PixelHelper.alignPixel( chart, scaleYA.top, lw )\r\n\t\tconst y2 = PixelHelper.alignPixel( chart, scaleYA.bottom, lw )\r\n\r\n\t\tcontext.beginPath();\r\n\t\tcontext.strokeStyle = \"#880015\";\r\n\t\tcontext.lineWidth = lw;\r\n\t\tcontext.moveTo( x, y1 );\r\n\t\tcontext.lineTo( x, y2);\r\n\t\tcontext.stroke();\r\n\t}\r\n\r\n\tgetMousePos(canvas, evt) {\r\n\t\tif( !evt ){\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n    var rect = canvas.getBoundingClientRect();\r\n    return {\r\n      x: evt.clientX - rect.left,\r\n      y: evt.clientY - rect.top\r\n    };\r\n\t}\r\n\r\n}","import { EventEmitter, Inject, Injectable, Injector } from \"@angular/core\";\r\nimport { Subscription } from \"rxjs\";\r\nimport { finalize, mergeMap, tap } from 'rxjs/operators';\r\nimport { IPanel, TimeRangeStore, PluginLoader, PluginStore,\r\n\tQueryCompiler, DataSourceService, Plugin } from 'common';\r\nimport * as moment_ from 'moment';\r\nconst moment = moment_;\r\n\r\n@Injectable()\r\nexport class DataProvider {\r\n\trequest: string;\r\n\r\n\tdata$ = new EventEmitter();\r\n\terror$ = new EventEmitter();\r\n\r\n\ttimeSubs: Subscription;\r\n\r\n\tget metrics(){\r\n\t\treturn this.panel?.widget?.metrics;\r\n\t}\r\n\r\n\tconstructor (\r\n\t\tprivate pluginStore: PluginStore,\r\n\t\tprivate dsService: DataSourceService,\r\n\t\tprivate time: TimeRangeStore,\r\n\t\tprivate pluginLoader: PluginLoader,\r\n\t\tprivate injector: Injector,\r\n\t\t@Inject( 'panel' ) private panel: IPanel ) {\r\n\r\n\t\t\tthis.timeSubs = this\r\n\t\t\t\t.time\r\n\t\t\t\t.range$\r\n\t\t\t\t.pipe(\r\n\t\t\t\t\ttap( _ => this.request = '' ),\r\n\t\t\t\t\tmergeMap( _ => this.pluginStore.getDataSource( \"influx\" ) ),\r\n\t\t\t\t\tmergeMap( ( p: Plugin ) => this.pluginLoader.loadDataSourceQueryCompiler( p, this.injector )),\r\n\t\t\t\t\tmergeMap( ( c: QueryCompiler ) => c.compile( this.metrics, time.range )))\r\n\t\t\t\t.subscribe( ( x: string ) => this.pull( x ));\r\n\t}\r\n\r\n\tdestroy(){\r\n\t\tthis.timeSubs?.unsubscribe();\r\n\t}\r\n\r\n\tpull( request: string){\r\n\t\tif (this.request === request) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis.request = request;\r\n\r\n\t\tconsole.log( `pull: ${request}` );\r\n\t\t\r\n\t\tif (!request) {\r\n\t\t\tthis.data$.emit([])\r\n\t\t} else {\r\n\t\t\tthis.panel.loading = true;\r\n\r\n\t\t\tthis\r\n\t\t\t\t.dsService\r\n\t\t\t\t.proxy( 6, request)\r\n\t\t\t\t.pipe(\r\n\t\t\t\t\tfinalize(() => this.panel.loading = false ))\r\n\t\t\t\t.subscribe(\r\n\t\t\t\t\tx => this.data$.emit( x ),\r\n\t\t\t\t\te => this.error$.emit(e.error));\r\n\t\t}\r\n\t}\r\n}","export class ColorHelper {\r\n\r\n\tprivate palette = new Array<string>()\r\n\r\n\tconstructor() {\r\n\t\tthis.palette = [\r\n\t\t\t\r\n\t\t\t\"7eb26d\",\r\n\t\t\t\"cca300\",\r\n\t\t\t\"6ed0e0\",\r\n\t\t\t\"EF843C\",\r\n\t\t\t\"E24D42\",\r\n\t\t\t\"1F78C1\",\r\n\t\t\t\"BA43A9\",\r\n\t\t\t\"705DA0\",\r\n\t\t\t\"508642\",\r\n\t\t\t\"CCA300\",\r\n\t\t\t\"447EBC\",\r\n\t\t\t\"C15C17\",\r\n\t\t\t\"890F02\",\r\n\t\t\t\"0A437C\",\r\n\t\t\t\"6D1F62\",\r\n\t\t\t\"584477\",\r\n\t\t\t\"B7DBAB\",\r\n\t\t\t\"F4D598\",\r\n\t\t\t\"70DBED\",\r\n\t\t\t\"F9BA8F\",\r\n\t\t\t\"F29191\",\r\n\t\t\t\"82B5D8\",\r\n\t\t\t\"E5A8E2\",\r\n\t\t\t\"AEA2E0\",\r\n\t\t\t\"629E51\",\r\n\t\t\t\"E5AC0E\",\r\n\t\t\t\"64B0C8\",\r\n\t\t\t\"E0752D\",\r\n\t\t\t\"BF1B00\",\r\n\t\t\t\"0A50A1\",\r\n\t\t\t\"962D82\",\r\n\t\t\t\"614D93\",\r\n\t\t\t\"9AC48A\",\r\n\t\t\t\"F2C96D\",\r\n\t\t\t\"65C5DB\",\r\n\t\t\t\"F9934E\",\r\n\t\t\t\"5195CE\",\r\n\t\t\t\"D683CE\",\r\n\t\t\t\"806EB7\",\r\n\t\t\t\"3F6833\",\r\n\t\t\t\"967302\",\r\n\t\t\t\"2F575E\",\r\n\t\t\t\"99440A\",\r\n\t\t\t\"58140C\",\r\n\t\t\t\"052B51\",\r\n\t\t\t\"511749\",\r\n\t\t\t\"3F2B5B\",\r\n\t\t\t\"E0F9D7\",\r\n\t\t\t\"FCEACA\",\r\n\t\t\t\"CFFAFF\",\r\n\t\t\t\"F9E2D2\",\r\n\t\t\t\"FCE2DE\",\r\n\t\t\t\"BADFF4\",\r\n\t\t\t\"F9D9F9\",\r\n\t\t\t\"DEDAF7\",\r\n\t\t\t\"EA6460\"\r\n\t\t]\r\n\t}\r\n\t\r\n\r\n\tpublic getColor(ds) {\r\n\t\tconst color = this.palette[ds.index % this.palette.length];\r\n\r\n\t\treturn this.hexToRgb(color);\r\n\t}\r\n\r\n\tpublic getColorAsArgbFunc(ds, opacity: number = 1) {\r\n\t\tconst color = this.getColor(ds);\r\n\r\n\t\treturn `rgba(${color.r},${color.g},${color.b}, ${opacity})`\r\n\t}\r\n\r\n\r\n\tprivate hexToRgb(hex) {\r\n\t\tvar result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\r\n\t\treturn result ? {\r\n\t\t\tr: parseInt(result[1], 16),\r\n\t\t\tg: parseInt(result[2], 16),\r\n\t\t\tb: parseInt(result[3], 16)\r\n\t\t} : null;\r\n\t}\r\n\r\n\tpublic static parse(input) {\r\n\t\tvar arr = [];\r\n\r\n\t\tif (input.substr(0,1)==\"#\") {\r\n\t\t\tvar collen=(input.length-1)/3;\r\n\t\t\tvar fact=[17,1,0.062272][collen-1];\r\n\t\t\tarr = [\r\n\t\t\t\t\tMath.round(parseInt(input.substr(1,collen),16)*fact),\r\n\t\t\t\t\tMath.round(parseInt(input.substr(1+collen,collen),16)*fact),\r\n\t\t\t\t\tMath.round(parseInt(input.substr(1+2*collen,collen),16)*fact)\r\n\t\t\t];\r\n\t\t}\r\n\t\telse {\r\n\t\t\tarr =  input.split(\"(\")[1].split(\")\")[0].split(\",\").map(Math.round);\r\n\t\t} \r\n\r\n\t\treturn {\r\n\t\t\tr: arr[ 0 ],\r\n\t\t\tg: arr[ 1 ],\r\n\t\t\tb: arr[ 2 ]\r\n\t\t}\r\n\t\t\t\r\n\t}\r\n\r\n\tpublic static rgbToHex(e){\r\n\t\tconst c = ColorHelper.parse( e )\r\n\t\tconst r = c.r.toString(16).padStart(2, \"0\");\r\n\t\tconst g = c.g.toString(16).padStart(2, \"0\");\r\n\t\tconst b = c.b.toString(16).padStart(2, \"0\");\r\n\r\n\t\treturn `#${r}${g}${b}`;\r\n\t}\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","import { ColorHelper } from \"./color-helper\";\r\nimport { EventEmitter, Injectable } from '@angular/core';\r\nimport { DataProvider } from './data-provider';\r\nimport { Subscription } from 'rxjs';\r\nimport { Moment } from 'common';\r\n\r\n@Injectable()\r\nexport class SeriesManager {\r\n\r\n\tprivate dataReadySubs: Subscription;\r\n\tprivate errorSubs: Subscription;\r\n\r\n\tdataSets$ = new EventEmitter<any>();\r\n\r\n\tconstructor(private dataProvider: DataProvider) {\r\n\t\tthis.dataReadySubs = this\r\n\t\t\t.dataProvider\r\n\t\t\t.data$\r\n\t\t\t.subscribe(x => this.rebuild(x))\r\n\r\n\t\tthis.errorSubs = this\r\n\t\t\t.dataProvider\r\n\t\t\t.error$\r\n\t\t\t.subscribe(x => this.error(x))\r\n\t}\r\n\r\n\tprivate rebuild(data) {\r\n\t\tif (!data || 0 === data.length) {\r\n\t\t\tthis.dataSets$.emit( [] );\r\n\t\t\t//this.chart.data.datasets = [];\r\n\t\t} else {\r\n\t\t\tlet dataSets = [];\r\n\t\t\tlet totalIndex = 0;\r\n\r\n\t\t\tdata.forEach(serie => {\r\n\t\t\t\tconst columns = serie.columns.slice(1);\r\n\r\n\t\t\t\tconst arr = [...columns.map((el, index) =>\r\n\t\t\t\t\tthis.getDataSet(serie, index + 1, totalIndex++))]\r\n\t\t\t\t\t.filter(x => x);\r\n\r\n\t\t\t\tdataSets = [...dataSets, ...arr];\r\n\t\t\t});\r\n\r\n\t\t\t//this.chart.data.datasets = dataSets;\r\n\t\t\tthis.dataSets$.emit( dataSets );\r\n\t\t}\r\n\t\t//this.chart.widget.error = undefined;\r\n\t}\r\n\r\n\tprivate error(err) {\r\n\t\t// \tthis.chart.data.datasets = []\r\n\t\t//  this.chart.update();\r\n\t\t//  this.chart.widget.error = err.details;\r\n\t}\r\n\r\n\tprivate getDataSet(serie, index, totalIndex) {\r\n\t\tconst values = serie\r\n\t\t\t.values\r\n\t\t\t.map(x => {\r\n\t\t\t\tconst isNull = (null == x[index]);\r\n\r\n\t\t\t\treturn {\r\n\t\t\t\t\tx: Moment.valueOf( x[0] ),// moment().valueOf(),\r\n\t\t\t\t\ty: (isNull) ? x[index] : x[index],\r\n\t\t\t\t\tisNull: isNull\r\n\t\t\t\t}\r\n\t\t\t})\r\n\r\n\t\tconst filteredValues = values\r\n\t\t\t.map(p => p.y)\r\n\t\t\t.filter(p => null != p)\r\n\t\t\t.map(p => parseFloat(p));\r\n\r\n\t\tif (0 == filteredValues.length) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst avg = (filteredValues.reduce((a, b) => a + b) / filteredValues.length)\r\n\r\n\t\tconst allNulls = filteredValues.every(x => x == null);\r\n\t\tconst allZeros = filteredValues.every(x => x == 0);\r\n\r\n\t\tconst ds = {\r\n\t\t\tlabel: this.generateDataSetName(serie, index),\r\n\t\t\tdata: values,\r\n\t\t\tlineTension: 0,\r\n\t\t\tmin: Math.min(...filteredValues),\r\n\t\t\tmax: Math.max(...filteredValues),\r\n\t\t\tavg: avg,\r\n\t\t\tcurrent: filteredValues.slice(-1)[0],\r\n\t\t\tallNulls: allNulls,\r\n\t\t\tallZeros: allZeros,\r\n\t\t\tindex: totalIndex,\r\n\t\t\tpointRadius:0,\r\n\t\t\tborderColor: null\r\n\t\t\t//widget: this.chart.widget,\r\n\t\t}\r\n\r\n\t\tds.borderColor = new ColorHelper().getColorAsArgbFunc( ds, 1 );\r\n\t\t//console.log( ds.borderColor );\r\n\r\n\t\t//this.display.setup(ds);\r\n\r\n\t\treturn ds;\r\n\t}\r\n\r\n\tprivate generateDataSetName( serie, index ){\r\n\t\tlet root = `${serie.name}.${serie.columns[ index ]}`;\r\n\r\n\t\tlet tags = '';\r\n\t\tvar keys = Object.keys(serie.tags);\r\n\t\tvar keyIndex = 0;\r\n\r\n\t\tfor(var key in serie.tags){\r\n\t\t\ttags += `${keyIndex > 0 ? ', ': ''}${key}: ${serie.tags[ key ]}` ;\r\n\t\t\tkeyIndex++\r\n\t\t}\r\n\r\n\t\t// serie.tags.forEach( ( t, index ) => tags = `${tags}${index > 0 ? ',': ''} tag` )\r\n\r\n\t\tif( tags ){\r\n\t\t\troot = `${root} {${tags}}`;\r\n\t\t}\r\n\r\n\t\t//console.log( target );\r\n\r\n\t\treturn root;\r\n\t}\r\n\r\n\r\n}","import { Component } from '@angular/core';\nimport { PluginLoader } from 'common';\nimport { TrackballDrawerPlugin } from './extensions/trackball-drawer';\nimport { DataProvider } from './services/data-provider';\nimport { SeriesManager } from './services/series-manager';\n\n@Component({\n  selector: 'widget',\n  providers:[ \n    DataProvider,\n    SeriesManager,\n    PluginLoader\n  ],\n  template: `\n    <p-chart \n      type=\"line\"\n      [data]=\"data\"\n      [options]=\"options\"\n      [plugins]=\"plugins\"\n      height=\"100%\">\n    </p-chart>\n  `\n})\nexport class ChartComponent {\n  data: any;\n  options: any;\n\n  plugins = [ new TrackballDrawerPlugin() ]\n\n  constructor( \n    private dataProvider: DataProvider,\n    private seriesManager: SeriesManager ) {\n\n      seriesManager\n        .dataSets$\n        .subscribe( x => this.data = { datasets: x } );\n\n        const axisYa = {\n          id: 'A',\n          gridLines: {\n            color: 'rgba( 255,255,255, 0.1)',\n            zeroLineWidth: 3,\n          },\n        }\n    \n        const axisYb = {\n          id: 'B',\n          position: 'right'\n        }\n\n      this.options = {\n        maintainAspectRatio: false,\n        animation: false,\n\n        legend: {\n          display: false\n        },\n        \n        spanGaps: true,\n\n        scales: {\n          xAxes: [{\n            type: 'time',\n            gridLines: {\n              color: 'rgba( 255,255,255, 0.1)',\n            },\n            ticks: {\n              autoSkip: true,\n              autoSkipPadding: 50,\n              maxRotation: 0,\n              minRotation: 0,\n            },\n            time: {\n              displayFormats: {\n                second: 'HH:mm:ss',\n                minute: 'HH:mm',\n                hour: 'HH:mm',\n                day: 'M/D HH:mm',\n                week: 'M/D',\n                month: 'M/D',\n                year: 'YYYY-M',\n               },\n  \n               //stepSize: 30\n            },\n          \n  \n          \n          }],\n          yAxes: /*!AxesManager.needSecondaryYAxis(widget)*/true ? [axisYa] : [axisYa, axisYb]\n          \n        },\n      };\n  }\n\n  ngOnDestroy(){\n    this.dataProvider.destroy();\n  }\n \n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { EdCommonModule } from 'common';\nimport { ChartModule } from 'primeng';\nimport { EdUilibModule } from 'uilib';\nimport { ChartComponent } from './chart.c';\nimport { DataProvider } from './services/data-provider';\n\n@NgModule({\n  declarations: [\n    ChartComponent\n  ],\n  imports: [\n    CommonModule,\n    FormsModule,\n    ReactiveFormsModule,\n    ChartModule,\n\n    EdCommonModule,\n    EdUilibModule,\n    //SharedModule\n\n  ],\n  exports: [\n    ChartComponent\n  ]\n})\nexport class ChartWidgetModule { }\n","/*\n * Public API Surface of chart\n */\n\n\nexport * from './chart.mod';\nexport * from './chart.c';\n\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":["i0.ɵɵelement","i0.ɵɵproperty"],"mappings":"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"}